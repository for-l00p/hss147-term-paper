{"status":"OK","result":{"originalLocale":"en","allowViewHistory":false,"creationTimeSeconds":1431245480,"rating":3,"authorHandle":"YoungCoder","modificationTimeSeconds":1431428028,"id":17813,"title":"\u003cp\u003eDP Contest. Editorial.\u003c/p\u003e","locale":"en","content":"\u003cdiv class\u003d\"ttypography\"\u003e\u003cp\u003e\u003ca href\u003d\"//codeforces.com/group/FjK2JP9LbD/contest/202908/problem/A\"\u003e\u003cstrong\u003eA. Sequence of Balls\u003c/strong\u003e\u003c/a\u003e\u003c/p\u003e\u003cp\u003e\u003ca href\u003d\"//codeforces.com/problemset/problem/67/C\"\u003eOriginal problem\u003c/a\u003e is problem C from \u003ca href\u003d\"//codeforces.com/contest/67\"\u003eManthan 2011\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eWe will solve the problem using recursive (lazy) DP.\u003c/p\u003e\u003cp\u003eLet \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eA\u003c/i\u003e \u003d (\u003ci\u003ea\u003c/i\u003e, \u003ci\u003eb\u003c/i\u003e, \u003ci\u003ec\u003c/i\u003e)\u003c/span\u003e and \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eB\u003c/i\u003e \u003d (\u003ci\u003eb\u003c/i\u003e, \u003ci\u003ec\u003c/i\u003e, \u003ci\u003ea\u003c/i\u003e)\u003c/span\u003e. We can either swap \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ea\u003c/i\u003e\u003c/span\u003e twice or erase it and insert in the end. The second way is surely doesn\u0027t take longer time than the first because it is given that \u003cspan class\u003d\"tex-span\"\u003e2·\u003ci\u003et\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ee\u003c/i\u003e\u003c/sub\u003e ≥ \u003ci\u003et\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e + \u003ci\u003et\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ed\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e. By the same way we can prove it for bigger sequences. It means that it isn\u0027t profitable to swap one element more than once. Let \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eA\u003c/i\u003e \u003d (\u003ci\u003ea\u003c/i\u003e, \u003ci\u003eb\u003c/i\u003e)\u003c/span\u003e and \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eB\u003c/i\u003e \u003d (\u003ci\u003ec\u003c/i\u003e, \u003ci\u003ea\u003c/i\u003e)\u003c/span\u003e. We can swap \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ea\u003c/i\u003e\u003c/span\u003e then replace \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eb\u003c/i\u003e\u003c/span\u003e by \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ec\u003c/i\u003e\u003c/span\u003e or erase \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eb\u003c/i\u003e\u003c/span\u003e and insert \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ec\u003c/i\u003e\u003c/span\u003e. The cost will be \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003et\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ee\u003c/i\u003e\u003c/sub\u003e + \u003ci\u003emin\u003c/i\u003e(\u003ci\u003et\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e + \u003ci\u003et\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ed\u003c/i\u003e\u003c/sub\u003e, \u003ci\u003et\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003er\u003c/i\u003e\u003c/sub\u003e)\u003c/span\u003e. Another way is to erase \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eb\u003c/i\u003e\u003c/span\u003e and insert \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ec\u003c/i\u003e\u003c/span\u003e in the beginning. Again, using the fact that \u003cspan class\u003d\"tex-span\"\u003e2·\u003ci\u003et\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ee\u003c/i\u003e\u003c/sub\u003e ≥ \u003ci\u003et\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e + \u003ci\u003et\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ed\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e we can say that the second way is more efficient. It means that swap is effective only for converting \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003ea\u003c/i\u003e, \u003ci\u003eb\u003c/i\u003e)\u003c/span\u003e to \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003eb\u003c/i\u003e, \u003ci\u003ea\u003c/i\u003e)\u003c/span\u003e or similar sequences.\u003c/p\u003e\u003cp\u003eLet \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003en\u003c/i\u003e\u003c/span\u003e be the size of \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eA\u003c/i\u003e\u003c/span\u003e, \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003em\u003c/i\u003e\u003c/span\u003e be the size of \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eB\u003c/i\u003e\u003c/span\u003e and \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ed\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ej\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e be the minimal time to convert \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003eA\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e, \u003ci\u003eA\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e + 1\u003c/sub\u003e, ..., \u003ci\u003eA\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003en\u003c/i\u003e - 1\u003c/sub\u003e)\u003c/span\u003e to \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003eB\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ej\u003c/i\u003e\u003c/sub\u003e, \u003ci\u003eB\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ej\u003c/i\u003e + 1\u003c/sub\u003e, ..., \u003ci\u003eB\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003em\u003c/i\u003e - 1\u003c/sub\u003e)\u003c/span\u003e. So, answer to our problem is \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ed\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e0, 0\u003c/sub\u003e\u003c/span\u003e\u003c/p\u003e\u003cp\u003eLet \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003epA\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ec\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e \u003d first position of character \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ec\u003c/i\u003e\u003c/span\u003e in \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003eA\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e + 1\u003c/sub\u003e, \u003ci\u003eA\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e + 2\u003c/sub\u003e, ..., \u003ci\u003eA\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003en\u003c/i\u003e - 1\u003c/sub\u003e)\u003c/span\u003e and \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003epB\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ec\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e \u003d first position of character \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ec\u003c/i\u003e\u003c/span\u003e in \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003eB\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e + 1\u003c/sub\u003e, \u003ci\u003eB\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e + 2\u003c/sub\u003e, ..., \u003ci\u003eB\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003em\u003c/i\u003e - 1\u003c/sub\u003e)\u003c/span\u003e. We can easily calculate them in O(n + m) time.\u003c/p\u003e\u003cp\u003eInitial configuration of \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ed\u003c/i\u003e\u003c/span\u003e:\u003c/p\u003e \u003cul\u003e   \u003cli\u003e\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ed\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003en\u003c/i\u003e, \u003ci\u003em\u003c/i\u003e\u003c/sub\u003e \u003d 0\u003c/span\u003e\u003c/li\u003e   \u003cli\u003e\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ed\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e, 0\u003c/sub\u003e \u003d \u003ci\u003ei\u003c/i\u003e·\u003ci\u003et\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ed\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e\u003c/li\u003e   \u003cli\u003e\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ed\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e0, \u003ci\u003ej\u003c/i\u003e\u003c/sub\u003e \u003d \u003ci\u003ej\u003c/i\u003e·\u003ci\u003et\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e\u003c/li\u003e \u003c/ul\u003e\u003cp\u003eHow we proceed to next step:\u003c/p\u003e \u003cul\u003e   \u003cli\u003eif \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eA\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e is equal to \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eB\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ej\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e then \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ed\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ej\u003c/i\u003e\u003c/sub\u003e \u003d \u003ci\u003ed\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e + 1, \u003ci\u003ej\u003c/i\u003e + 1\u003c/sub\u003e\u003c/span\u003e\u003c/li\u003e   \u003cli\u003eOtherwise \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ed\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ej\u003c/i\u003e\u003c/sub\u003e \u003d \u003ci\u003emin\u003c/i\u003e(\u003ci\u003eres\u003c/i\u003e1, \u003ci\u003eres\u003c/i\u003e2, \u003ci\u003eres\u003c/i\u003e3, \u003ci\u003eres\u003c/i\u003e4)\u003c/span\u003e\u003c/li\u003e   \u003cli\u003e\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eres\u003c/i\u003e1 \u003d \u003ci\u003ed\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e + 1, \u003ci\u003ej\u003c/i\u003e + 1\u003c/sub\u003e\u003c/span\u003e + \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003et\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003er\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e\u003c/li\u003e   \u003cli\u003e\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eres\u003c/i\u003e2 \u003d \u003ci\u003ed\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e + 1, \u003ci\u003ej\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e + \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003et\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ed\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e\u003c/li\u003e   \u003cli\u003e\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eres\u003c/i\u003e3 \u003d \u003ci\u003ed\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ej\u003c/i\u003e + 1\u003c/sub\u003e\u003c/span\u003e + \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003et\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e\u003c/li\u003e   \u003cli\u003e\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eres\u003c/i\u003e4 \u003d \u003c/span\u003e\u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/b7/7a/b77ae8b7c23fcf87a47203466b104b7ed193e3bb.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ed\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003epA\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e, \u003ci\u003eB\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ej\u003c/i\u003e\u003c/sub\u003e\u003c/sub\u003e + 1, \u003ci\u003epB\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ej\u003c/i\u003e, \u003ci\u003eA\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e\u003c/sub\u003e + 1\u003c/sub\u003e + (\u003ci\u003epA\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e, \u003ci\u003eB\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ej\u003c/i\u003e\u003c/sub\u003e\u003c/sub\u003e - \u003ci\u003ei\u003c/i\u003e - 1)·\u003ci\u003et\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ed\u003c/i\u003e\u003c/sub\u003e + (\u003ci\u003epB\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ej\u003c/i\u003e, \u003ci\u003eA\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e\u003c/sub\u003e - \u003ci\u003ej\u003c/i\u003e - 1)·\u003ci\u003et\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e + \u003ci\u003et\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ee\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e\u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/14/12/1412d41892064ca019a6c7bb4ec99296289780d6.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e if \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003epA\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e, \u003ci\u003eB\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ej\u003c/i\u003e\u003c/sub\u003e\u003c/sub\u003e\u003c/span\u003e and \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003epB\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ej\u003c/i\u003e, \u003ci\u003eA\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e\u003c/sub\u003e\u003c/span\u003e are not equal to \u003cspan class\u003d\"tex-span\"\u003e - 1\u003c/span\u003e\u003c/li\u003e   \u003cli\u003e\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eres\u003c/i\u003e4 \u003d \u003c/span\u003e\u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/b7/7a/b77ae8b7c23fcf87a47203466b104b7ed193e3bb.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e \u003cspan class\u003d\"tex-span\"\u003e∞\u003c/span\u003e \u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/14/12/1412d41892064ca019a6c7bb4ec99296289780d6.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e otherwise\u003c/li\u003e \u003c/ul\u003e\u003cp\u003e\u003ca href\u003d\"//codeforces.com/group/FjK2JP9LbD/contest/202908/problem/B\"\u003e\u003cstrong\u003eB. Lostborn\u003c/strong\u003e\u003c/a\u003e\u003c/p\u003e\u003cp\u003e\u003ca href\u003d\"//codeforces.com/problemset/problem/93/E\"\u003eOriginal problem\u003c/a\u003e is problem E from \u003ca href\u003d\"//codeforces.com/contest/93\"\u003eCodeforces Beta Round #76 (Div. 1 Only)\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eThis is a translation of \u003ca href\u003d\"//codeforces.com/blog/entry/2216\"\u003esolution in Russian\u003c/a\u003e written by the contest author \u003ca class\u003d\"rated-user user-orange\" href\u003d\"/profile/I_love_natalia\" title\u003d\"Master I_love_natalia\"\u003eI_love_natalia\u003c/a\u003e. \u003c/p\u003e\u003cp\u003eThe solution to this problem was designed one night while working on completely different contest :)\u003c/p\u003e\u003cp\u003eLet \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ea\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e1\u003ci\u003ea\u003c/i\u003e\u003c/sub\u003e\u003csub class\u003d\"lower-index\"\u003e2\u003c/sub\u003e...\u003ci\u003ea\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ek\u003c/i\u003e\u003c/sub\u003e\u003c/sub\u003e(\u003ci\u003eN\u003c/i\u003e)\u003c/span\u003e be the answer. Then, it is true that \u003c/p\u003e\u003cp\u003e\u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/18/34/18341e565c2553460c75b3f4959ce96b48d64b5e.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e\u003c/p\u003e\u003cp\u003eIt can be proven by \u003ca href\u003d\"http://en.wikipedia.org/wiki/Inclusion%E2%80%93exclusion_principle\"\u003einclusion-exclusion principle\u003c/a\u003e.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eProof:\u003c/strong\u003e\u003c/p\u003e\u003cp\u003eUsing \u003ca href\u003d\"http://en.wikipedia.org/wiki/Inclusion%E2%80%93exclusion_principle\"\u003einclusion-exclusion principle\u003c/a\u003e we can get the following formula:\u003c/p\u003e\u003cp\u003e\u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/5b/fb/5bfbd24944f6db8fd2fb83ed2cf134f7db003eae.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e\u003c/p\u003e\u003cp\u003eUsing the fact that\u003c/p\u003e\u003cp\u003e\u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/d9/7c/d97cc5add9fed86b2ef4770b00f4cb7edc814b7c.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e\u003cspan class\u003d\"tex-span\"\u003e⌋\u003c/span\u003e\u003c/p\u003e\u003cp\u003eWe can rearrange the equation to the following form\u003c/p\u003e\u003cp\u003e\u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/5f/61/5f613ef24b70086966f325582ccbd9017b4b5533.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e\u003c/p\u003e\u003cp\u003eWhich is simply\u003c/p\u003e\u003cp\u003e\u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/c1/73/c1739910ceacb6c7ea0ad2c45b5b68f8f352c1e9.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e\u003c/p\u003e\u003cp\u003eWhich can be easily extended to\u003c/p\u003e\u003cp\u003e\u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/18/34/18341e565c2553460c75b3f4959ce96b48d64b5e.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eSolution:\u003c/strong\u003e\u003c/p\u003e\u003cp\u003eBrute-force solution doesn\u0027t fit the time-limit. You can observe or know the fact that argument of the function will decrease dramatically, especially when initial set is in non-increasing order. Solution with optimal caching of function with small argument works 1 second in the worst case and was probably inevitable (from translator: I got 40 TL-s trying to brute-force).\u003c/p\u003e\u003cp\u003eI had this kind of solution and wanted to make N 20 times greater but it would be very painful to Java coders.\u003c/p\u003e\u003cp\u003eSuppose we want to write down calculations by the formula above on paper:\u003c/p\u003e\u003cp\u003e\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e139, 133, 3\u003c/sub\u003e(1390) \u003d \u003ci\u003ef\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e133, 3\u003c/sub\u003e(1390) - \u003ci\u003ef\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e133, 3\u003c/sub\u003e(10) \u003d \u003ci\u003ef\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e3\u003c/sub\u003e(1390) - \u003ci\u003ef\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e3\u003c/sub\u003e(10) - \u003ci\u003ef\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e3\u003c/sub\u003e(10) \u003d \u003ci\u003ef\u003c/i\u003e(1390) - \u003ci\u003ef\u003c/i\u003e(463) - \u003ci\u003ef\u003c/i\u003e(10) + \u003ci\u003ef\u003c/i\u003e(3) - \u003ci\u003ef\u003c/i\u003e(10) + \u003ci\u003ef\u003c/i\u003e(3) \u003d ...\u003c/span\u003e\u003c/p\u003e\u003cp\u003eStop! That is how our program makes calculations, not us. We do it like this:\u003c/p\u003e\u003cp\u003e\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e139, 133, 3\u003c/sub\u003e(1390) \u003d \u003ci\u003ef\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e133, 3\u003c/sub\u003e(1390) - \u003ci\u003ef\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e133, 3\u003c/sub\u003e(10) \u003d \u003ci\u003ef\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e3\u003c/sub\u003e(1390) - 2·\u003ci\u003ef\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e3\u003c/sub\u003e(10) \u003d \u003ci\u003ef\u003c/i\u003e(1390) - \u003ci\u003ef\u003c/i\u003e(463) - 2·\u003ci\u003ef\u003c/i\u003e(10) + 2·\u003ci\u003ef\u003c/i\u003e(3) \u003d ...\u003c/span\u003e\u003c/p\u003e\u003cp\u003eIt gives us an idea to store the condition of \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ej\u003c/i\u003e\u003csup class\u003d\"upper-index\"\u003e\u003ci\u003eth\u003c/i\u003e\u003c/sup\u003e\u003c/span\u003e step by two arrays \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eX\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ej\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e and \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eY\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ej\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e:\u003c/p\u003e\u003cp\u003e\u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/45/38/4538a7f60af9af28b83d216fc397bf365d75022a.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e\u003c/p\u003e\u003cp\u003eAnd at the step \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ej\u003c/i\u003e \u003d \u003ci\u003ek\u003c/i\u003e\u003c/span\u003e we have:\u003c/p\u003e\u003cp\u003e\u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/dc/9d/dc9db6ba2b11cbd203e4f943ae3eb81235a90f4c.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e\u003c/p\u003e\u003cp\u003eProceeding from step \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ej\u003c/i\u003e\u003c/span\u003e to step \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ej\u003c/i\u003e + 1\u003c/span\u003e is made by very first formula with merger of functions with same \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eY\u003c/i\u003e\u003c/span\u003e. At any moment arrays show be in non-increasing order, so actually we simply merge old step with a new one.\u003c/p\u003e\u003cp\u003eThe complexity of this is solution is \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eO\u003c/i\u003e(\u003ci\u003ek\u003c/i\u003e·\u003ci\u003emax\u003c/i\u003e(\u003ci\u003eI\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ej\u003c/i\u003e\u003c/sub\u003e))\u003c/span\u003e.\u003c/p\u003e\u003cp\u003eI affirm that \u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/35/f1/35f14538647ef92a48514b9fbeb63845008ba0b8.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eProof:\u003c/strong\u003e\u003c/p\u003e\u003cp\u003eAny number in \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eY\u003c/i\u003e\u003c/span\u003e can be represented in the form \u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/f6/56/f6560df7eeedb5394868dee2169f7ab78113fa30.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e. In its turn, \u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/f6/56/f6560df7eeedb5394868dee2169f7ab78113fa30.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e can be clearly defined by itself (from translator: hi, captain) or \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ea\u003c/i\u003e\u003c/span\u003e. Using the fact that \u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/f3/e0/f3e00759e6c9ca409017e51d30cd1f78c4396921.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e we get the inequality being proved.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eSolution:\u003c/strong\u003e\u003c/p\u003e\u003cp\u003eThus, the complexity is \u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/87/19/87191850a9abcbc92a295df2ed69d7da97ed499a.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e.\u003c/p\u003e\u003cp\u003eIt may seem to be a lot (heaviness of division operation and etc), but it is not if we make set non-increasing (simply sort it).\u003c/p\u003e\u003cp\u003eThe code with caching works 300 ms in the worst case and 2 seconds when \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eN\u003c/i\u003e \u003d 10\u003csup class\u003d\"upper-index\"\u003e5\u003c/sup\u003e, \u003ci\u003ek\u003c/i\u003e \u003d 100\u003c/span\u003e (i.e solves the problem when N is 100 times greater).\u003c/p\u003e\u003cp\u003e\u003ca href\u003d\"//codeforces.com/group/FjK2JP9LbD/contest/202908/problem/B\"\u003e\u003cstrong\u003eC. Lucky Numbers\u003c/strong\u003e\u003c/a\u003e\u003c/p\u003e\u003cp\u003e\u003ca href\u003d\"//codeforces.com/contest/95/problem/B\"\u003eOriginal problem\u003c/a\u003e is problem B from \u003ca href\u003d\"//codeforces.com/contest/95\"\u003eCodeforces Beta Round #77 (Div. 1 Only)\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eLet \u003c/p\u003e\u003cp\u003e\u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/c5/c2/c5c25e9f66cdffa5e2426a88b79754bf78496bc6.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e.\u003c/p\u003e\u003cp\u003e\u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/ee/48/ee48aa8572a4118ddb81710e8ecd60ff2bafc860.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e.\u003c/p\u003e\u003cp\u003e\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ek\u003c/i\u003e\u003c/span\u003e \u003d length of \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003en\u003c/i\u003e\u003c/span\u003e.\u003c/p\u003e\u003cp\u003eThen, we have 3 cases:\u003c/p\u003e \u003col\u003e   \u003cli\u003eif \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ek\u003c/i\u003e\u003c/span\u003e is odd, then \u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/a7/7d/a77d5882137f45f221a05cc6360309ed4a216ea5.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e is the answer.\u003c/li\u003e   \u003cli\u003eelse if \u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/5c/ec/5cec621a8cb099bab2dc8552c67dc1bd29a1c847.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e, then \u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/14/fd/14fd4625319c5e131c4bef5c9a72a4d88efd89ba.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e is the answer.\u003c/li\u003e   \u003cli\u003eelse if \u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/1d/a6/1da639fd4e8e76a2ccaf37d2b6ca590889521e16.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e, then \u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/4b/86/4b8626867abe377308264a14a118d8953b79303e.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e is the answer.\u003c/li\u003e   \u003cli\u003eelse use \u0026quot;greedy\u0026quot; algorithm.\u003c/li\u003e \u003c/ol\u003e\u003cp\u003e\u003cstrong\u003e\u0026quot;Greedy\u0026quot; algorithm:\u003c/strong\u003e\u003c/p\u003e \u003cpre\u003e\u003ccode\u003efor ($i \u003d 0; $i \u0026lt; n; ++$i)\n    if (can put \u00274\u0027 on $i-th position)\n        put \u00274\u0027\n        $last \u003d $i\n    else if (can put \u00277\u0027 on $i-th position)\n        put \u00277\u0027\n    else\n        put \u00277\u0027 on $last\n        for ($j \u003d $last + 1; $j \u0026lt; n; ++$j)\n            if (can put \u00274\u0027 on $i-th position)\n                put \u00274\u0027\n            else\n                put \u00277\u0027\n        break\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":[]}}