{"status":"OK","result":{"originalLocale":"en","allowViewHistory":true,"creationTimeSeconds":1506998841,"rating":28,"authorHandle":"ekzhang","modificationTimeSeconds":1506998857,"id":54915,"title":"\u003cp\u003eStrange behavior of doubles in C++, Possible UB?\u003c/p\u003e","locale":"en","content":"\u003cdiv class\u003d\"ttypography\"\u003e\u003cp\u003eI recently submitted twice to problem 865C/866C (same problem), \u003ca href\u003d\"//codeforces.com/contest/866/problem/C\"\u003eGotta Go Fast\u003c/a\u003e. \u003c/p\u003e\u003cp\u003e\u003ca href\u003d\"//codeforces.com/contest/866/submission/30954904\"\u003ehttp://codeforces.com/contest/866/submission/30954904\u003c/a\u003e\u003c/p\u003e\u003cp\u003e\u003ca href\u003d\"//codeforces.com/contest/865/submission/30956252\"\u003ehttp://codeforces.com/contest/865/submission/30956252\u003c/a\u003e\u003c/p\u003e\u003cp\u003eThe first submission got wrong answer on test 1 on Codeforces. But I tested the solution both locally and on Ideone, and the answer was correct.\u003c/p\u003e\u003cp\u003eIn the second submission my only change was adding the following one \u0026quot;useless\u0026quot; line of code to a for loop:\u003c/p\u003e \u003cpre\u003e\u003ccode\u003eif (hi \u0026gt; 2 \u0026amp;\u0026amp; hi \u0026lt; 1) cout \u0026lt;\u0026lt; \u0026quot;this should never run\u0026quot; \u0026lt;\u0026lt; endl;\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eIt got AC.\u003c/p\u003e\u003cp\u003eMy question is, \u003cstrong\u003ewhy is this happening\u003c/strong\u003e? I\u0027ve tried debugging it locally and looking at the assembly, but there are no bugs when it runs on my local machine or on Ideone; it\u0027s only acting strangely on Codeforces. I\u0027ve been staring at this code for many hours now thinking it might be undefined behavior, but I\u0027ve tried many slightly different submissions (with long double, without the call to min) that work just fine without the extra useless if statement.\u003c/p\u003e\u003cp\u003eTl;dr: I am utterly confused and would greatly appreciate if you could help me find where my UB is, or if there\u0027s some other problem with floating-point precision :-)\u003c/p\u003e\u003cp\u003eThanks!\u003c/p\u003e\u003c/div\u003e","tags":[]}}