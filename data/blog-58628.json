{"status":"OK","result":{"originalLocale":"ru","allowViewHistory":true,"creationTimeSeconds":1522340345,"rating":0,"authorHandle":"gaporf","modificationTimeSeconds":1522424348,"id":58628,"title":"\u003cp\u003eОсновы бинпоиска.\u003c/p\u003e","locale":"ru","content":"\u003cdiv class\u003d\"ttypography\"\u003e\u003cp\u003eДля того, чтобы лучше представить суть бинпоиска, представим себе игру \u0026quot;Угадай число\u0026quot;. Правила её просты: первый игрок загадывает целое число на промежутке от \u003cspan class\u003d\"tex-span\"\u003e1\u003c/span\u003e до \u003cspan class\u003d\"tex-span\"\u003e10\u003csup class\u003d\"upper-index\"\u003e9\u003c/sup\u003e\u003c/span\u003e, а второй игрок пытается его угадать. Пусть первый игрок загадал число \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ey\u003c/i\u003e\u003c/span\u003e. На каждом ходу второй игрок говорит целое число \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e, и второй игрок отвечает \u0026quot;ДА\u0026quot;, если \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e ≤ \u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ey\u003c/i\u003e\u003c/span\u003e, в противном случае отвечает \u0026quot;НЕТ\u0026quot;. Давайте попытаемся определить, за какое минимальное количество ходов второй игрок гарантированно отгадает любое число от \u003cspan class\u003d\"tex-span\"\u003e1\u003c/span\u003e до \u003cspan class\u003d\"tex-span\"\u003e10\u003csup class\u003d\"upper-index\"\u003e9\u003c/sup\u003e\u003c/span\u003e. Первое, что приходит на ум — давайте второй игрок будет просто перебирать число от \u003cspan class\u003d\"tex-span\"\u003e1\u003c/span\u003e до \u003cspan class\u003d\"tex-span\"\u003e10\u003csup class\u003d\"upper-index\"\u003e9\u003c/sup\u003e\u003c/span\u003e. Как только первый игрок ответит \u0026quot;НЕТ\u0026quot;, то это значит, что первый игрок загадал число \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e - 1\u003c/span\u003e. Естественно, что если первый игрок загадает \u003cspan class\u003d\"tex-span\"\u003e10\u003csup class\u003d\"upper-index\"\u003e9\u003c/sup\u003e\u003c/span\u003e, то понадобится \u003cspan class\u003d\"tex-span\"\u003e1000000000\u003c/span\u003e ходов, что очень много. Тогда можно заметить следующую вещь: если второй игрок спросит число, равное \u003cspan class\u003d\"tex-span\"\u003e5 * 10\u003csup class\u003d\"upper-index\"\u003e8\u003c/sup\u003e\u003c/span\u003e, то при любом ответе можно сразу отмести половину из возможных чисел(если первый игрок ответ \u0026quot;ДА\u0026quot;, то значит, что \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ey\u003c/i\u003e\u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e ≥ \u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e5 * 10\u003csup class\u003d\"upper-index\"\u003e8\u003c/sup\u003e\u003c/span\u003e, иначе \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ey\u003c/i\u003e\u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e \u0026lt; \u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e5 * 10\u003csup class\u003d\"upper-index\"\u003e8\u003c/sup\u003e\u003c/span\u003e). Если первый игрок ответ \u0026quot;ДА\u0026quot;, то есть смысл спросить число \u003cspan class\u003d\"tex-span\"\u003e7.5 * 10\u003csup class\u003d\"upper-index\"\u003e8\u003c/sup\u003e\u003c/span\u003e, иначе надо спросить число \u003cspan class\u003d\"tex-span\"\u003e2.5 * 10\u003csup class\u003d\"upper-index\"\u003e8\u003c/sup\u003e\u003c/span\u003e. Легко заметить, что за \u003cspan class\u003d\"tex-span\"\u003e2\u003c/span\u003e хода уже можно отмести \u003cspan class\u003d\"tex-span\"\u003e1 / 4\u003c/span\u003e всевозможных чисел, а за \u003cspan class\u003d\"tex-span\"\u003e3\u003c/span\u003e — \u003cspan class\u003d\"tex-span\"\u003e1 / 8\u003c/span\u003e. Т.е. если бы первый игрок загадал бы число на промежутке от \u003cspan class\u003d\"tex-span\"\u003e1\u003c/span\u003e до \u003cspan class\u003d\"tex-span\"\u003e8\u003c/span\u003e, то за 3 хода можно гарантированно отгадать любое число из этого промежутка. Это наводит на мысль, что при такой стратегии за \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003en\u003c/i\u003e\u003c/span\u003e ходов уже можно гарантированно отгадать любое число на промежутке от \u003cspan class\u003d\"tex-span\"\u003e1\u003c/span\u003e до \u003cspan class\u003d\"tex-span\"\u003e2\u003csup class\u003d\"upper-index\"\u003e\u003ci\u003en\u003c/i\u003e\u003c/sup\u003e\u003c/span\u003e. Поскольку \u003cspan class\u003d\"tex-span\"\u003e10\u003csup class\u003d\"upper-index\"\u003e9\u003c/sup\u003e\u003c/span\u003e не является степенью двойки, то за \u003cspan class\u003d\"tex-span\"\u003e29\u003c/span\u003e ходов мы точно не сможем угадать все числа на промежутке от \u003cspan class\u003d\"tex-span\"\u003e1\u003c/span\u003e до \u003cspan class\u003d\"tex-span\"\u003e10\u003csup class\u003d\"upper-index\"\u003e9\u003c/sup\u003e\u003c/span\u003e, зато за \u003cspan class\u003d\"tex-span\"\u003e30\u003c/span\u003e ходов сможем сделать это легко. \u003c/p\u003e\u003cp\u003eТаким образом, мы подошли к главной сути бинпоиска, а именно: для этой игры нам нужно найти такое максимальное \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e, что \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e ≤ \u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ey\u003c/i\u003e\u003c/span\u003e. Очевидно, что если \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e ≤ \u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ey\u003c/i\u003e\u003c/span\u003e, то и \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e - 1\u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e ≤ \u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ey\u003c/i\u003e\u003c/span\u003e. Пусть мы заведем две переменные \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eleft\u003c/i\u003e \u003d 1\u003c/span\u003e и \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eright\u003c/i\u003e\u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e \u003d \u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e10\u003csup class\u003d\"upper-index\"\u003e9\u003c/sup\u003e\u003c/span\u003e, которые обозначают левую и правую границу числа \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e, которую мы точно знаем(т.е. выполняется условие 1 \u003cspan class\u003d\"tex-span\"\u003e ≤ \u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e ≤ \u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003er\u003c/i\u003e\u003c/span\u003e). Мы сможем угадать \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e только в том случае, если \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eleft\u003c/i\u003e \u003d \u003ci\u003eright\u003c/i\u003e\u003c/span\u003e. Давайте возьмём такое число \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003emid\u003c/i\u003e\u003c/span\u003e, что если \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003emid\u003c/i\u003e\u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e ≤ \u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ey\u003c/i\u003e\u003c/span\u003e, то присвоим \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eleft\u003c/i\u003e\u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e \u003d \u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003emid\u003c/i\u003e\u003c/span\u003e, иначе присвоим \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eright\u003c/i\u003e\u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e \u003d \u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003emid\u003c/i\u003e - 1\u003c/span\u003e (т.е. мы гарантированно утверждаем, что \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eleft\u003c/i\u003e\u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e ≥ \u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003emid\u003c/i\u003e\u003c/span\u003e или \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eright\u003c/i\u003e\u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e \u0026lt; \u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003emid\u003c/i\u003e\u003c/span\u003e). Поскольку мы должны избавиться от половины чисел на каждом ходу, то следует брать \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003emid\u003c/i\u003e\u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e \u003d \u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003eleft\u003c/i\u003e + \u003ci\u003eright\u003c/i\u003e)\u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e / \u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e2\u003c/span\u003e. Но т.к. при работе с целыми числами у нас происходит округление вниз, то если \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eleft\u003c/i\u003e\u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e \u003d \u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e1\u003c/span\u003e, а \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eright\u003c/i\u003e\u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e \u003d \u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e2\u003c/span\u003e, то у нас возможна ситуация, что цикл будет продолжаться бесконечное число раз. Поэтому в данном случае для избежания бесконечного цикла следует \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003emid\u003c/i\u003e\u003c/span\u003e присваивать значение \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003eleft\u003c/i\u003e + \u003ci\u003eright\u003c/i\u003e) / 2\u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e + \u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003eleft\u003c/i\u003e + \u003ci\u003eright\u003c/i\u003e)\u003c/span\u003e % \u003cspan class\u003d\"tex-span\"\u003e2\u003c/span\u003e.\u003c/p\u003e\u003cp\u003eНо давайте немного поменяем правила игры. Пусть первый игрок отвечает \u0026quot;ДА\u0026quot;, если x \u003cspan class\u003d\"tex-span\"\u003e ≥ \u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ey\u003c/i\u003e\u003c/span\u003e, в противном случае от ответит \u0026quot;НЕТ\u0026quot;. К сожалению, в данном случае первый вариант бинпоиска не работает, потому что если \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e ≥ \u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ey\u003c/i\u003e\u003c/span\u003e, то не факт, что \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e - 1\u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e ≥ \u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ey\u003c/i\u003e\u003c/span\u003e. Зато легко заметить, что если \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e ≥ \u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ey\u003c/i\u003e\u003c/span\u003e, то и \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e + 1\u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e ≥ \u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ey\u003c/i\u003e\u003c/span\u003e. Это наводит нас на мысль, что давайте возьмём \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003emid\u003c/i\u003e \u003d (\u003ci\u003eleft\u003c/i\u003e + \u003ci\u003eright\u003c/i\u003e) / 2\u003c/span\u003e, и если \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003emid\u003c/i\u003e\u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e ≥ \u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ey\u003c/i\u003e\u003c/span\u003e, то присвоим \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eright\u003c/i\u003e \u003d \u003ci\u003emid\u003c/i\u003e\u003c/span\u003e, иначе \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eleft\u003c/i\u003e \u003d \u003ci\u003emid\u003c/i\u003e + 1\u003c/span\u003e. В данном случае нам не нужно прибавлять остаток от деление на 2, т.к. при \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eleft\u003c/i\u003e \u003d 1\u003c/span\u003e и \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eright\u003c/i\u003e \u003d 2\u003c/span\u003e при любом \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ey\u003c/i\u003e\u003c/span\u003e у нас будет выполнена всего одна операция.\u003c/p\u003e\u003cp\u003eЕсли будут вопросы, то вы можете их задать в комментариях или в личных сообщениях. Для того, чтобы потренироваться. рекомендую порешать \u003ca href\u003d\"//codeforces.com/group/m4pzPe16rE/contest/222068\"\u003eэтот контест\u003c/a\u003e.\u003c/p\u003e\u003c/div\u003e","tags":[]}}