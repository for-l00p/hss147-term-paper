{"status":"OK","result":{"originalLocale":"ru","allowViewHistory":false,"creationTimeSeconds":1483524053,"rating":5,"authorHandle":"kefaa","modificationTimeSeconds":1483556259,"id":49562,"title":"\u003cp\u003e04.01.2017 Editorial\u003c/p\u003e","locale":"ru","content":"\u003cdiv class\u003d\"ttypography\"\u003e\u003cp\u003eВсем спасибо за участие! Пишите в комменты, если что-то непонятно.\u003c/p\u003e\u003ch2\u003e\u003ca href\u003d\"//codeforces.com/group/6bId9YqR5t/contest/211000/problem/B\"\u003e211000B — Baseball\u003c/a\u003e\u003c/h2\u003e\u003cp\u003e\u003ca href\u003d\"http://dl.gsu.by/task.jsp?cid\u003d19\u0026amp;nid\u003d1239294\"\u003eUSACO 2013 December Bronze BASEBALL\u003c/a\u003e\u003c/p\u003e\u003cp\u003e\u003ca href\u003d\"http://ideone.com/4sWqoE\"\u003eКод на первую группу\u003c/a\u003e\u003c/p\u003e\u003cp\u003e\u003ca href\u003d\"http://ideone.com/JUqs0M\"\u003eКод на вторую группу\u003c/a\u003e\u003c/p\u003e\u003cp\u003eСперва необходимо отсортировать все точке в порядке возрастания координат.\u003c/p\u003e\u003cp\u003eВ первой группе можно было перебрать точки, которые займут Илья, Даша и Вася тремя вложенными циклами и проверить, выполняются ли требуемые условия. Асимптотика \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eO\u003c/i\u003e(\u003ci\u003eN\u003c/i\u003e\u003csup class\u003d\"upper-index\"\u003e3\u003c/sup\u003e)\u003c/span\u003e\u003c/p\u003e\u003cp\u003eВо второй группе переберем двумя циклами, какие точки займут Илья и Даша. Пусть Илья стоит в точке \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ea\u003c/i\u003e\u003c/span\u003e, а Даша в точке \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eb\u003c/i\u003e\u003c/span\u003e и пусть расстояние между ними \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ed\u003c/i\u003e \u003d \u003ci\u003eb\u003c/i\u003e - \u003ci\u003ea\u003c/i\u003e\u003c/span\u003e. В таком случае Вася сможет занять только такие точки \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ec\u003c/i\u003e\u003c/span\u003e, для которых верно \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eb\u003c/i\u003e + \u003ci\u003ed\u003c/i\u003e ≤ \u003ci\u003ec\u003c/i\u003e ≤ \u003ci\u003eb\u003c/i\u003e + 2\u003ci\u003ed\u003c/i\u003e\u003c/span\u003e. Таким образом, задача сводится к нахождению количества чисел в массиве, которые не больше \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003el\u003c/i\u003e\u003c/span\u003e (в нашем случае \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003el\u003c/i\u003e \u003d \u003ci\u003eb\u003c/i\u003e + \u003ci\u003ed\u003c/i\u003e\u003c/span\u003e) и не меньше \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003er\u003c/i\u003e\u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003er\u003c/i\u003e \u003d \u003ci\u003eb\u003c/i\u003e + 2\u003ci\u003ed\u003c/i\u003e)\u003c/span\u003e. Это можно сделать бинпоисками (найти количество чисел, не больших \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003er\u003c/i\u003e\u003c/span\u003e и отнять количество чисел, меньших \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003el\u003c/i\u003e\u003c/span\u003e) за \u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/66/6c/666cc239bd9595b8818555e063d8d8b69ad0cda0.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e или двумя указателями (суммарно за \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eO\u003c/i\u003e(\u003ci\u003eN\u003c/i\u003e)\u003c/span\u003e). Асимптотика \u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/98/94/98942023ab92b8fb3ac7c8d327dc590367dc15f8.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e или \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eO\u003c/i\u003e(\u003ci\u003eN\u003c/i\u003e\u003csup class\u003d\"upper-index\"\u003e2\u003c/sup\u003e)\u003c/span\u003e \u003c/p\u003e\u003ch2\u003e\u003ca href\u003d\"//codeforces.com/group/6bId9YqR5t/contest/211000/problem/D\"\u003e211000D — Mixtures\u003c/a\u003e\u003c/h2\u003e\u003cp\u003e\u003ca href\u003d\"http://www.spoj.com/problems/MIXTURES/\"\u003eSPOJ MIXTURES\u003c/a\u003e\u003c/p\u003e\u003cp\u003e\u003ca href\u003d\"http://ideone.com/spXsQh\"\u003eКод\u003c/a\u003e\u003c/p\u003e\u003cp\u003eВ первой группе можно написать рекурсивный перебор всех возможных последовательностей действий Владика и выбрать лучшую. Асимптотика выходит порядка \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eO\u003c/i\u003e(\u003ci\u003eN\u003c/i\u003e!)\u003c/span\u003e.\u003c/p\u003e\u003cp\u003eВо второй группе давайте считать \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003edp\u003c/i\u003e[\u003ci\u003el\u003c/i\u003e][\u003ci\u003er\u003c/i\u003e]\u003c/span\u003e — минимальное количество дыма, если мы смешаем все химикаты, принадлежащие отрезку \u003cspan class\u003d\"tex-span\"\u003e[\u003ci\u003el\u003c/i\u003e;\u003ci\u003er\u003c/i\u003e]\u003c/span\u003e. \u003c/p\u003e\u003cp\u003eБаза: \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003edp\u003c/i\u003e[\u003ci\u003el\u003c/i\u003e][\u003ci\u003el\u003c/i\u003e] \u003d 0, \u003ci\u003edp\u003c/i\u003e[\u003ci\u003el\u003c/i\u003e][\u003ci\u003el\u003c/i\u003e + 1] \u003d \u003ci\u003ea\u003c/i\u003e[\u003ci\u003el\u003c/i\u003e] * \u003ci\u003ea\u003c/i\u003e[\u003ci\u003el\u003c/i\u003e + 1]\u003c/span\u003e для всех \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003el\u003c/i\u003e\u003c/span\u003e. Ответ на задачу, очевидно, \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003edp\u003c/i\u003e[1][\u003ci\u003en\u003c/i\u003e]\u003c/span\u003e. \u003c/p\u003e\u003cp\u003eДавайте поймем, как посчитать ответ для некоторого отрезка \u003cspan class\u003d\"tex-span\"\u003e[\u003ci\u003el\u003c/i\u003e;\u003ci\u003er\u003c/i\u003e]\u003c/span\u003e. Если после текущего смешивания двух химикатов случилось так, что мы смешали все химикаты из отрезка \u003cspan class\u003d\"tex-span\"\u003e[\u003ci\u003el\u003c/i\u003e;\u003ci\u003er\u003c/i\u003e]\u003c/span\u003e, то это означает, что до этого мы смешали в один каких-то \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003em\u003c/i\u003e\u003c/span\u003e первых химикатов этого отрезка (скажем, из отрезка \u003cspan class\u003d\"tex-span\"\u003e[\u003ci\u003el\u003c/i\u003e..\u003ci\u003ek\u003c/i\u003e]\u003c/span\u003e, \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ek\u003c/i\u003e \u003d \u003ci\u003el\u003c/i\u003e + \u003ci\u003em\u003c/i\u003e - 1\u003c/span\u003e), и \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003er\u003c/i\u003e - \u003ci\u003el\u003c/i\u003e + 1) - \u003ci\u003em\u003c/i\u003e\u003c/span\u003e последних (из отрезка \u003cspan class\u003d\"tex-span\"\u003e[\u003ci\u003ek\u003c/i\u003e + 1;\u003ci\u003er\u003c/i\u003e])\u003c/span\u003e. Поэтому, чтобы вычислить \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003edp\u003c/i\u003e[\u003ci\u003el\u003c/i\u003e][\u003ci\u003er\u003c/i\u003e]\u003c/span\u003e можно перебрать \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ek\u003c/i\u003e\u003c/span\u003e и обновить текущее состояние значением \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003edp\u003c/i\u003e[\u003ci\u003el\u003c/i\u003e][\u003ci\u003ek\u003c/i\u003e] + \u003ci\u003edp\u003c/i\u003e[\u003ci\u003ek\u003c/i\u003e + 1][\u003ci\u003er\u003c/i\u003e] + \u003ci\u003esum\u003c/i\u003e(\u003ci\u003el\u003c/i\u003e..\u003ci\u003ek\u003c/i\u003e)·\u003ci\u003esum\u003c/i\u003e(\u003ci\u003ek\u003c/i\u003e + 1..\u003ci\u003er\u003c/i\u003e)\u003c/span\u003e, где \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003esum\u003c/i\u003e(\u003ci\u003ea\u003c/i\u003e..\u003ci\u003eb\u003c/i\u003e)\u003c/span\u003e — цвет химиката, полученного смешиванием всех химикатов из отрезка \u003cspan class\u003d\"tex-span\"\u003e[\u003ci\u003ea\u003c/i\u003e, \u003ci\u003eb\u003c/i\u003e]\u003c/span\u003e, \u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/ad/9e/ad9e7cef143b71100758326c5318135106ea4481.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e.\u003c/p\u003e\u003cp\u003eАсимптотика решения \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eO\u003c/i\u003e(\u003ci\u003eN\u003c/i\u003e\u003csup class\u003d\"upper-index\"\u003e3\u003c/sup\u003e)\u003c/span\u003e.\u003c/p\u003e\u003ch2\u003e\u003ca href\u003d\"//codeforces.com/group/6bId9YqR5t/contest/211000/problem/F\"\u003e211000F — FarmCraft\u003c/a\u003e\u003c/h2\u003e\u003cp\u003e\u003ca href\u003d\"http://main.edu.pl/en/archive/oi/21/far\"\u003eXXI POI FarmCraft\u003c/a\u003e\u003c/p\u003e\u003cp\u003e\u003ca href\u003d\"http://ideone.com/RStXt6\"\u003eКод\u003c/a\u003e\u003c/p\u003e\u003cp\u003eНе знаю, что можно написать только на первую группу, но в оригинальной задаче решение такой подгруппы оценивалось в 40% баллов :)\u003c/p\u003e\u003cp\u003eДавайте обозначим за \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ebest\u003c/i\u003e[\u003ci\u003ev\u003c/i\u003e]\u003c/span\u003e ответ на задачу, если мы рассматриваем только поддерево с корнем в \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ev\u003c/i\u003e\u003c/span\u003e. Ответ на задачу это \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003emax\u003c/i\u003e(\u003ci\u003ebest\u003c/i\u003e[1], \u003ci\u003ec\u003c/i\u003e[1] + 2·(\u003ci\u003en\u003c/i\u003e - 1))\u003c/span\u003e (потому что у себя Эндрю запускает компьютер последним).\u003c/p\u003e\u003cp\u003eПусть мы хотим посчитать \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ebest\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ev\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e для некоторой вершины v. Давайте сперва рекурсивно посчитаем ответы для сыновей.\u003c/p\u003e\u003cp\u003eПонятно, что если мы зафиксируем некоторый порядок \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ec\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e1\u003c/sub\u003e, \u003ci\u003ec\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e2\u003c/sub\u003e, ..., \u003ci\u003ec\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ek\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e посещения детей, то \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ebest\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ev\u003c/i\u003e\u003c/sub\u003e \u003d \u003ci\u003emax\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e1 ≤ \u003ci\u003ei\u003c/i\u003e ≤ \u003ci\u003ek\u003c/i\u003e\u003c/sub\u003e{1 + \u003ci\u003ebest\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ec\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e\u003c/sub\u003e + 2·\u003ci\u003esum\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e}\u003c/span\u003e, где \u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/7c/6b/7c6b17fe3c374c02e9cdad4f3addf5f595da8e04.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e, \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003esize\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e — размер поддерева вершины \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e. Если на словах, то мы сначала зайдем в первого ребенка, обойдем все его поддерево за \u003cspan class\u003d\"tex-span\"\u003e2 * \u003ci\u003esize\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ec\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e1\u003c/sub\u003e\u003c/sub\u003e\u003c/span\u003e минут, затем за \u003cspan class\u003d\"tex-span\"\u003e1\u003c/span\u003e минуту спустимся в поддерево второго сына \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ec\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e2\u003c/sub\u003e\u003c/span\u003e. Тогда все компьютеры в поддереве второго ребенка будут установлены к моменту времени \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ebest\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ec\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e2\u003c/sub\u003e\u003c/sub\u003e + 2 * \u003ci\u003esize\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ec\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e1\u003c/sub\u003e\u003c/sub\u003e + 1\u003c/span\u003e. Затем мы обойдем все поддерево второго сына, зайдем в третьего и т.д.\u003c/p\u003e\u003cp\u003eЗначит, наша задача сводится к нахождения оптимального порядка посещения детей. Задачи, в которых необходимо найти оптимальный порядок выполнения каких-либо действий, очень часто можно решить, написав сортировку порядка действий по компаратору, который по двум действиям будет сравнивать, что выгодно сделать раньше: первое действие перед вторым, или второе перед первым (то есть как будто мы решаем задачу, когда количество действий равно 2). То есть если обозначить за \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e(\u003ci\u003ex\u003c/i\u003e, \u003ci\u003ey\u003c/i\u003e)\u003c/span\u003e оптимальность выполнения действия \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e, и действия \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ey\u003c/i\u003e\u003c/span\u003e после него, то компаратор должен возвращать \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003etrue\u003c/i\u003e\u003c/span\u003e, если \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e(\u003ci\u003ex\u003c/i\u003e, \u003ci\u003ey\u003c/i\u003e) \u0026gt; \u003ci\u003ef\u003c/i\u003e(\u003ci\u003ey\u003c/i\u003e, \u003ci\u003ex\u003c/i\u003e)\u003c/span\u003e. Однако с таким компаратором нужно быть осторожным, он работает всегда, когда функция \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e\u003c/span\u003e транзитивна, то есть если для любых \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ea\u003c/i\u003e\u003c/span\u003e, \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eb\u003c/i\u003e\u003c/span\u003e и \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ec\u003c/i\u003e\u003c/span\u003e верно, что \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e(\u003ci\u003ea\u003c/i\u003e, \u003ci\u003eb\u003c/i\u003e) \u0026lt; \u003ci\u003ef\u003c/i\u003e(\u003ci\u003eb\u003c/i\u003e, \u003ci\u003ea\u003c/i\u003e)\u003c/span\u003e и \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e(\u003ci\u003eb\u003c/i\u003e, \u003ci\u003ec\u003c/i\u003e) \u0026lt; \u003ci\u003ef\u003c/i\u003e(\u003ci\u003ec\u003c/i\u003e, \u003ci\u003eb\u003c/i\u003e)\u003c/span\u003e, то должно выполняться \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e(\u003ci\u003ea\u003c/i\u003e, \u003ci\u003ec\u003c/i\u003e) \u0026lt; \u003ci\u003ef\u003c/i\u003e(\u003ci\u003ec\u003c/i\u003e, \u003ci\u003ea\u003c/i\u003e)\u003c/span\u003e. В противном случае решение заведомо неверное.\u003c/p\u003e\u003cp\u003eДавайте поймем, какой компаратор будет в нашем случае. Пусть у нас есть два ребенка \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e и \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ey\u003c/i\u003e\u003c/span\u003e. Если мы сначала зайдем в \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e, а потом в \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ey\u003c/i\u003e\u003c/span\u003e, то нам понадобится \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003emax\u003c/i\u003e(\u003ci\u003ebest\u003c/i\u003e[\u003ci\u003ex\u003c/i\u003e], \u003ci\u003ebest\u003c/i\u003e[\u003ci\u003ey\u003c/i\u003e] + 1 + 2·\u003ci\u003esize\u003c/i\u003e[\u003ci\u003ex\u003c/i\u003e])\u003c/span\u003e минут и \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003emax\u003c/i\u003e(\u003ci\u003ebest\u003c/i\u003e[\u003ci\u003ey\u003c/i\u003e], \u003ci\u003ebest\u003c/i\u003e[\u003ci\u003ex\u003c/i\u003e] + 1 + 2·\u003ci\u003esize\u003c/i\u003e[\u003ci\u003ey\u003c/i\u003e])\u003c/span\u003e минут наоборот. Компаратор должен возвращать \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003etrue\u003c/i\u003e\u003c/span\u003e, если первое время меньше второго.\u003c/p\u003e\u003cp\u003eАсимптотика \u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/e9/82/e9824f6612c4b83669d669fe6fd4d9e558305dfd.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e.\u003c/p\u003e\u003ch2\u003e\u003ca href\u003d\"//codeforces.com/group/6bId9YqR5t/contest/211000/problem/H\"\u003e211000H — Shuffle\u003c/a\u003e\u003c/h2\u003e\u003cp\u003eG, H — эта задача была на сборах к IOI 2015, ссылки у меня нет :)\u003c/p\u003e\u003cp\u003e\u003ca href\u003d\"http://ideone.com/ih0Tq6\"\u003eКод\u003c/a\u003e\u003c/p\u003e\u003cp\u003eВ первой группе можно заметить, что всего различных перестановок не больше \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eN\u003c/i\u003e!\u003c/span\u003e, а различных пар \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003ex\u003c/i\u003e, \u003ci\u003ey\u003c/i\u003e)\u003c/span\u003e не больше \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eN\u003c/i\u003e\u003csup class\u003d\"upper-index\"\u003e2\u003c/sup\u003e\u003c/span\u003e, то всего различных состояний не больше \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eN\u003c/i\u003e!·\u003ci\u003eN\u003c/i\u003e\u003csup class\u003d\"upper-index\"\u003e2\u003c/sup\u003e\u003c/span\u003e (на самом деле меньше). Поэтому можно найти цикл, и уменьшить \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ek\u003c/i\u003e\u003c/span\u003e до \u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/ea/42/ea423e75cb52f1ff22a36d352155c2760a39f0f6.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e.\u003c/p\u003e\u003cp\u003eДля второй группы нужно воспользоваться уже известным фактом, что каждая пара \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003ex\u003c/i\u003e, \u003ci\u003ey\u003c/i\u003e)\u003c/span\u003e из функции повторится не позже чем через \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eN\u003c/i\u003e\u003csup class\u003d\"upper-index\"\u003e2\u003c/sup\u003e\u003c/span\u003e операций. Опять же, давайте найдем цикл, пусть его длина равна \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003elen\u003c/i\u003e\u003c/span\u003e. Пусть этому циклу соответствует некоторая перестановка \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eQ\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e1\u003c/sub\u003e, \u003ci\u003eQ\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e2\u003c/sub\u003e, ...\u003ci\u003eQ\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003en\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e (ее мы получили, выполнив шаффл перестановки \u003cspan class\u003d\"tex-span\"\u003e1 2 ... \u003ci\u003en\u003c/i\u003e\u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003elen\u003c/i\u003e\u003c/span\u003e раз). В таком случае если до попадания в цикл мы имели некоторую перестановку \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eP\u003c/i\u003e\u003c/span\u003e, то после выхода из цикла получится перестановка, равная произведению перестановки \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eP\u003c/i\u003e\u003c/span\u003e на \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eQ\u003c/i\u003e\u003c/span\u003e. Под результатом перемножения перестановок \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ea\u003c/i\u003e\u003c/span\u003e и \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eb\u003c/i\u003e\u003c/span\u003e понимается перестановка \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ec\u003c/i\u003e\u003c/span\u003e, для которой \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ec\u003c/i\u003e[\u003ci\u003ei\u003c/i\u003e] \u003d \u003ci\u003ea\u003c/i\u003e[\u003ci\u003eb\u003c/i\u003e[\u003ci\u003ei\u003c/i\u003e]]\u003c/span\u003e. Очевидно, что если до попадания в цикл нам осталось выполнить \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e шаффлов, то их применение будет эквивалентно применению перестановки \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eQ\u003c/i\u003e\u003c/span\u003e к \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eP\u003c/i\u003e\u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e / \u003ci\u003elen\u003c/i\u003e\u003c/span\u003e раз. После этого останется выполнить шаффл к полученной перестановке \u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/12/3c/123c2d36b2b78a011bd883e0900f3dd8be075598.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e раз. Так как \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003elen\u003c/i\u003e \u003d \u003ci\u003eO\u003c/i\u003e(\u003ci\u003eN\u003c/i\u003e\u003csup class\u003d\"upper-index\"\u003e2\u003c/sup\u003e)\u003c/span\u003e, то сделать эту часть решения можно влоб. \u003c/p\u003e\u003cp\u003eТеперь остается понять, как применить перестановку \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eQ\u003c/i\u003e\u003c/span\u003e к \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eP\u003c/i\u003e\u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ek\u003c/i\u003e \u003d \u003ci\u003ex\u003c/i\u003e / \u003ci\u003elen\u003c/i\u003e\u003c/span\u003e раз. Перестановки обладают ассоциативностью, то есть если \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ea\u003c/i\u003e·\u003ci\u003eb\u003c/i\u003e\u003c/span\u003e — применение перестановки \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eb\u003c/i\u003e\u003c/span\u003e к \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ea\u003c/i\u003e\u003c/span\u003e(то есть умножение \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ea\u003c/i\u003e\u003c/span\u003e на \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eb\u003c/i\u003e\u003c/span\u003e), то \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003ea\u003c/i\u003e·\u003ci\u003eb\u003c/i\u003e)·\u003ci\u003ec\u003c/i\u003e \u003d \u003ci\u003ea\u003c/i\u003e·(\u003ci\u003eb\u003c/i\u003e·\u003ci\u003ec\u003c/i\u003e)\u003c/span\u003e. Поэтому, если перестановку \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eQ\u003c/i\u003e\u003c/span\u003e умножить саму на себя \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ek\u003c/i\u003e\u003c/span\u003e раз (используя бинарное возведение в степень) и применить результат к \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eP\u003c/i\u003e\u003c/span\u003e, то результат не изменится.\u003c/p\u003e\u003cp\u003eПолучаем решение за \u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/dc/22/dc226c23d7cd9ca788a333b659da1c509fd1dbc9.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e\u003c/p\u003e\u003ch2\u003e\u003ca href\u003d\"//codeforces.com/group/6bId9YqR5t/contest/211000/problem/J\"\u003e211000J — Sabotage\u003c/a\u003e\u003c/h2\u003e\u003cp\u003e\u003ca href\u003d\"http://dl.gsu.by/task.jsp?cid\u003d19\u0026amp;nid\u003d1272851\"\u003eUSACO 2014 March Gold SABOTAGE\u003c/a\u003e\u003c/p\u003e\u003cp\u003e\u003ca href\u003d\"http://ideone.com/5eOd6N\"\u003eКод\u003c/a\u003e\u003c/p\u003e\u003cp\u003eВ первой подзадаче можно написать полный перебор вариантов удаления аппаратов фермером Антоном. Главное не забыть, что нельзя ничего не удалять и нельзя удалять первый или последний аппарат. Асимптотика \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eO\u003c/i\u003e(\u003ci\u003eN\u003c/i\u003e\u003csup class\u003d\"upper-index\"\u003e2\u003c/sup\u003e)\u003c/span\u003e.\u003c/p\u003e\u003cp\u003eДавайте бинарным поиском перебирать ответ. Пусть мы зафиксировали какое-то число \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e и хотим проверить, можно ли получить среднее значение, не большее \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e. Если для некоторого множества \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eb\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e1\u003c/sub\u003e, \u003ci\u003eb\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e2\u003c/sub\u003e, ..., \u003ci\u003eb\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ek\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e верно, что среднее значение его элементов не больше \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e, то \u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/9e/21/9e2117dfa29e904cd14cc37fd5eca5aa07291ef8.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e. Можно преобразовать: \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eb\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e1\u003c/sub\u003e + \u003ci\u003eb\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e2\u003c/sub\u003e + ... + \u003ci\u003eb\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ek\u003c/i\u003e\u003c/sub\u003e - \u003ci\u003ek\u003c/i\u003e·\u003ci\u003ex\u003c/i\u003e ≤ 0\u003c/span\u003e, что равносильно \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003eb\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e1\u003c/sub\u003e - \u003ci\u003ex\u003c/i\u003e) + (\u003ci\u003eb\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e2\u003c/sub\u003e - \u003ci\u003ex\u003c/i\u003e) + ... + (\u003ci\u003eb\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ek\u003c/i\u003e\u003c/sub\u003e - \u003ci\u003ex\u003c/i\u003e) ≤ 0\u003c/span\u003e. \u003c/p\u003e\u003cp\u003eПоэтому если от каждого числа в массиве отнять \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e, то задача сводится к нахождению такого отрезка, удаление которого приведет к тому, что сумма оставшихся чисел меньше нуля. Давайте переберем, какой длины префикс мы оставим (допустим, сейчас он длины \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/span\u003e), тогда нам надо найти такой суффикс, что сумма значений в нем плюс сумма на текущем префиксе меньше \u003cspan class\u003d\"tex-span\"\u003e0\u003c/span\u003e. Чтобы найти такой суффикс можно посмотреть на значение \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003esuffmin\u003c/i\u003e[\u003ci\u003ei\u003c/i\u003e + 2]\u003c/span\u003e, где \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003esuffmin\u003c/i\u003e[\u003ci\u003ej\u003c/i\u003e]\u003c/span\u003e — минимальное значение среди всех сумм на суффиксах, начинающихся не левее \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ej\u003c/i\u003e\u003c/span\u003e. Если мы найдем такой суффикс, то Фермер Антон сможет получить среднее значение не больше \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e. \u003c/p\u003e\u003cp\u003eАсимптотика \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eO\u003c/i\u003e(\u003ci\u003eNlogmaxA\u003c/i\u003e)\u003c/span\u003e.\u003c/p\u003e\u003c/div\u003e","tags":["kefaa","loves","cyf"]}}