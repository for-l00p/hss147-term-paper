{"status":"OK","result":{"originalLocale":"en","allowViewHistory":true,"creationTimeSeconds":1487917280,"rating":-13,"authorHandle":"shjwudp","modificationTimeSeconds":1487917475,"id":50631,"title":"\u003cp\u003e776C â€” Molly\u0027s Chemicals why unordered_map cause TLE?\u003c/p\u003e","locale":"en","content":"\u003cdiv class\u003d\"ttypography\"\u003e\u003cp\u003eproblem link : \u003ca href\u003d\"//codeforces.com/contest/776/problem/C\"\u003ehttp://codeforces.com/contest/776/problem/C\u003c/a\u003e\u003c/p\u003e\u003cp\u003eAC code:\u003c/p\u003e \u003cpre\u003e\u003ccode\u003e#include \u0026lt;algorithm\u0026gt;\n#include \u0026lt;bitset\u0026gt;\n#include \u0026lt;cassert\u0026gt;\n#include \u0026lt;climits\u0026gt;\n#include \u0026lt;cmath\u0026gt;\n#include \u0026lt;cstdio\u0026gt;\n#include \u0026lt;cstdlib\u0026gt;\n#include \u0026lt;cstring\u0026gt;\n#include \u0026lt;deque\u0026gt;\n#include \u0026lt;iomanip\u0026gt;\n#include \u0026lt;iostream\u0026gt;\n#include \u0026lt;map\u0026gt;\n#include \u0026lt;numeric\u0026gt;\n#include \u0026lt;queue\u0026gt;\n#include \u0026lt;set\u0026gt;\n#include \u0026lt;stack\u0026gt;\n#include \u0026lt;string\u0026gt;\n\n#ifdef PRINTERS\n#include \u0026quot;printers.hpp\u0026quot;\nusing namespace printers;\n#define tr(a)        cerr\u0026lt;\u0026lt;#a\u0026lt;\u0026lt;\u0026quot;: \u0026quot;\u0026lt;\u0026lt;a\u0026lt;\u0026lt;endl;\n#else\n#define tr(a)    \n#endif\n#define ll          long long\n#define pb          push_back\n#define mp          make_pair\n#define pii         pair\u0026lt;int,int\u0026gt;\n#define vi          vector\u0026lt;int\u0026gt;\n#define all(a)      (a).begin(),(a).end()\n#define F           first\n#define S           second\n#define sz(x)       (int)x.size()\n#define hell        1000000007\n#define endl        \u0027\\n\u0027\n#define rep(i,a,b)    for(int i\u003da;i\u0026lt;b;i++)\nusing namespace std;\n\nvoid solve(){\n    int N,k;\n    scanf(\u0026quot;%d%d\u0026quot;,\u0026amp;N,\u0026amp;k);\n    ll x[N+1];\n    x[0]\u003d0;\n    rep(i,0,N)scanf(\u0026quot;%lld\u0026quot;,\u0026amp;x[i+1]);\n    partial_sum(x,x+N+1,x);\n    if(k\u003d\u003d1){\n        ll ans\u003d0;\n        map\u0026lt;ll,int\u0026gt;m;\n        for(int i\u003dN;i\u0026gt;\u003d0;i--){\n            if(m.find(x[i]+1)!\u003dm.end())\n                ans+\u003dm[x[i]+1];\n            m[x[i]]++;\n        }\n        printf(\u0026quot;%lld\\n\u0026quot;,ans);\n    }\n    else if(k\u003d\u003d-1){\n        ll ans\u003d0;\n        map\u0026lt;ll,int\u0026gt;m;\n        for(int i\u003dN;i\u0026gt;\u003d0;i--){\n            if(m.find(x[i]+1)!\u003dm.end())\n                ans+\u003dm[x[i]+1];\n            if(m.find(x[i]-1)!\u003dm.end())\n                ans+\u003dm[x[i]-1];\n            \n            m[x[i]]++;\n        }\n        printf(\u0026quot;%lld\\n\u0026quot;,ans);\n    }\n    else{\n        ll ans\u003d0;\n        map\u0026lt;ll,int\u0026gt;m;\n        for(int i\u003dN;i\u0026gt;\u003d0;i--){\n            ll cur\u003d1;\n            while(true){\n                if(abs(cur)\u0026gt;\u003d1e15)break;\n                if(m.find(x[i]+cur)!\u003dm.end())\n                ans+\u003dm[x[i]+cur];\n                cur*\u003dk;\n            }\n            m[x[i]]++;\n        }\n        printf(\u0026quot;%lld\\n\u0026quot;,ans);\n    }\n}\n\nsigned main(){\n    int t\u003d1;\n    while(t--){\n        solve();\n    }\n    return 0;\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eTLE code:\u003c/p\u003e \u003cpre\u003e\u003ccode\u003e\u003cbr /\u003e#include \u0026lt;algorithm\u0026gt;\n#include \u0026lt;bitset\u0026gt;\n#include \u0026lt;cassert\u0026gt;\n#include \u0026lt;climits\u0026gt;\n#include \u0026lt;cmath\u0026gt;\n#include \u0026lt;cstdio\u0026gt;\n#include \u0026lt;cstdlib\u0026gt;\n#include \u0026lt;cstring\u0026gt;\n#include \u0026lt;deque\u0026gt;\n#include \u0026lt;iomanip\u0026gt;\n#include \u0026lt;iostream\u0026gt;\n#include \u0026lt;map\u0026gt;\n#include \u0026lt;numeric\u0026gt;\n#include \u0026lt;queue\u0026gt;\n#include \u0026lt;set\u0026gt;\n#include \u0026lt;stack\u0026gt;\n#include \u0026lt;string\u0026gt;\n#include \u0026lt;unordered_map\u0026gt;\n\n#ifdef PRINTERS\n#include \u0026quot;printers.hpp\u0026quot;\nusing namespace printers;\n#define tr(a)        cerr\u0026lt;\u0026lt;#a\u0026lt;\u0026lt;\u0026quot;: \u0026quot;\u0026lt;\u0026lt;a\u0026lt;\u0026lt;endl;\n#else\n#define tr(a)    \n#endif\n#define ll          long long\n#define pb          push_back\n#define mp          make_pair\n#define pii         pair\u0026lt;int,int\u0026gt;\n#define vi          vector\u0026lt;int\u0026gt;\n#define all(a)      (a).begin(),(a).end()\n#define F           first\n#define S           second\n#define sz(x)       (int)x.size()\n#define hell        1000000007\n#define endl        \u0027\\n\u0027\n#define rep(i,a,b)    for(int i\u003da;i\u0026lt;b;i++)\nusing namespace std;\n\nvoid solve(){\n    int N,k;\n    scanf(\u0026quot;%d%d\u0026quot;,\u0026amp;N,\u0026amp;k);\n    ll x[N+1];\n    x[0]\u003d0;\n    rep(i,0,N)scanf(\u0026quot;%lld\u0026quot;,\u0026amp;x[i+1]);\n    partial_sum(x,x+N+1,x);\n    if(k\u003d\u003d1){\n        ll ans\u003d0;\n        unordered_map\u0026lt;ll,int\u0026gt;m;\n        for(int i\u003dN;i\u0026gt;\u003d0;i--){\n            if(m.find(x[i]+1)!\u003dm.end())\n                ans+\u003dm[x[i]+1];\n            m[x[i]]++;\n        }\n        printf(\u0026quot;%lld\\n\u0026quot;,ans);\n    }\n    else if(k\u003d\u003d-1){\n        ll ans\u003d0;\n        unordered_map\u0026lt;ll,int\u0026gt;m;\n        for(int i\u003dN;i\u0026gt;\u003d0;i--){\n            if(m.find(x[i]+1)!\u003dm.end())\n                ans+\u003dm[x[i]+1];\n            if(m.find(x[i]-1)!\u003dm.end())\n                ans+\u003dm[x[i]-1];\n            \n            m[x[i]]++;\n        }\n        printf(\u0026quot;%lld\\n\u0026quot;,ans);\n    }\n    else{\n        ll ans\u003d0;\n        unordered_map\u0026lt;ll,int\u0026gt;m;\n        for(int i\u003dN;i\u0026gt;\u003d0;i--){\n            ll cur\u003d1;\n            while(true){\n                if(abs(cur)\u0026gt;\u003d1e15)break;\n                if(m.find(x[i]+cur)!\u003dm.end())\n                ans+\u003dm[x[i]+cur];\n                cur*\u003dk;\n            }\n            m[x[i]]++;\n        }\n        printf(\u0026quot;%lld\\n\u0026quot;,ans);\n    }\n}\n\nsigned main(){\n    int t\u003d1;\n    while(t--){\n        solve();\n    }\n    return 0;\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eI only replace map with unordered_map.\u003cbr /\u003e can someone tell me why?\u003cbr /\u003e please.\u003c/p\u003e\u003c/div\u003e","tags":[]}}