{"status":"OK","result":{"originalLocale":"en","allowViewHistory":true,"creationTimeSeconds":1490345172,"rating":-5,"authorHandle":"Mr.Struggler","modificationTimeSeconds":1490345172,"id":51183,"title":"\u003cp\u003eSPOJ â€” KQUERY (TLE)\u003c/p\u003e","locale":"en","content":"\u003cdiv class\u003d\"ttypography\"\u003e\u003cp\u003e\u003ca href\u003d\"http://www.spoj.com/problems/KQUERY/\"\u003eKQUERY\u003c/a\u003e\u003c/p\u003e\u003cp\u003eHow can i optimize my code?\u003c/p\u003e \u003cpre\u003e\u003ccode\u003e#include \u0026lt;bits/stdc++.h\u0026gt;\n\nusing namespace std;\n\nint n, m, a[30005];\nint bs;\nvector\u0026lt;int\u0026gt; block[300];\n\nint sqrtDecomposition(int l, int r, int v){\n        if(l / bs \u003d\u003d r / bs){\n                int cnt \u003d 0;\n                for(int i \u003d l; i \u0026lt;\u003d r; i++){\n                        if(a[i] \u0026gt; v) cnt++;\n                }\n                return cnt;\n        }\n\n        int cnt \u003d 0;\n        for(int i \u003d l; i / bs \u003d\u003d l / bs; i++){\n                if(a[i] \u0026gt; v) cnt++;\n        }\n        for(int i \u003d r; r / bs \u003d\u003d i / bs; i--){\n                if(a[i] \u0026gt; v) cnt++;\n        }\n        for(int i \u003d l / bs + 1; i \u0026lt; r / bs; i++){\n                cnt +\u003d (block[i].end() - upper_bound(block[i].begin(), block[i].end(), v));\n        }\n        return cnt;\n}\n\nint main(){\n        cin \u0026gt;\u0026gt; n;\n        for(int i \u003d 0; i \u0026lt; n; i++){\n                scanf(\u0026quot;%d\u0026quot;, a + i);\n        }\n        bs \u003d sqrt(n);\n        for(int i \u003d 0; i \u0026lt; n; i++){\n                block[i/bs].push_back(a[i]);\n        }\n        for(int i \u003d 0; i \u0026lt; 300; i++){\n                sort(block[i].begin(), block[i].end());\n        }\n        cin \u0026gt;\u0026gt; m;\n        for(int i \u003d 0; i \u0026lt; m; i++){\n                int l, r, v;\n                scanf(\u0026quot;%d %d %d\u0026quot;, \u0026amp;l, \u0026amp;r, \u0026amp;v);\n                l--; r--;\n                int ans \u003d sqrtDecomposition(l, r, v);\n                printf(\u0026quot;%d\\n\u0026quot;, ans);\n        }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":[]}}