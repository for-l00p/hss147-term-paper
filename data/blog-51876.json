{"status":"OK","result":{"originalLocale":"en","allowViewHistory":false,"creationTimeSeconds":1494138838,"rating":6,"authorHandle":"I_love_Hoang_Yen","modificationTimeSeconds":1494256873,"id":51876,"title":"\u003cp\u003eVNOI Marathon 2008 — Div 1 — Lời giải\u003c/p\u003e","locale":"en","content":"\u003cdiv class\u003d\"ttypography\"\u003e\u003cp\u003eTổng hợp các code: \u003ca href\u003d\"https://github.com/ngthanhtrung23/VNOI_contests/tree/master/VM08/Div1\"\u003eLink\u003c/a\u003e.\u003c/p\u003e\u003ch1\u003e\u003ca href\u003d\"/group/FLVn1Sc504/contest/212952/problem/A\" title\u003d\"VNOI Marathon 2008 - div 1\"\u003e212952A - Đếm tam giác\u003c/a\u003e\u003c/h1\u003e\u003ch2\u003eN^6\u003c/h2\u003e\u003cp\u003eTrước hết ta xét cài đặt đơn giản \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eN\u003c/i\u003e\u003csup class\u003d\"upper-index\"\u003e6\u003c/sup\u003e\u003c/span\u003e như sau:\u003c/p\u003e\u003cp\u003eDuyệt qua tất cả các toạ độ của 3 điểm A, B, C. Tính diện tích tam giác, nếu bằng S thì ta tăng kết quả lên 1.\u003c/p\u003e \u003cpre\u003e\u003ccode\u003eres \u003d 0;\nfor(int ax \u003d 0; ax \u0026lt;\u003d x; ++ax)\n  for(int ay \u003d 0; ay \u0026lt;\u003d y; ++ay)\n    for(int bx \u003d ax; bx \u0026lt;\u003d x; ++bx)\n      for(int by \u003d bx \u003d\u003d ax ? ay + 1 : 0; by \u0026lt;\u003d y; ++by)\n        for(int cx \u003d bx; cx \u0026lt;\u003d x; ++cx)\n          for(int cy \u003d cx \u003d\u003d bx ? by + 1 : 0; cy \u0026lt;\u003d y; ++cy) {\n            if (abs((bx - ax) * (cy - ay) - (by - ay) * (cx - ax)) \u003d\u003d 2 * s)\n              res +\u003d 1;\n          }\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eĐộ phức tạp của cài đặt này là \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eO\u003c/i\u003e(\u003ci\u003eN\u003c/i\u003e\u003csup class\u003d\"upper-index\"\u003e6\u003c/sup\u003e)\u003c/span\u003e, nhưng vẫn đủ nhanh để pass tất cả các test (????).\u003c/p\u003e\u003cp\u003eĐể hiểu tại sao, ta thêm 1 biến đếm để đếm số phép tính của chương trình trên (số lần ta phải tính diện tích):\u003c/p\u003e \u003chr /\u003e \u003cpre\u003e\u003ccode\u003eint res \u003d 0;\nint cnt \u003d 0; // đếm số lần lặp\nfor(int ax \u003d 0; ax \u0026lt;\u003d x; ++ax)\n  for(int ay \u003d 0; ay \u0026lt;\u003d y; ++ay)\n    for(int bx \u003d ax; bx \u0026lt;\u003d x; ++bx)\n      for(int by \u003d bx \u003d\u003d ax ? ay + 1 : 0; by \u0026lt;\u003d y; ++by)\n        for(int cx \u003d bx; cx \u0026lt;\u003d x; ++cx)\n          for(int cy \u003d cx \u003d\u003d bx ? by + 1 : 0; cy \u0026lt;\u003d y; ++cy) {\n            cnt +\u003d 1;\n            if (abs((bx - ax) * (cy - ay) - (by - ay) * (cx - ax)) \u003d\u003d 2 * s)\n              res +\u003d 1;\n          }\n\ncout \u0026lt;\u0026lt; \u0026quot;cnt \u003d \u0026quot; \u0026lt;\u0026lt; cnt \u0026lt;\u0026lt; endl;\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eKết quả thu được là \u003ccode\u003ecnt \u003d 147455840\u003c/code\u003e, khoảng hơn 100 triệu. Vì các phép toán đơn giản nên hoàn toàn đủ để chạy trong thời gian cho phép.\u003c/p\u003e\u003cp\u003eĐể giải thích tại sao, chú ý rằng ở đây ta chỉ for các điểm B lớn hơn A và các điểm C lớn hơn B.\u003c/p\u003e\u003cp\u003eGiả sử ta xét bài toán trên 1D, nếu ta for như sau:\u003c/p\u003e \u003cpre\u003e\u003ccode\u003efor i \u003d 1..N\n  for j \u003d i+1 .. N\n    for k \u003d j+1 .. N\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003ethì số phép tính là \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eN\u003c/i\u003e * (\u003ci\u003eN\u003c/i\u003e - 1) * (\u003ci\u003eN\u003c/i\u003e - 2) / 6\u003c/span\u003e, giảm đi 6 lần. Tuy nhiên trong bài này vì là 2D nên số phép tính còn giảm đi rất nhiều.\u003c/p\u003e\u003cp\u003eCode:\u003c/p\u003e \u003cul\u003e   \u003cli\u003e\u003ca href\u003d\"http://ideone.com/YrcAtx\"\u003ehappyboy99x\u003c/a\u003e\u003c/li\u003e \u003c/ul\u003e\u003ch2\u003eN^5\u003c/h2\u003e\u003cp\u003eNhận thấy, vì diện tích tam giác cố định, nên nếu ta đã biết 5 trong 6 toạ độ, thì việc tính toạ độ còn lại rất đơn giản. Cụ thể hơn:\u003c/p\u003e \u003cul\u003e   \u003cli\u003eGiả sử ta for 5 biến: \u003ccode\u003eA.x\u003c/code\u003e, \u003ccode\u003eA.y\u003c/code\u003e, \u003ccode\u003eB.x\u003c/code\u003e, \u003ccode\u003eB.y\u003c/code\u003e và \u003ccode\u003eC.x\u003c/code\u003e (nói cách khác ta xác định 2 điểm A và B, rồi cố định toạ độ x của điểm C)\u003c/li\u003e   \u003cli\u003eNếu \u003ccode\u003eA.x \u003d\u003d B.x\u003c/code\u003e, trường hợp này ta xử lý riêng. Do số lần trường hợp này xảy ra chỉ là \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eN\u003c/i\u003e\u003csup class\u003d\"upper-index\"\u003e4\u003c/sup\u003e\u003c/span\u003e, nên ta duyệt luôn \u003ccode\u003eC.y\u003c/code\u003e\u003c/li\u003e   \u003cli\u003eNếu \u003ccode\u003eA.x !\u003d B.x\u003c/code\u003e, bằng việc giải phương trình toán học, ta tính được 2 nghiệm của \u003ccode\u003eC.y\u003c/code\u003e. Nếu \u003ccode\u003eC.y\u003c/code\u003e nằm trong khoảng \u003cspan class\u003d\"tex-span\"\u003e[0, \u003ci\u003eY\u003c/i\u003e]\u003c/span\u003e thì ta tăng kết quả.\u003c/li\u003e \u003c/ul\u003e\u003cp\u003eCode:\u003c/p\u003e \u003cul\u003e   \u003cli\u003e\u003ca href\u003d\"http://ideone.com/TYe9yF\"\u003ekc97ble\u003c/a\u003e\u003c/li\u003e \u003c/ul\u003e\u003ch2\u003eN^3\u003c/h2\u003e\u003cp\u003eBài này còn có cách với độ phức tạp \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eN\u003c/i\u003e\u003csup class\u003d\"upper-index\"\u003e3\u003c/sup\u003e\u003c/span\u003e, cài đặt cũng rất đơn giản, xin nhường lại cho bạn đọc.\u003c/p\u003e\u003ch1\u003e\u003ca href\u003d\"/group/FLVn1Sc504/contest/212952/problem/B\" title\u003d\"VNOI Marathon 2008 - div 1\"\u003e212952B - Truy vấn trên cây\u003c/a\u003e\u003c/h1\u003e\u003ch2\u003eĐường thẳng\u003c/h2\u003e\u003cp\u003eĐầu tiên, ta xét bài toán trên đường thẳng:\u003c/p\u003e \u003cul\u003e   \u003cli\u003eCho \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eN\u003c/i\u003e\u003c/span\u003e điểm trên 1 đường thẳng, ban đầu tất cả màu trắng.\u003c/li\u003e   \u003cli\u003eTa có 2 loại thao tác:   \u003cul\u003e     \u003cli\u003eĐổi màu 1 điểm \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eu\u003c/i\u003e\u003c/span\u003e.\u003c/li\u003e     \u003cli\u003eTìm điểm đen đầu tiên trong 1 đoạn \u003cspan class\u003d\"tex-span\"\u003e[\u003ci\u003eu\u003c/i\u003e, \u003ci\u003ev\u003c/i\u003e]\u003c/span\u003e.\u003c/li\u003e   \u003c/ul\u003e\u003c/li\u003e \u003c/ul\u003e\u003cp\u003eTa có thể giải bài toán này bằng \u003ca href\u003d\"http://vnoi.info/wiki/algo/data-structures/segment-tree-extend\"\u003eSegment Tree\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eDuy trì dãy A, với:\u003c/p\u003e \u003cul\u003e   \u003cli\u003e\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eA\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e) \u003d \u003ci\u003einf\u003c/i\u003e\u003c/span\u003e nếu điểm \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/span\u003e màu trắng,\u003c/li\u003e   \u003cli\u003e\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eA\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e) \u003d \u003ci\u003ei\u003c/i\u003e\u003c/span\u003e nếu điểm \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/span\u003e màu đen.\u003c/li\u003e \u003c/ul\u003e\u003cp\u003eKhi đó,\u003c/p\u003e \u003cul\u003e   \u003cli\u003ethao tác đổi màu chỉ đơn giản là thay đổi giá trị hiện tại của 1 phần tử.\u003c/li\u003e   \u003cli\u003ethao tác tìm điểm đen đầu tiên trở thành tìm min của đoạn \u003cspan class\u003d\"tex-span\"\u003e[\u003ci\u003el\u003c/i\u003e, \u003ci\u003er\u003c/i\u003e]\u003c/span\u003e.\u003c/li\u003e \u003c/ul\u003e\u003cp\u003eNhư vậy, ta đã giải quyết được bài toán trên đường thẳng.\u003c/p\u003e\u003ch2\u003eCây\u003c/h2\u003e\u003cp\u003eTrên cây, ta dùng kĩ thuật \u003ca href\u003d\"http://vnoi.info/wiki/algo/data-structures/heavy-light-decomposition\"\u003eHeavy Light Decomposition\u003c/a\u003e, để đưa bài toán về đường thẳng.\u003c/p\u003e\u003ch1\u003e\u003ca href\u003d\"/group/FLVn1Sc504/contest/212952/problem/C\" title\u003d\"VNOI Marathon 2008 - div 1\"\u003e212952C - Xếp hình\u003c/a\u003e\u003c/h1\u003e\u003cp\u003eBài này ta quy hoạch động như sau:\u003c/p\u003e \u003cul\u003e   \u003cli\u003eGọi \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e)\u003c/span\u003e là số lượng thanh dài \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eS\u003c/i\u003e\u003c/span\u003e lớn nhất có thể đặt lên \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/span\u003e ô đầu tiên. Chú ý không có thanh nào được thòi ra ngoài (nghĩa là không có thanh nào bắt đầu từ \u003cspan class\u003d\"tex-span\"\u003e ≤ \u003ci\u003ei\u003c/i\u003e\u003c/span\u003e và kết thúc sau \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/span\u003e).\u003c/li\u003e \u003c/ul\u003e\u003cp\u003eĐể tính \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e)\u003c/span\u003e ta xét 2 trường hợp:\u003c/p\u003e \u003col\u003e   \u003cli\u003eÔ \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/span\u003e không thuộc 1 thanh \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eS\u003c/i\u003e\u003c/span\u003e nào. Như vậy \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e) \u003d \u003ci\u003ef\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e - 1)\u003c/span\u003e.\u003c/li\u003e   \u003cli\u003eÔ \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/span\u003e là kết thúc của 1 thanh \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eS\u003c/i\u003e\u003c/span\u003e nào đó. Như vậy:\u003c/li\u003e \u003c/ol\u003e \u003cul\u003e   \u003cli\u003etất cả các ô từ \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ei\u003c/i\u003e - \u003ci\u003eS\u003c/i\u003e + 1\u003c/span\u003e đến \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/span\u003e đều không được là ô cấm,\u003c/li\u003e   \u003cli\u003etất cả các ô từ \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ei\u003c/i\u003e - \u003ci\u003eS\u003c/i\u003e - \u003ci\u003eD\u003c/i\u003e + 1\u003c/span\u003e đến \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ei\u003c/i\u003e - \u003ci\u003eS\u003c/i\u003e\u003c/span\u003e đều không được là ô bắt buộc phải đặt thanh \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eS\u003c/i\u003e\u003c/span\u003e.\u003c/li\u003e \u003c/ul\u003e\u003cp\u003eĐể kiểm tra 2 điều kiện trên, ta chỉ cần dùng 2 \u003ca href\u003d\"http://vnoi.info/wiki/algo/data-structures/data-structures-overview#2-ctdl-truy-vấn_2-1-mảng-cộng-dồn-partial-sum\"\u003emảng cộng dồn\u003c/a\u003e. Nếu cả 2 điều kiện đều thoả mãn, \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e) \u003d \u003ci\u003ef\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e - \u003ci\u003eS\u003c/i\u003e - \u003ci\u003eD\u003c/i\u003e) + 1\u003c/span\u003e.\u003c/p\u003e\u003ch1\u003e\u003ca href\u003d\"/group/FLVn1Sc504/contest/212952/problem/D\" title\u003d\"VNOI Marathon 2008 - div 1\"\u003e212952D - Mã khóa bí mật\u003c/a\u003e\u003c/h1\u003e\u003cp\u003eLời giải: Khúc Tuấn.\u003c/p\u003e\u003cp\u003eTư tưởng là ta lần lượt thử thay mỗi dấu \u0026quot;?\u0026quot; thành 0 rồi thành 1, sau mỗi lần thay, QHĐ để kiểm tra xem có tồn tại cách xây dựng dãy 01 thoả mãn tất cả các điều kiện hay không.\u003c/p\u003e\u003cp\u003eTa quy hoạch động với trạng thái: \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eF\u003c/i\u003e[\u003ci\u003eposition\u003c/i\u003e][\u003ci\u003elast\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003echar\u003c/i\u003e\u003c/sub\u003e][\u003ci\u003elen\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003elast\u003c/i\u003e\u003c/sub\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003esegment\u003c/i\u003e\u003c/sub\u003e][2\u003csup class\u003d\"upper-index\"\u003e\u003ci\u003em\u003c/i\u003e\u003c/sup\u003e]\u003c/span\u003e\u003c/p\u003e \u003cul\u003e   \u003cli\u003eposition là vị trí mà ta đang xây dựng.\u003c/li\u003e   \u003cli\u003elast_char là ký tự cuối cùng của dãy đang xây dựng.\u003c/li\u003e   \u003cli\u003elen_last_segment là độ dài phần cuối dãy mà bằng với ký tự cuối.\u003c/li\u003e   \u003cli\u003e2^m là tập hợp các điều kiện đã thoả mãn.\u003c/li\u003e \u003c/ul\u003e\u003cp\u003eVì 2^m khá lớn (tuy nhiên trên thực tế lại rất nhỏ), nên ta có thể lưu bằng hash table hoặc dùng kiểu dữ liệu map của C++.\u003c/p\u003e\u003cp\u003eMột số tính chất giúp ta có thể cảm nhận đc số lượng trạng thái thực tế nhỏ:\u003c/p\u003e \u003cul\u003e   \u003cli\u003eNếu 2 thông tin không giao nhau, thì nó độc lập. Ví dụ r1.end \u0026lt; r2.start thì sau khi QHD đến r2.start rồi thì r1 phải đc thoả mãn, và trước khi đến r2.start thì r2 lúc nào cũng chưa đc thoả mãn.\u003c/li\u003e   \u003cli\u003eNếu 2 thông tin giao nhau, thì nó cũng bị ràng buộc nhau, ví dụ r1 nằm hoàn toàn trong r2 thì khi r1 thoả mãn thì r2 cũng phải thoả mãn.\u003c/li\u003e \u003c/ul\u003e\u003ch1\u003e\u003ca href\u003d\"/group/FLVn1Sc504/contest/212952/problem/E\" title\u003d\"VNOI Marathon 2008 - div 1\"\u003e212952E - Dãy chữ số kỳ diệu\u003c/a\u003e\u003c/h1\u003e\u003ch2\u003eTư tưởng\u003c/h2\u003e \u003cul\u003e   \u003cli\u003eTính chữ số thứ \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eN\u003c/i\u003e\u003c/span\u003e của \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eA\u003c/i\u003e(\u003ci\u003eK\u003c/i\u003e1)\u003c/span\u003e, gọi là \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eX\u003c/i\u003e1(\u003ci\u003eN\u003c/i\u003e)\u003c/span\u003e.\u003c/li\u003e   \u003cli\u003eTính chữ số thứ \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eN\u003c/i\u003e\u003c/span\u003e của \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eA\u003c/i\u003e(\u003ci\u003eK\u003c/i\u003e2)\u003c/span\u003e, gọi là \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eX\u003c/i\u003e2(\u003ci\u003eN\u003c/i\u003e)\u003c/span\u003e.\u003c/li\u003e   \u003cli\u003eKết quả là \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eX\u003c/i\u003e1(\u003ci\u003eN\u003c/i\u003e) + \u003ci\u003eX\u003c/i\u003e2(\u003ci\u003eN\u003c/i\u003e) + \u003ci\u003ereminder\u003c/i\u003e\u003c/span\u003e (nhớ).\u003c/li\u003e \u003c/ul\u003e\u003cp\u003eĐể tính reminder:\u003c/p\u003e \u003cul\u003e   \u003cli\u003eTính chữ số thứ \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eN\u003c/i\u003e - 1\u003c/span\u003e của \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eA\u003c/i\u003e(\u003ci\u003eK\u003c/i\u003e1)\u003c/span\u003e, gọi là \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eX\u003c/i\u003e1(\u003ci\u003eN\u003c/i\u003e - 1)\u003c/span\u003e.\u003c/li\u003e   \u003cli\u003eTính chữ số thứ \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eN\u003c/i\u003e - 1\u003c/span\u003e của \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eA\u003c/i\u003e(\u003ci\u003eK\u003c/i\u003e2)\u003c/span\u003e, gọi là \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eX\u003c/i\u003e2(\u003ci\u003eN\u003c/i\u003e - 1)\u003c/span\u003e.\u003c/li\u003e   \u003cli\u003e\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ereminder\u003c/i\u003e \u003d (\u003ci\u003eX\u003c/i\u003e1(\u003ci\u003eN\u003c/i\u003e - 1) + \u003ci\u003eX\u003c/i\u003e2(\u003ci\u003eN\u003c/i\u003e - 1) + \u003ci\u003ereminder\u003c/i\u003e(\u003ci\u003eN\u003c/i\u003e - 1)) / 10\u003c/span\u003e.\u003c/li\u003e \u003c/ul\u003e\u003cp\u003eNếu \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eX\u003c/i\u003e1(\u003ci\u003eN\u003c/i\u003e - 1) + \u003ci\u003eX\u003c/i\u003e2(\u003ci\u003eN\u003c/i\u003e - 1) \u0026lt;  \u003d 8\u003c/span\u003e, thì reminder luôn \u003d 0. Nếu \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eX\u003c/i\u003e1(\u003ci\u003eN\u003c/i\u003e - 1) + \u003ci\u003eX\u003c/i\u003e2(\u003ci\u003eN\u003c/i\u003e - 1) \u0026gt;  \u003d 10\u003c/span\u003e, thì reminder luôn \u003d 1. Do đó chỉ có trường hợp tổng \u003d 9 thì ta không biết reminder, và tiếp tục lặp lại quá trình trên. Vì các chữ số khá ngẫu nhiên nên số lần ta cần tính reminder rất ít.\u003c/p\u003e\u003cp\u003eNhư vậy bài toán trở thành tính chữ số thứ \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eN\u003c/i\u003e\u003c/span\u003e.\u003c/p\u003e\u003ch2\u003eTính chữ số thứ N\u003c/h2\u003e\u003cp\u003eĐể tính chữ số thứ \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eN\u003c/i\u003e\u003c/span\u003e, ta làm như sau:\u003c/p\u003e \u003cul\u003e   \u003cli\u003eXác định các số \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003csup class\u003d\"upper-index\"\u003e\u003ci\u003eK\u003c/i\u003e\u003c/sup\u003e\u003c/span\u003e có 1 chữ số. Số chữ số các số này là \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eS\u003c/i\u003e1\u003c/span\u003e.\u003c/li\u003e   \u003cli\u003eXác định các số \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003csup class\u003d\"upper-index\"\u003e\u003ci\u003eK\u003c/i\u003e\u003c/sup\u003e\u003c/span\u003e có 2 chữ số. Số chữ số các số này là \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eS\u003c/i\u003e2\u003c/span\u003e.\u003c/li\u003e   \u003cli\u003e...\u003c/li\u003e   \u003cli\u003eXác định các số \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003csup class\u003d\"upper-index\"\u003e\u003ci\u003eK\u003c/i\u003e\u003c/sup\u003e\u003c/span\u003e có \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eL\u003c/i\u003e\u003c/span\u003e chữ số. --\u0026gt; \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eS\u003c/i\u003e(\u003ci\u003eL\u003c/i\u003e)\u003c/span\u003e.\u003c/li\u003e \u003c/ul\u003e\u003cp\u003eTa cần tìm \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eL\u003c/i\u003e\u003c/span\u003e là số nhỏ nhất mà \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eS\u003c/i\u003e1 + ... + \u003ci\u003eS\u003c/i\u003e(\u003ci\u003eL\u003c/i\u003e) ≥ \u003ci\u003eN\u003c/i\u003e\u003c/span\u003e.\u003c/p\u003e\u003cp\u003eTừ đó ta biết được chữ số thứ \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eN\u003c/i\u003e\u003c/span\u003e là của số thứ mấy trong các số \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003csup class\u003d\"upper-index\"\u003e\u003ci\u003eK\u003c/i\u003e\u003c/sup\u003e\u003c/span\u003e có \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eL\u003c/i\u003e\u003c/span\u003e chữ số, từ đó tính được chính xác chữ số thứ \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eN\u003c/i\u003e\u003c/span\u003e.\u003c/p\u003e\u003cp\u003eĐể xác định các số \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003csup class\u003d\"upper-index\"\u003e\u003ci\u003eK\u003c/i\u003e\u003c/sup\u003e\u003c/span\u003e có đúng \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eL\u003c/i\u003e\u003c/span\u003e chữ số, ta dùng chặt nhị phân để tìm số đầu tiên và cuối cùng.\u003c/p\u003e\u003ch1\u003e\u003ca href\u003d\"/group/FLVn1Sc504/contest/212952/problem/F\" title\u003d\"VNOI Marathon 2008 - div 1\"\u003e212952F - Cúp FA\u003c/a\u003e\u003c/h1\u003e\u003cp\u003eLời giải: Gia Phúc Trịnh Hữu\u003c/p\u003e\u003cp\u003eBiểu diễn các trận đấu dưới dạng 1 cây nhị phân:\u003c/p\u003e \u003cul\u003e   \u003cli\u003eMỗi nút lá ứng với một đội từ 1 đến \u003cspan class\u003d\"tex-span\"\u003e2\u003csup class\u003d\"upper-index\"\u003e\u003ci\u003eN\u003c/i\u003e\u003c/sup\u003e\u003c/span\u003e.\u003c/li\u003e   \u003cli\u003eMỗi nút không phải lá thể hiện kết quả của 1 trận đấu, ứng với đội thắng trong trận đó.\u003c/li\u003e \u003c/ul\u003e\u003cp\u003eỞ mỗi nút ta QHĐ tính \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e)\u003c/span\u003e là xác suất để đội i lên được nút đó.\u003c/p\u003e \u003cul\u003e   \u003cli\u003eỞ nút lá thứ i, thì \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e) \u003d 1\u003c/span\u003e, \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e(\u003ci\u003ej\u003c/i\u003e) \u003d 0\u003c/span\u003e nếu \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ej\u003c/i\u003e\u003c/span\u003e khác \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/span\u003e.\u003c/li\u003e   \u003cli\u003eTa QHĐ dần từ lá lên gốc.\u003c/li\u003e   \u003cli\u003eGiả sử xác suất để \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e đến nút con là \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ep\u003c/i\u003e(\u003ci\u003ex\u003c/i\u003e)\u003c/span\u003e, thì xác suất để nó lên được nút cha là tổng của \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ep\u003c/i\u003e(\u003ci\u003ex\u003c/i\u003e) * \u003ci\u003ewin\u003c/i\u003e(\u003ci\u003ex\u003c/i\u003e, \u003ci\u003ey\u003c/i\u003e) * \u003ci\u003ep\u003c/i\u003e(\u003ci\u003ey\u003c/i\u003e)\u003c/span\u003e với \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ey\u003c/i\u003e\u003c/span\u003e là những đội có thể lên được nút con còn lại và \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ep\u003c/i\u003e(\u003ci\u003ey\u003c/i\u003e)\u003c/span\u003e là xác suất để lên nút đó. \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ewin\u003c/i\u003e(\u003ci\u003ex\u003c/i\u003e, \u003ci\u003ey\u003c/i\u003e)\u003c/span\u003e là xác suất để \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e thắng \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ey\u003c/i\u003e\u003c/span\u003e.\u003c/li\u003e \u003c/ul\u003e\u003cp\u003eĐộ phức tạp là \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eO\u003c/i\u003e((2\u003csup class\u003d\"upper-index\"\u003e\u003ci\u003eN\u003c/i\u003e\u003c/sup\u003e)\u003csup class\u003d\"upper-index\"\u003e3\u003c/sup\u003e)\u003c/span\u003e.\u003c/p\u003e\u003cp\u003e\u003ca href\u003d\"https://ideone.com/vdFgob\"\u003eCode AC\u003c/a\u003e\u003c/p\u003e\u003ch1\u003e\u003ca href\u003d\"/group/FLVn1Sc504/contest/212952/problem/G\" title\u003d\"VNOI Marathon 2008 - div 1\"\u003e212952G - Mê cung\u003c/a\u003e\u003c/h1\u003e\u003ch2\u003eVòng tròn\u003c/h2\u003e\u003cp\u003eXét vòng tròn. Mỗi cạnh trên vòng tròn có 1 trọng số. Tìm vị trí xuất phát để đi vòng quanh vòng tròn, mà không lúc nào tổng nhỏ hơn 0.\u003c/p\u003e\u003cp\u003eChọn 1 điểm bất kỳ trên vòng tròn làm điểm 1. Đặt \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eS\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e)\u003c/span\u003e là tổng i số đầu tiên. Vẽ đồ thị \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eS\u003c/i\u003e\u003c/span\u003e ra.\u003c/p\u003e\u003cp\u003eNhận thấy nếu ta chuyển điểm xuất phát từ điểm 1 đến điểm \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e, thì đồ thị bị dịch lên hoặc dịch xuống 1 khoảng bằng hiệu \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eS\u003c/i\u003e(1)\u003c/span\u003e và \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eS\u003c/i\u003e(\u003ci\u003ex\u003c/i\u003e)\u003c/span\u003e.\u003c/p\u003e\u003cp\u003eTừ đó có thể thấy, nếu chọn điểm có \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eS\u003c/i\u003e\u003c/span\u003e nhỏ nhất để xuất phát, thì tổng không lúc nào nhỏ hơn 0.\u003c/p\u003e\u003ch2\u003eThuật toán:\u003c/h2\u003e\u003cp\u003eTìm chu trình euler. Sau khi có chu trình euler, bài toán đưa về vòng tròn.\u003c/p\u003e\u003cp\u003eNếu ko hiểu bạn có thể xem thêm \u003ca href\u003d\"https://youtu.be/8FwdtDucfSU\"\u003eVideo\u003c/a\u003e.\u003c/p\u003e\u003ch1\u003e\u003ca href\u003d\"/group/FLVn1Sc504/contest/212952/problem/H\" title\u003d\"VNOI Marathon 2008 - div 1\"\u003e212952H - Xử lý xâu\u003c/a\u003e\u003c/h1\u003e\u003ch2\u003eTư tưởng\u003c/h2\u003e\u003cp\u003eNhận xét: các bài toán vòng tròn (ví dụ như bài này là xoay xâu theo vòng tròn) thường rất khó giải quyết. Kĩ năng thông thường là ta tìm các đưa các bài đó về đường thẳng rồi giải quyết. Có 2 cách thông thường:\u003c/p\u003e \u003cul\u003e   \u003cli\u003eCắt vòng tròn tại 1 điểm\u003c/li\u003e   \u003cli\u003eNhân đôi\u003c/li\u003e \u003c/ul\u003e\u003cp\u003eỞ bài này ta sẽ nhân đôi xâu lên.\u003c/p\u003e\u003cp\u003eXét xâu \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eS\u003c/i\u003e\u0027 \u003d \u003ci\u003eAHYANGYIAHYANGYI\u003c/i\u003e\u003c/span\u003e. Ta thấy mỗi cách xoay vòng tròn xâu \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eS\u003c/i\u003e\u003c/span\u003e tương ứng với 1 substring của xâu \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eS\u003c/i\u003e\u0027\u003c/span\u003e độ dài \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eLS\u003c/i\u003e\u003c/span\u003e.\u003c/p\u003e\u003cp\u003eNhư vậy, bài toán trở thành: với mỗi đoạn con dài \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eN\u003c/i\u003e\u003c/span\u003e của xâu \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eS\u003c/i\u003e\u0027\u003c/span\u003e, đếm số cách để biến nó thành xâu \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eT\u003c/i\u003e\u003c/span\u003e.\u003c/p\u003e\u003cp\u003eVới mỗi đoạn con dài \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eN\u003c/i\u003e\u003c/span\u003e của xâu \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eS\u003c/i\u003e\u0027\u003c/span\u003e, có 3 trường hợp:\u003c/p\u003e \u003cul\u003e   \u003cli\u003eNó và xâu \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eT\u003c/i\u003e\u003c/span\u003e không khác nhau --\u0026gt; Có \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eN\u003c/i\u003e\u003c/span\u003e cách thay đổi\u003c/li\u003e   \u003cli\u003eNó và xâu \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eT\u003c/i\u003e\u003c/span\u003e khác nhau ở đúng 1 vị trí --\u0026gt; Có 1 cách thay đổi\u003c/li\u003e   \u003cli\u003eNó và xâu \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eT\u003c/i\u003e\u003c/span\u003e khác nhau ở ít nhất 2 vị trí --\u0026gt; Không có cách thay đổi nào cả.\u003c/li\u003e \u003c/ul\u003e\u003cp\u003eNhư vậy, việc quan trọng nhất là đếm số vị trí khác nhau của 2 xâu.\u003c/p\u003e\u003cp\u003eCụ thể, với mỗi đoạn \u003cspan class\u003d\"tex-span\"\u003e[\u003ci\u003el\u003c/i\u003e, \u003ci\u003er\u003c/i\u003e]\u003c/span\u003e trên xâu \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eS\u003c/i\u003e\u0027\u003c/span\u003e, ta sẽ cần biết:\u003c/p\u003e \u003cul\u003e   \u003cli\u003eĐoạn kết thúc ở \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003er\u003c/i\u003e\u003c/span\u003e của xâu \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eS\u003c/i\u003e\u0027\u003c/span\u003e khớp với bao nhiêu kí tự cuối của xâu \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eT\u003c/i\u003e\u003c/span\u003e\u003c/li\u003e   \u003cli\u003eĐoạn bắt đầu ở \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003el\u003c/i\u003e\u003c/span\u003e của xâu \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eS\u003c/i\u003e\u0027\u003c/span\u003e khớp với bao nhiêu kí tự đầu của xâu \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eT\u003c/i\u003e\u003c/span\u003e.\u003c/li\u003e \u003c/ul\u003e\u003cp\u003eTừ 2 thông tin đó ta có thể xác định được đoạn \u003cspan class\u003d\"tex-span\"\u003e[\u003ci\u003el\u003c/i\u003e, \u003ci\u003er\u003c/i\u003e]\u003c/span\u003e thuộc trường hợp nào trong 3 trường hợp nói trên.\u003c/p\u003e\u003ch2\u003eHash\u003c/h2\u003e\u003cp\u003eSử dụng hash, ta dễ dàng so sánh 2 xâu con có bằng nhau hay không trong \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eO\u003c/i\u003e(1)\u003c/span\u003e. Như vậy, bằng chặt nhị phân, ta có thể tính được các thông tin trên trong \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eO\u003c/i\u003e(\u003ci\u003elogN\u003c/i\u003e)\u003c/span\u003e.\u003c/p\u003e\u003ch2\u003eKMP\u003c/h2\u003e\u003cp\u003eKhi áp dụng thuật toán KMP với xâu \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eS\u003c/i\u003e\u0027\u003c/span\u003e và \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eT\u003c/i\u003e\u003c/span\u003e, ở mỗi vị trí trên xâu \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eS\u003c/i\u003e\u0027\u003c/span\u003e ta biết được nó khớp với nhiều nhất bao nhiêu kí tự đầu của xâu \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eT\u003c/i\u003e\u003c/span\u003e. Ví dụ:\u003c/p\u003e \u003cpre\u003e\u003ccode\u003eS \u003d ABCABC\nT \u003d ABC\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThì ta biết ở vị trí 5 trên xâu \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eS\u003c/i\u003e\u003c/span\u003e khớp được với 2 vị trí đầu của xâu \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eT\u003c/i\u003e\u003c/span\u003e, vị trí 6 của xâu \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eS\u003c/i\u003e\u003c/span\u003e khớp với 3 vị trí đầu của xâu \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eT\u003c/i\u003e\u003c/span\u003e. Cái này bị ngược với cái mà ta cần tính --\u0026gt; \u003ccode\u003e:@)\u003c/code\u003e. Cách giải quyết xem trong code kỳ diệu phía dưới.\u003c/p\u003e\u003ch2\u003eZ-function\u003c/h2\u003e\u003cp\u003eĐịnh nghĩa hàm Z giống hệt như cái mình cần tính ở bài này --\u0026gt; nếu biết Z chỉ cần chép vào là AC.\u003c/p\u003e\u003cp\u003eCode:\u003c/p\u003e \u003cul\u003e   \u003cli\u003e\u003ca href\u003d\"http://ideone.com/aHOzb7\"\u003eKMP\u003c/a\u003e\u003c/li\u003e   \u003cli\u003e\u003ca href\u003d\"http://ideone.com/9Hz5Zy\"\u003eHash\u003c/a\u003e\u003c/li\u003e   \u003cli\u003e\u003ca href\u003d\"http://ideone.com/FjPB7k\"\u003eZ-Function\u003c/a\u003e\u003c/li\u003e \u003c/ul\u003e\u003ch1\u003e\u003ca href\u003d\"/group/FLVn1Sc504/contest/212952/problem/I\" title\u003d\"VNOI Marathon 2008 - div 1\"\u003e212952I - Harry Potter và mê cung tử thần\u003c/a\u003e\u003c/h1\u003e\u003cp\u003eTính \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eC\u003c/i\u003e[\u003ci\u003ei\u003c/i\u003e][\u003ci\u003ej\u003c/i\u003e]\u003c/span\u003e là thời gian để người bạn thứ i thoát ra khỏi mê cung nếu như là người thoát ra thứ j -\u0026gt; Đưa về bài toán bộ ghép cực đại chi phí cực tiểu.\u003c/p\u003e\u003ch1\u003e\u003ca href\u003d\"/group/FLVn1Sc504/contest/212952/problem/J\" title\u003d\"VNOI Marathon 2008 - div 1\"\u003e212952J - Khối tam chữ nhật\u003c/a\u003e\u003c/h1\u003e\u003cp\u003eBài dạng này có rất nhiều cách đi. Điểm quan trọng khi làm những bài như này là tìm cách nào đơn giản, logic nhất để code.\u003c/p\u003e\u003cp\u003eCách tiếp cận đơn giản nhất là chia nhỏ hình cần tìm ra theo cấu trúc của nó và quy hoạch động theo từng phần:\u003c/p\u003e \u003cul\u003e   \u003cli\u003e\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003etop\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003el\u003c/i\u003e, \u003ci\u003er\u003c/i\u003e)\u003c/span\u003e là khối bên trên lớn nhất, nếu cạnh dưới ở hàng i, và cạnh đáy từ \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003el\u003c/i\u003e\u003c/span\u003e đến \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003er\u003c/i\u003e\u003c/span\u003e.\u003c/li\u003e   \u003cli\u003e\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ebot\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003el\u003c/i\u003e, \u003ci\u003er\u003c/i\u003e)\u003c/span\u003e là khối bên dưới lớn nhất, nếu cạnh trên ở hàng i, và cạnh trên từ \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003el\u003c/i\u003e\u003c/span\u003e đến \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003er\u003c/i\u003e\u003c/span\u003e.\u003c/li\u003e   \u003cli\u003e\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003emid\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003el\u003c/i\u003e, \u003ci\u003er\u003c/i\u003e)\u003c/span\u003e là khối trên + giữa lớn nhất, nếu cạnh dưới ở hàng i, và cạnh đáy từ \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003el\u003c/i\u003e\u003c/span\u003e đến \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003er\u003c/i\u003e\u003c/span\u003e.\u003c/li\u003e \u003c/ul\u003e\u003cp\u003eSau khi tính \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003etop\u003c/i\u003e\u003c/span\u003e và \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ebot\u003c/i\u003e\u003c/span\u003e, ta nở 2 mảng này ra:\u003c/p\u003e \u003cul\u003e   \u003cli\u003e\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003etop\u003c/i\u003e\u0027(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003el\u003c/i\u003e, \u003ci\u003er\u003c/i\u003e)\u003c/span\u003e là khối trên lớn nhất, nếu cạnh đáy ở hàng i, và nó nằm trong khoảng \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003el\u003c/i\u003e\u003c/span\u003e đến \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003er\u003c/i\u003e\u003c/span\u003e. \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003etop\u003c/i\u003e\u0027(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003el\u003c/i\u003e, \u003ci\u003er\u003c/i\u003e) \u003d \u003ci\u003emax\u003c/i\u003e(\u003ci\u003etop\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003el\u003c/i\u003e, \u003ci\u003er\u003c/i\u003e), \u003ci\u003etop\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003el\u003c/i\u003e + 1, \u003ci\u003er\u003c/i\u003e), \u003ci\u003etop\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003el\u003c/i\u003e, \u003ci\u003er\u003c/i\u003e - 1))\u003c/span\u003e.\u003c/li\u003e   \u003cli\u003e\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ebot\u003c/i\u003e\u0027(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003el\u003c/i\u003e, \u003ci\u003er\u003c/i\u003e)\u003c/span\u003e là khối dưới lớn nhất, nếu cạnh trên ở hàng i, và nó nằm trong khoảng \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003el\u003c/i\u003e\u003c/span\u003e đến \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003er\u003c/i\u003e\u003c/span\u003e. \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ebot\u003c/i\u003e\u0027(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003el\u003c/i\u003e, \u003ci\u003er\u003c/i\u003e) \u003d \u003ci\u003emax\u003c/i\u003e(\u003ci\u003ebot\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003el\u003c/i\u003e, \u003ci\u003er\u003c/i\u003e), \u003ci\u003ebot\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003el\u003c/i\u003e + 1, \u003ci\u003er\u003c/i\u003e), \u003ci\u003ebot\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003el\u003c/i\u003e, \u003ci\u003er\u003c/i\u003e - 1))\u003c/span\u003e.\u003c/li\u003e \u003c/ul\u003e\u003cp\u003eTiếp theo là xử lý đến phần giữa. Ở đây tư tưởng là:\u003c/p\u003e \u003cul\u003e   \u003cli\u003emid(i, l, r) là khối đầu + giữa to nhất, nếu khối giữa kết thúc ở hàng i, và ở hàng i nó trải từ l đến r.\u003c/li\u003e   \u003cli\u003eDùng mảng mid và mảng bot để nối phần (đầu + giữa) với phần cuối. Chỗ này thì đơn giản, em chỉ cần xét mỗi cái mid(i, l, r) rồi cộng thêm bot(i+1, l+1, r-1). Chú ý ở đây mảng bot đã được nở ra.\u003c/li\u003e \u003c/ul\u003e\u003cp\u003eKhi tính mid(i, l, r) thì có 2 trường hợp:\u003c/p\u003e \u003col\u003e   \u003cli\u003eHàng i là hàng đầu tiên của khối giữa. Trường hợp này thì \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003emid\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003el\u003c/i\u003e, \u003ci\u003er\u003c/i\u003e) \u003d \u003ci\u003etop\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e - 1, \u003ci\u003el\u003c/i\u003e + 1, \u003ci\u003er\u003c/i\u003e - 1) + (\u003ci\u003er\u003c/i\u003e - \u003ci\u003el\u003c/i\u003e + 1)\u003c/span\u003e, do ta chuyển từ khối đầu qua khối giữa. Chú ý phải check cẩn thận là top dương và hàng i từ l đến r toàn bộ là 1.\u003c/li\u003e   \u003cli\u003eHàng i KHÔNG phải là hàng đầu tiên của khối giữa. Trường hợp này thì tương tự top, \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003emid\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003el\u003c/i\u003e, \u003ci\u003er\u003c/i\u003e) \u003d \u003ci\u003emid\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e - 1, \u003ci\u003el\u003c/i\u003e, \u003ci\u003er\u003c/i\u003e) + (\u003ci\u003er\u003c/i\u003e - \u003ci\u003el\u003c/i\u003e + 1)\u003c/span\u003e.\u003c/li\u003e \u003c/ol\u003e\u003ch1\u003e\u003ca href\u003d\"/group/FLVn1Sc504/contest/212952/problem/K\" title\u003d\"VNOI Marathon 2008 - div 1\"\u003e212952K - Hình thoi\u003c/a\u003e\u003c/h1\u003e\u003cp\u003eĐiều kiện cần và đủ để 4 điểm ABCD tạo thành hình thoi:\u003c/p\u003e \u003cul\u003e   \u003cli\u003eTrung điểm 2 đoạn AC và BD trùng nhau.\u003c/li\u003e   \u003cli\u003e2 cạnh AC và BD vuông góc với nhau.\u003c/li\u003e \u003c/ul\u003e\u003cp\u003eVới mỗi cặp 2 điểm \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eA\u003c/i\u003e\u003c/span\u003e, \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eC\u003c/i\u003e\u003c/span\u003e, ta tính toạ độ trung điểm. Vì toạ độ các điểm có giá trị tuyệt đối không quá 50, nên tọa độ trung điểm cũng có giá trị tuyệt đối không quá 50.\u003c/p\u003e\u003cp\u003eGoị trung điểm đoạn \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eAC\u003c/i\u003e\u003c/span\u003e là \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eM\u003c/i\u003e\u003c/span\u003e. Với mỗi điểm \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eM\u003c/i\u003e\u003c/span\u003e, ta lưu lại vector \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eMA\u003c/i\u003e\u003c/span\u003e:\u003c/p\u003e \u003cpre\u003e\u003ccode\u003evector\u0026lt;Point\u0026gt; MA[111][111];  // vector\u0026lt;...\u0026gt; lả kiểu dữ liệu mảng động của C++.\n\nM \u003d (A + C) / 2;\nMA[M.x + 50][M.y + 50].push_back(M - A);\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eSau khi lưu lại tất cả các vector MA tại mỗi điểm M, ta cần đếm số cặp vector vuông góc với nhau tại mỗi điểm M. Ta làm như sau:\u003c/p\u003e \u003cul\u003e   \u003cli\u003eSắp xếp các vector MA theo vòng tròn.\u003c/li\u003e   \u003cli\u003eDùng kĩ thuật 2 con trỏ (2 pointer) để đếm số lượng vector vuông góc.\u003c/li\u003e \u003c/ul\u003e \u003cpre\u003e\u003ccode\u003esort( v.begin(), v.end(), cmp);  // Sắp xếp các vector theo vòng tròn.\n\nint j \u003d 0;  // j \u003d điểm đầu tiên vuông góc với i.\nint k \u003d 0;  // k \u003d điểm cuối cùng vuông góc với i.\nfor(int i\u003d0;i\u0026lt;v.size();++i) {\n    // Đảm bảo j, k \u0026gt;\u003d i\n    j \u003d max(j, i + 1);\n    k \u003d max(k, i + 1);\n\n    // Nếu góc giữa i và j \u0026lt; 90 độ, tăng j.\n    while(j\u0026lt;v.size() \u0026amp;\u0026amp; v[j].x * v[i].x + v[j].y * v[i].y \u0026gt; 0) ++j;\n\n    // Nếu góc giữa i và k \u0026lt;\u003d 90 độ, tăng k.\n    while(k\u0026lt;v.size() \u0026amp;\u0026amp; v[k].x * v[i].x + v[k].y * v[i].y \u0026gt;\u003d 0) ++k;\n    result +\u003d k - j;\n}\n\u003c/code\u003e\u003c/pre\u003e\u003ch1\u003e\u003ca href\u003d\"/group/FLVn1Sc504/contest/212952/problem/L\" title\u003d\"VNOI Marathon 2008 - div 1\"\u003e212952L - Bông hoa kỳ diệu\u003c/a\u003e\u003c/h1\u003e\u003cp\u003eChặt nhị phân kết quả và DFS/BFS để kiểm tra:\u003c/p\u003e\u003cp\u003eGiả sử có \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ek\u003c/i\u003e\u003c/span\u003e cái giỏ\u003c/p\u003e\u003cp\u003eTrạng thái phép chuyển (đỉnh của đồ thị) bao gồm: Trạng thái của hoa, trạng thái của tháp và trạng thái của các giỏ. \u003c/p\u003e\u003cp\u003eGiả sử trạng thái trên hoa là được phủ từ x..y. Để ý là nếu còn thừa giỏ trống thì ta cứ lấy vào cho đủ, vậy là có k cánh đang ở trong giỏ \u003d\u0026gt; trạng có \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003en\u003c/i\u003e - |\u003ci\u003ex\u003c/i\u003e - \u003ci\u003ey\u003c/i\u003e| - \u003ci\u003ek\u003c/i\u003e\u003c/span\u003e (với \u003cspan class\u003d\"tex-span\"\u003e|\u003ci\u003ex\u003c/i\u003e - \u003ci\u003ey\u003c/i\u003e|\u003c/span\u003e là số cánh từ x..y) cánh đang ở trong tháp. Mặt khác tháp được lấy tư trên xuống nên trạng thái các màu trong \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003en\u003c/i\u003e - |\u003ci\u003ex\u003c/i\u003e - \u003ci\u003ey\u003c/i\u003e| - \u003ci\u003ek\u003c/i\u003e\u003c/span\u003e là đã biết, mà màu từ x..y cũng biết nên trạng thái màu trong các giỏ cũng biết. Do đó trạng thái của bài toán có thể xác định chỉ dựa vào 2 số x,y. Đến đây DFS để đánh dấu hết các trạng thái mình có thể đến được để kiểm tra cho chặt nhị phân\u003c/p\u003e\u003ch1\u003e\u003ca href\u003d\"/group/FLVn1Sc504/contest/212952/problem/M\" title\u003d\"VNOI Marathon 2008 - div 1\"\u003e212952M - Đế chế hùng mạnh nhất\u003c/a\u003e\u003c/h1\u003e\u003cp\u003eThông thường hướng làm với bài dạng này sẽ là: ở mỗi nút của cây, ta giải bài toán Knapsack:\u003c/p\u003e \u003cpre\u003e\u003ccode\u003e// u \u003d đỉnh đang DFS\n// fa \u003d cha của u\n// cur \u003d tổng chi phí trên đường đi từ gốc đến u.\nvoid dfs(int u,int fa,int cur)\n{\n    for (int v : ke[u])\n    {\n        if (v\u003d\u003dfa) continue;\n        dfs(v,u,cur+c[u]);\n        for (int k\u003dm-cur;k\u0026gt;\u003dc[u];k--)\n            for (int j\u003d0;j\u0026lt;\u003dk-c[u];j++)\n                f[u][k]\u003dmax(f[u][k],f[u][k-j]+f[v][j]);\n    }\n    for (int i\u003dc[u];i\u0026lt;\u003dm-cur;i++)\n        f[u][i]+\u003dv[u];\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eCách này có đpt là \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eO\u003c/i\u003e(\u003ci\u003eN\u003c/i\u003e * \u003ci\u003eM\u003c/i\u003e\u003csup class\u003d\"upper-index\"\u003e2\u003c/sup\u003e)\u003c/span\u003e (tuy nhiên vẫn có thể AC). Để tăng tốc, thay vì ở mỗi nút ta tính mảng \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e\u003c/span\u003e, ta hình dung là ta sẽ cố gắng duy trì mảng \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e\u003c/span\u003e sao cho là khi ta ở đỉnh \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eu\u003c/i\u003e\u003c/span\u003e, \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e(\u003ci\u003eu\u003c/i\u003e)\u003c/span\u003e lưu kết quả của phần cây đã đi qua trước \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eu\u003c/i\u003e\u003c/span\u003e.\u003c/p\u003e\u003cp\u003eNhư vậy:\u003c/p\u003e \u003cul\u003e   \u003cli\u003eTrước khi gọi DFS(u), ta cần tính \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e(\u003ci\u003eu\u003c/i\u003e)\u003c/span\u003e dựa trên \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e(\u003ci\u003efa\u003c/i\u003e)\u003c/span\u003e.\u003c/li\u003e   \u003cli\u003eSau khi gọi DFS(v), ta cần cập nhật lại \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e(\u003ci\u003eu\u003c/i\u003e)\u003c/span\u003e dựa trên \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e(\u003ci\u003ev\u003c/i\u003e)\u003c/span\u003e.\u003c/li\u003e \u003c/ul\u003e\u003cp\u003eCài đặt như sau:\u003c/p\u003e \u003cpre\u003e\u003ccode\u003evoid dfs(int u, int fa, int cur) {\n    for (int v : ke[u]) {\n        if (v \u003d\u003d fa) continue;\n        for(int j \u003d cur+c[i]; j \u0026lt;\u003d m; j++)\n            f[v][j] \u003d f[u][j - c[i]] + v[i];\n        dfs(v, u, cur + c[i]);\n        for(int j \u003d cur + c[i]; j \u0026lt;\u003d m; j++)\n            f[u][j] \u003d max(f[u][j], f[v][j]);\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eĐộ phức tạp là \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eO\u003c/i\u003e(\u003ci\u003eN\u003c/i\u003e * \u003ci\u003eM\u003c/i\u003e)\u003c/span\u003e.\u003c/p\u003e\u003cp\u003e\u003ca href\u003d\"http://ideone.com/6DgzGB\"\u003eCode\u003c/a\u003e\u003c/p\u003e\u003ch1\u003e\u003ca href\u003d\"/group/FLVn1Sc504/contest/212952/problem/N\" title\u003d\"VNOI Marathon 2008 - div 1\"\u003e212952N - Phòng máy kỳ diệu\u003c/a\u003e\u003c/h1\u003e\u003cp\u003eLời giải: [user:ngkan]\u003c/p\u003e\u003cp\u003eBài này ta sẽ sử dụng luồng mincost, với đồ thị luồng như sau:\u003c/p\u003e \u003cul\u003e   \u003cli\u003e1 đỉnh phát\u003c/li\u003e   \u003cli\u003eNối đỉnh phát với các máy tính bằng các cạnh (1, 0) (nghĩa là capacity \u003d 1, weight \u003d 0).\u003c/li\u003e   \u003cli\u003eVới mỗi máy \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/span\u003e, nối với access point \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ej\u003c/i\u003e\u003c/span\u003e cạnh \u003cspan class\u003d\"tex-span\"\u003e(1, \u003ci\u003ew\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ej\u003c/i\u003e))\u003c/span\u003e.\u003c/li\u003e \u003c/ul\u003e\u003cp\u003eBây giờ vấn đề của ta là xử lý điều kiện số lượng máy kết nối với các access point chênh lệch không quá 1, từ đó cho ta thấy số lượng máy kết nối với mỗi access point không quá \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003efloor\u003c/i\u003e(\u003ci\u003en\u003c/i\u003e / \u003ci\u003ek\u003c/i\u003e)\u003c/span\u003e. Để kiểm soát điều kiện này, ta sẽ sử dụng 2 đỉnh thu, gọi tắt là \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003et\u003c/i\u003e1\u003c/span\u003e và \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003et\u003c/i\u003e2\u003c/span\u003e.\u003c/p\u003e\u003cp\u003eVới mỗi access point \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ej\u003c/i\u003e\u003c/span\u003e, nối cạnh \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003efloor\u003c/i\u003e(\u003ci\u003en\u003c/i\u003e / \u003ci\u003ek\u003c/i\u003e), 0)\u003c/span\u003e đến \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003et\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e1\u003c/sub\u003e\u003c/span\u003e và cạnh \u003cspan class\u003d\"tex-span\"\u003e(1, 0)\u003c/span\u003e đến \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003et\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e2\u003c/sub\u003e\u003c/span\u003e. Còn từ \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003et\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e1\u003c/sub\u003e\u003c/span\u003e nối cạnh \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003efloor\u003c/i\u003e(\u003ci\u003en\u003c/i\u003e / \u003ci\u003ek\u003c/i\u003e) * \u003ci\u003ek\u003c/i\u003e, 0)\u003c/span\u003e đến \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eT\u003c/i\u003e\u003c/span\u003e (đỉnh thu tổng) và \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003et\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e2\u003c/sub\u003e\u003c/span\u003e nối cạnh \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003en\u003c/i\u003e%\u003ci\u003ek\u003c/i\u003e, 0)\u003c/span\u003e đến \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eT\u003c/i\u003e\u003c/span\u003e. Bây giờ chỉ việc chạy nốt luồng mincost là ra kết quả.\u003c/p\u003e\u003cp\u003e\u003cimg alt\u003d\" \" src\u003d\"/predownloaded/10/26/1026fe221ba19817fc61facc33405684f72b9a04.jpg\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e\u003c/p\u003e\u003c/div\u003e","tags":[]}}