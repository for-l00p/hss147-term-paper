{"status":"OK","result":{"originalLocale":"en","allowViewHistory":true,"creationTimeSeconds":1476176756,"rating":36,"authorHandle":"avamsi","modificationTimeSeconds":1490940587,"id":47667,"title":"\u003cp\u003ePyPy Output\u003c/p\u003e","locale":"en","content":"\u003cdiv class\u003d\"ttypography\"\u003e\u003cp\u003eFor some reason, the output is not buffered in PyPy (unlike CPython).\u003cbr /\u003eSo, for problems where you use lots of \u003ccode\u003eprint\u003c/code\u003e statements (especially in loops), unbuffered output has a significant effect on overall run-time performance.\u003c/p\u003e\u003cp\u003eFor example, compare these 2 submissions -- \u003ca href\u003d\"//codeforces.com/contest/631/submission/21354004\"\u003e21354004\u003c/a\u003e, \u003ca href\u003d\"//codeforces.com/contest/631/submission/21354013\"\u003e21354013\u003c/a\u003e.\u003cbr /\u003eBoth solutions are exactly the same except in the latter, \u003ccode\u003estdout\u003c/code\u003e is replaced by a buffer and all the output stored in the buffer is written to original \u003ccode\u003estdout\u003c/code\u003e at the end.\u003c/p\u003e\u003cp\u003e\u003ca href\u003d\"//codeforces.com/contest/631/submission/21354004\"\u003e21354004\u003c/a\u003e times out (1000ms TL) even though everything except buffering is same as \u003ca href\u003d\"//codeforces.com/contest/631/submission/21354013\"\u003e21354013\u003c/a\u003e.\u003cbr /\u003e\u003ca href\u003d\"//codeforces.com/contest/631/submission/21354013\"\u003e21354013\u003c/a\u003e runs in 360ms -- at least 3x faster than the unbuffered solution.\u003c/p\u003e\u003cp\u003eFor explicit buffered output, prefix your code with following code like in \u003ca href\u003d\"//codeforces.com/contest/631/submission/21354013\"\u003e21354013\u003c/a\u003e\u003c/p\u003e \u003cpre\u003e\u003ccode\u003eimport atexit\nimport io\nimport sys\n\nbuff \u003d io.BytesIO()\nsys.stdout \u003d buff\n\n\n@atexit.register\ndef write():\n    sys.__stdout__.write(buff.getvalue())\n\n\n# code\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eEdited template (with unbuffered input), post \u003ca class\u003d\"rated-user user-violet\" href\u003d\"/profile/hellman1908\" title\u003d\"Candidate Master hellman1908\"\u003ehellman1908\u003c/a\u003e\u0027s \u003ca href\u003d\"//codeforces.com/blog/entry/47667?#comment-320135\"\u003ecomment\u003c/a\u003e\u003c/p\u003e \u003cpre\u003e\u003ccode\u003eimport atexit\nimport io\nimport sys\n\n_INPUT_LINES \u003d sys.stdin.read().splitlines()\nraw_input \u003d iter(_INPUT_LINES).next\n_OUTPUT_BUFFER \u003d io.BytesIO()\nsys.stdout \u003d _OUTPUT_BUFFER\n\n\n@atexit.register\ndef write():\n    sys.__stdout__.write(_OUTPUT_BUFFER.getvalue())\n\n\n# code\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["python","python 2","pypy"]}}