{"status":"OK","result":{"originalLocale":"ru","allowViewHistory":false,"creationTimeSeconds":1399660781,"rating":13,"authorHandle":"KonanMentor","modificationTimeSeconds":1399668563,"id":12243,"title":"\u003cp\u003eСуффиксное дерево\u003c/p\u003e","locale":"ru","content":"\u003cdiv class\u003d\"ttypography\"\u003e\u003cp\u003eРешил задачу \u003ca href\u003d\"/contest/427/problem/D\" title\u003d\"Codeforces Round 244 (Div. 2)\"\u003e427D - Match \u0026amp; Catch\u003c/a\u003e с помощью суффиксного дерева. Однако мое решение за \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eO\u003c/i\u003e(\u003ci\u003eN\u003c/i\u003e)\u003c/span\u003e (\u003ca href\u003d\"/contest/427/submission/6579114\" title\u003d\"Submission 6579114 by KonanMentor\"\u003e6579114\u003c/a\u003e) работало дольше, чем решения за \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eO\u003c/i\u003e(\u003ci\u003en\u003c/i\u003e\u003csup class\u003d\"upper-index\"\u003e2\u003c/sup\u003e)\u003c/span\u003e — 717 мс и кушало ~200 мб памяти!\u003c/p\u003e\u003cp\u003eСразу нашелся тест, на котором локально это решение работало долго (около 5,8 секунды!!!):\u003c/p\u003e\u003cp\u003e\u003ccode\u003eaaa...aa\u003c/code\u003e\u003c/p\u003e\u003cp\u003e\u003ccode\u003eaaa...aa\u003c/code\u003e\u003c/p\u003e\u003cp\u003eСтал разбираться. Выяснилось, что по ходу построения дерева, создается ~12,5 млн. позиций в дереве (объект, который указывает на вершину в сжатом боре). Эти объекты я создавал в куче, через \u003cem\u003enew\u003c/em\u003e. Это удобно тем, что можно вернуть указатель на NULL (например, при попытке перехода из вершины по символу).\u003c/p\u003e\u003cp\u003eЯ, конечно, знал, что выделение памяти в куче работает дольше, чем на стеке, но не в 15 же раз! :) Вообще, изначально я хотел избавиться от \u003cem\u003enew\u003c/em\u003e из-за лишнего потребления памяти: в каждой позиции хранится указатель на вершину(4 байта) + номер буквы на ребре(4 байта) * 12,5 млн. \u003cspan class\u003d\"tex-span\"\u003e ≈ \u003c/span\u003e 100 мб.\u003c/p\u003e\u003cp\u003eВ итоге без использования \u003cem\u003enew\u003c/em\u003e мое решение получило AC (\u003ca href\u003d\"/contest/427/submission/6579111\" title\u003d\"Submission 6579111 by KonanMentor\"\u003e6579111\u003c/a\u003e) за \u003cstrong\u003e171 мс\u003c/strong\u003e, при этом потребляя \u003cstrong\u003e2 мб\u003c/strong\u003e памяти.\u003c/p\u003e\u003cp\u003eУ меня только 2 вопроса:\u003c/p\u003e\u003cp\u003eПочему \u003cspan class\u003d\"tex-span\"\u003e200 - 100 \u003d 2\u003c/span\u003e\u003c/p\u003e\u003cp\u003eИ почему локальное время выполнения так сильно отличается от серверного(без \u003cem\u003enew\u003c/em\u003e стало работать быстрее на 1 секунду, но \u003cem\u003e4,8\u003c/em\u003e и \u003cem\u003e0,17\u003c/em\u003e — все же большая разница)\u003c/p\u003e\u003cp\u003eЗаранее спасибо\u003c/p\u003e\u003c/div\u003e","tags":["суффиксные деревья","performance"]}}