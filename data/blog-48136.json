{"status":"OK","result":{"originalLocale":"ru","allowViewHistory":true,"creationTimeSeconds":1478004074,"rating":-3,"authorHandle":"krauch","modificationTimeSeconds":1478004098,"id":48136,"title":"\u003cp\u003eКоличество инверсий\u003c/p\u003e","locale":"ru","content":"\u003cdiv class\u003d\"ttypography\"\u003e\u003cdiv class\u003d\"spoiler\"\u003e\u003cb class\u003d\"spoiler-title\"\u003eSolution\u003c/b\u003e\u003cdiv class\u003d\"spoiler-content\" style\u003d\"display: none;\"\u003e\u003cpre\u003e\u003ccode\u003e/*\n          ______      \n||  //   | _____|   ||  //\n|| //    ||         || //\n||//     ||_____    ||//\n||\\\\     | _____|   ||\\\\\n|| \\\\    ||         || \\\\\n||  \\\\   ||_____    ||  \\\\\n||   \\\\  |______|   ||   \\\\\n                     \n*/\n#include\u0026lt;bits/stdc++.h\u0026gt;\n\nusing namespace std;\nconst int N6 \u003d 1e6 + 6, N3 \u003d 1e3 + 6, oo \u003d  1e9 + 9;\n\ntypedef long long ll;\ntypedef pair \u0026lt;int, int\u0026gt; PII;\ntypedef pair \u0026lt;int, ll\u0026gt; PIl;\ntypedef pair \u0026lt;ll, int\u0026gt; PlI;\ntypedef pair \u0026lt;ll, ll\u0026gt; Pll;\n\n#define F first\n#define S second\n#define mp make_pair\n#define pb push_back    \n#define right(x) x \u0026lt;\u0026lt; 1 | 1\n#define left(x) x \u0026lt;\u0026lt; 1  \n\nint test, a[N6]; \nPlI b[N6];\n\nstruct SegTree{\n    ll sum[N6 * 4];\n\n    void recalc(int v){\n        sum[v] \u003d sum[left(v)] + sum[right(v)];\n    }\n\n    void upd(int v, int tl, int tr, int pos){\n        if(tl \u003d\u003d tr - 1){\n            sum[v]++;\n            return;\n        }\n        int mid \u003d (tl + tr) / 2;\n        if(pos \u0026lt; mid)\n            upd(left(v), tl, mid, pos);\n        else\n            upd(right(v), mid, tr, pos);\n        recalc(v);  \n    }   \n\n    ll get(int v, int tl, int tr, int ql, int qr){\n        if(qr \u0026lt;\u003d tl || tr \u0026lt;\u003d ql)\n            return 0;\n        if(ql \u0026lt;\u003d tl \u0026amp;\u0026amp; tr \u0026lt;\u003d qr)\n            return sum[v];  \n        int mid \u003d (tl + tr) / 2;\n        return get(left(v), tl, mid, ql, qr) + get(right(v), mid, tr, ql, qr);\n    }   \n} t;        \n\nint main(){\n    ios_base :: sync_with_stdio(0);\n    cin.tie();\n\n    freopen(\u0026quot;inverse.in\u0026quot;, \u0026quot;r\u0026quot;, stdin);\n    freopen(\u0026quot;inverse.out\u0026quot;, \u0026quot;w\u0026quot;, stdout);\n\n    int n;                                                  \n    cin \u0026gt;\u0026gt; n;\n    for(int i \u003d 1; i \u0026lt;\u003d n; ++i){\n        cin \u0026gt;\u0026gt; a[i];         \n    }\n    ll ans \u003d 0;\n    for(int i \u003d 1; i \u0026lt;\u003d n; ++i){\n        ans +\u003d t.get(1, 1, 1e6 + 1, a[i] + 1, 1e6 + 1);\n        t.upd(1, 1, 1e6 + 1, a[i]);        \n    }\n\n    cout \u0026lt;\u0026lt; ans \u0026lt;\u0026lt; \u0026quot;\\n\u0026quot;;\n\n    return 0;\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/div\u003e","tags":[]}}