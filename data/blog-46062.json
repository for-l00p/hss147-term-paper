{"status":"OK","result":{"originalLocale":"en","allowViewHistory":false,"creationTimeSeconds":1468661024,"rating":5,"authorHandle":"I_love_Hoang_Yen","modificationTimeSeconds":1468673222,"id":46062,"title":"\u003cp\u003eTH Training 5 — Solutions\u003c/p\u003e","locale":"en","content":"\u003cdiv class\u003d\"ttypography\"\u003e\u003ch1\u003e\u003ca href\u003d\"/group/ThSS9mn0dy/contest/207913/problem/A\" title\u003d\"TH Training 5\"\u003e207913A - Đổi chỗ\u003c/a\u003e\u003c/h1\u003e\u003ch2\u003eDP\u003c/h2\u003e\u003cp\u003eTư tưởng:\u003c/p\u003e \u003cul\u003e   \u003cli\u003eThử mọi phép đổi chỗ: \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eN\u003c/i\u003e\u003csup class\u003d\"upper-index\"\u003e2\u003c/sup\u003e\u003c/span\u003e.\u003c/li\u003e   \u003cli\u003eVới mỗi phép đổi chỗ, đếm số cặp nghịch thế trong \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eO\u003c/i\u003e(1)\u003c/span\u003e.\u003c/li\u003e \u003c/ul\u003e\u003cp\u003eKhởi tạo:\u003c/p\u003e \u003cul\u003e   \u003cli\u003eĐếm số nghịch thế \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eN\u003c/i\u003e\u003csup class\u003d\"upper-index\"\u003e2\u003c/sup\u003e\u003c/span\u003e\u003c/li\u003e   \u003cli\u003e\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ej\u003c/i\u003e)\u003c/span\u003e là số lượng số có chỉ số trong khoảng \u003cspan class\u003d\"tex-span\"\u003e1..\u003ci\u003ej\u003c/i\u003e\u003c/span\u003e mà nhỏ hơn \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eA\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e)\u003c/span\u003e.\u003c/li\u003e \u003c/ul\u003e\u003cp\u003eKhi đổi chỗ, dùng mảng \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e\u003c/span\u003e để tính: phân tích ra những chỗ nào bị thay đổi.\u003c/p\u003e\u003cp\u003e\u003ca href\u003d\"http://ideone.com/awbQ7a\"\u003eCode\u003c/a\u003e\u003c/p\u003e\u003ch1\u003e\u003ca href\u003d\"/group/ThSS9mn0dy/contest/207913/problem/B\" title\u003d\"TH Training 5\"\u003e207913B - Pet detective\u003c/a\u003e\u003c/h1\u003e\u003ch2\u003eXây dựng đồ thị\u003c/h2\u003e\u003cp\u003eMỗi đỉnh gồm:\u003c/p\u003e \u003cul\u003e   \u003cli\u003eĐang chở những thú nào.   \u003cul\u003e     \u003cli\u003eMỗi thú 3 trạng thái: chưa nhặt, chưa trả, đã trả --\u0026gt; số hệ 3\u003c/li\u003e   \u003c/ul\u003e\u003c/li\u003e   \u003cli\u003eĐang ở vị trí nào --\u0026gt; 2 cách   \u003cul\u003e     \u003cli\u003eTọa độ --\u0026gt; 36 vị trí khác nhau\u003c/li\u003e     \u003cli\u003eCon vật / nhà --\u0026gt; 22 vị trí khác nhau\u003c/li\u003e   \u003c/ul\u003e\u003c/li\u003e \u003c/ul\u003e\u003cp\u003eCạnh:\u003c/p\u003e \u003cul\u003e   \u003cli\u003eTừ 1 vị trí đến vị trí cạnh nó --\u0026gt; trọng số \u003d 1\u003c/li\u003e   \u003cli\u003eNhặt 1 thú lên / trả 1 thú về nhà --\u0026gt; trọng số \u003d 0.\u003c/li\u003e \u003c/ul\u003e\u003cp\u003eSau khi có đồ thị, có thể cài bằng Dijkstra hoặc BFS01.\u003c/p\u003e\u003cp\u003eCode:\u003c/p\u003e \u003cul\u003e   \u003cli\u003e\u003ca href\u003d\"http://ideone.com/VxpoWP\"\u003eBFS 01\u003c/a\u003e\u003c/li\u003e   \u003cli\u003e\u003ca href\u003d\"http://ideone.com/TAKYV8\"\u003eDijkstra\u003c/a\u003e\u003c/li\u003e \u003c/ul\u003e\u003ch1\u003e\u003ca href\u003d\"/group/ThSS9mn0dy/contest/207913/problem/C\" title\u003d\"TH Training 5\"\u003e207913C - Mê cung\u003c/a\u003e\u003c/h1\u003e\u003ch2\u003eVòng tròn\u003c/h2\u003e\u003cp\u003eXét vòng tròn. Mỗi cạnh trên vòng tròn có 1 trọng số. Tìm vị trí xuất phát để đi vòng quanh vòng tròn, mà không lúc nào tổng nhỏ hơn 0.\u003c/p\u003e\u003cp\u003eChọn 1 điểm bất kỳ trên vòng tròn làm điểm 1. Đặt \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eS\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e)\u003c/span\u003e là tổng i số đầu tiên. Vẽ đồ thị \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eS\u003c/i\u003e\u003c/span\u003e ra.\u003c/p\u003e\u003cp\u003eNhận thấy nếu ta chuyển điểm xuất phát từ điểm 1 đến điểm \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e, thì đồ thị bị dịch lên hoặc dịch xuống 1 khoảng bằng hiệu \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eS\u003c/i\u003e(1)\u003c/span\u003e và \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eS\u003c/i\u003e(\u003ci\u003ex\u003c/i\u003e)\u003c/span\u003e.\u003c/p\u003e\u003cp\u003eTừ đó có thể thấy, nếu chọn điểm có \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eS\u003c/i\u003e\u003c/span\u003e nhỏ nhất để xuất phát, thì tổng không lúc nào nhỏ hơn 0.\u003c/p\u003e\u003ch2\u003eThuật toán:\u003c/h2\u003e\u003cp\u003eTìm chu trình euler. Sau khi có chu trình euler, bài toán đưa về vòng tròn.\u003c/p\u003e\u003cp\u003e\u003ca href\u003d\"http://ideone.com/66qCHK\"\u003eCode\u003c/a\u003e\u003c/p\u003e\u003ch1\u003e\u003ca href\u003d\"/group/ThSS9mn0dy/contest/207913/problem/D\" title\u003d\"TH Training 5\"\u003e207913D - Nhảy nhảy nhảy\u003c/a\u003e\u003c/h1\u003e\u003cp\u003eĐặt trống \u003d 1, có mèo \u003d 0 --\u0026gt; \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eE\u003c/i\u003e(\u003ci\u003etrống\u003c/i\u003e) \u003d \u003ci\u003eprobability\u003c/i\u003e(\u003ci\u003etrống\u003c/i\u003e)\u003c/span\u003e.\u003c/p\u003e\u003cp\u003eDùng Linearity of Expectation:\u003c/p\u003e \u003cul\u003e   \u003cli\u003e\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eE\u003c/i\u003e(\u003ci\u003etrống\u003c/i\u003e) \u003d \u003ci\u003eSum\u003c/i\u003e(\u003ci\u003eprobability\u003c/i\u003e(\u003ci\u003etrống\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ej\u003c/i\u003e)))\u003c/span\u003e.\u003c/li\u003e \u003c/ul\u003e\u003cp\u003eNhư vậy, bài toán đưa về tính xác suất để ô \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ej\u003c/i\u003e)\u003c/span\u003e là ô trống.\u003c/p\u003e\u003cp\u003eÔ \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ej\u003c/i\u003e)\u003c/span\u003e trống khi tất cả các mèo ở các ô đều không nhảy đến \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ej\u003c/i\u003e)\u003c/span\u003e. Các mèo nhảy độc lập với nhau (independent), do đó:\u003c/p\u003e \u003cul\u003e   \u003cli\u003eXác suất ô \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ej\u003c/i\u003e)\u003c/span\u003e trống\u003c/li\u003e   \u003cli\u003e\u003d tích ( Xác suất mèo bắt đầu từ ô \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003eu\u003c/i\u003e, \u003ci\u003ev\u003c/i\u003e)\u003c/span\u003e không nhảy đến \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ej\u003c/i\u003e)\u003c/span\u003e )\u003c/li\u003e   \u003cli\u003e\u003d tích ( 1 — Xác suất mèo nhảy từ \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003eu\u003c/i\u003e, \u003ci\u003ev\u003c/i\u003e)\u003c/span\u003e đến \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ej\u003c/i\u003e)\u003c/span\u003e ).\u003c/li\u003e \u003c/ul\u003e\u003cp\u003eTừ đó thu được thuật toán QHD đơn giản:\u003c/p\u003e\u003cp\u003e\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e(\u003ci\u003eu\u003c/i\u003e, \u003ci\u003ev\u003c/i\u003e, \u003ci\u003ei\u003c/i\u003e, \u003ci\u003ej\u003c/i\u003e, \u003ci\u003et\u003c/i\u003e)\u003c/span\u003e là xác suất để mèo nhảy từ ô \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003eu\u003c/i\u003e, \u003ci\u003ev\u003c/i\u003e)\u003c/span\u003e đến ô \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ej\u003c/i\u003e)\u003c/span\u003e sau \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003et\u003c/i\u003e\u003c/span\u003e thời gian.\u003c/p\u003e \u003cpre\u003e\u003ccode\u003ef(u, v, t, i, j) \u003d sum( f(u, v, t-1, i\u0027, j\u0027) * 1 / (number of neighbours of (i\u0027, j\u0027) )\n\nwhere (i\u0027, j\u0027) is neighbour of (i, j).\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eVài chú ý:\u003c/p\u003e \u003cul\u003e   \u003cli\u003eĐể giảm bộ nhớ, thì có thể tính độc lập các \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003eu\u003c/i\u003e, \u003ci\u003ev\u003c/i\u003e)\u003c/span\u003e.\u003c/li\u003e   \u003cli\u003eĐể tăng tốc, thì có thể dựa vào tính đối xứng của bảng (chỉ cần tính 1/4 số giá trị).\u003c/li\u003e \u003c/ul\u003e\u003cp\u003e\u003ca href\u003d\"http://ideone.com/DEo5ay\"\u003eCode\u003c/a\u003e\u003c/p\u003e\u003c/div\u003e","tags":[]}}