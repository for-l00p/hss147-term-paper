{"status":"OK","result":{"originalLocale":"en","allowViewHistory":false,"creationTimeSeconds":1405703284,"rating":-24,"authorHandle":"asimali246","modificationTimeSeconds":1405703284,"id":13092,"title":"\u003cp\u003eSegment Tree Horrible Queries.. \u003c/p\u003e","locale":"en","content":"\u003cdiv class\u003d\"ttypography\"\u003e\u003cpre\u003e\u003ccode\u003e#include \u0026lt;iostream\u0026gt;\n#include \u0026lt;cstdio\u0026gt;\n#include \u0026lt;cstdlib\u0026gt;\n#include \u0026lt;cmath\u0026gt;\n#include \u0026lt;set\u0026gt;\n#include \u0026lt;cstring\u0026gt;\n#include \u0026lt;iomanip\u0026gt;\n#include \u0026lt;map\u0026gt;\n#include \u0026lt;algorithm\u0026gt;\n#include \u0026lt;stack\u0026gt;\n#include \u0026lt;queue\u0026gt;\n#include \u0026lt;list\u0026gt;\n#include \u0026lt;string\u0026gt;\n#include \u0026lt;vector\u0026gt;\n#include \u0026lt;new\u0026gt;\n#include \u0026lt;bitset\u0026gt;\n#include \u0026lt;ctime\u0026gt;\n#include \u0026lt;stdint.h\u0026gt;\n#include \u0026lt;unistd.h\u0026gt;\n \n using namespace std;\n\n#define ll long long int\n#define INF 2147483647\n#define PI acos(-1.0)\n#define EPS 1e-9\n \ntemplate \u0026lt;typename X\u0026gt; X gcd(X a, X b){if(!b)return a; else return gcd(b, a%b);}\n \ntypedef vector\u0026lt;int\u0026gt; vi;\ntypedef pair\u0026lt;int, int\u0026gt; ii;\n\nconst int N \u003d 1\u0026lt;\u0026lt;17;\nint tt, n, m, p, q, i, d;\nll t[5*N], c, lazy[5*N];\nvoid update(int, int, int, int, int, ll);\n\nvoid update(int id, int l, int r, int a, int b, ll v){\n\tif(l\u003d\u003da \u0026amp;\u0026amp; r\u003d\u003db){\n\t\tt[id]+\u003d(ll)(r-l+1)*v;\n\t\tlazy[id]+\u003dv;\n\t\treturn;\n\t}\n\tint m\u003d(l+r)\u0026gt;\u0026gt;1;\n\tt[id*2]+\u003dlazy[id]*(ll)(m-l+1);\n\tt[id*2+1]+\u003dlazy[id]*(ll)(r-m);\n\tlazy[id*2]+\u003dlazy[id];\n\tlazy[id*2+1]+\u003dlazy[id];\n\tlazy[id]\u003d0;\n\tif(b\u0026lt;\u003dm)\n\t\tupdate(id*2, l, m, a, b, v);\n\telse\n\tif(a\u0026gt;m)\n\t\tupdate(id*2+1, m+1, r, a, b, v);\n\telse\n\t\tupdate(id*2, l, m, a, m, v), update(id*2+1, m+1, r, m+1, b, v);\n\tt[id]\u003dt[id*2]+t[id*2+1];\n}\nll query(int id, int l, int r, int a, int b){\n\tif(l\u003d\u003da \u0026amp;\u0026amp; r\u003d\u003db){\n\t\treturn t[id];\n\t}\n\tint m\u003d(l+r)\u0026gt;\u0026gt;1;\n\tt[id*2]+\u003dlazy[id]*(ll)(m-l+1);\n\tt[id*2+1]+\u003dlazy[id]*(ll)(r-m);\n\tlazy[id*2]+\u003dlazy[id];\n\tlazy[id*2+1]+\u003dlazy[id];\n\tlazy[id]\u003d0;\n\tif(b\u0026lt;\u003dm)\n\t\treturn query(id*2, l, m, a, b);\n\telse\n\tif(a\u0026gt;m)\n\t\treturn query(id*2+1, m+1, r, a, b);\n\telse\n\t\treturn query(id*2, l, m, a, m)+query(id*2+1, m+1, r, m+1, b);\n}\nint main(){\n\tscanf(\u0026quot;%d\u0026quot;, \u0026amp;tt);\n\twhile(tt--){\n\t\tscanf(\u0026quot;%d %d\u0026quot;, \u0026amp;n, \u0026amp;m);\n\t\tfor(i\u003d1;i\u0026lt;N;++i)\n\t\t\tt[i]\u003dlazy[i]\u003d0;\n\t\twhile(m--){\n\t\t\tscanf(\u0026quot;%d %d %d\u0026quot;, \u0026amp;d, \u0026amp;p, \u0026amp;q);\n\t\t\tif(!d){\n\t\t\t\tscanf(\u0026quot;%lld\u0026quot;, \u0026amp;c);\n\t\t\t\tupdate(1, 1, n, p, q, c);\n\t\t\t}\n\t\t\telse\n\t\t\t\tprintf(\u0026quot;%lld\\n\u0026quot;, query(1, 1, n, p, q));\n\t\t}\n\t}\n\treturn 0;\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eGetting wrong answer. Spoj Question: \u003ca href\u003d\"http://www.spoj.com/problems/HORRIBLE/\"\u003eQuestion\u003c/a\u003e Plzz can anyone help me find the bug!!\u003c/p\u003e\u003c/div\u003e","tags":["segment tree","lazy propagation","horrible queries"]}}