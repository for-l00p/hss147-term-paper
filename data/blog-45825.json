{"status":"OK","result":{"originalLocale":"ru","allowViewHistory":true,"creationTimeSeconds":1467389672,"rating":69,"authorHandle":"popoffka","modificationTimeSeconds":1467389899,"id":45825,"title":"\u003cp\u003eCounting the number of bitmasks in a given array that are submasks of m for every m -- why does this trick work?\u003c/p\u003e","locale":"en","content":"\u003cdiv class\u003d\"ttypography\"\u003e\u003cp\u003eI stumbled upon a problem that can be reduced to the following: given 22-bit masks \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ea\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e1\u003c/sub\u003e, \u003ci\u003ea\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e2\u003c/sub\u003e, ..., \u003ci\u003ea\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003en\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e (\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003en\u003c/i\u003e \u0026lt; 10\u003csup class\u003d\"upper-index\"\u003e6\u003c/sup\u003e\u003c/span\u003e), calculate d[m] \u003d the number of i such that a[i] is a submask of m (i.e. a[i] \u0026amp; m \u003d\u003d a[i]).\u003c/p\u003e\u003cp\u003eThe jury solves it like this:\u003c/p\u003e \u003cpre\u003e\u003ccode\u003efor (int i \u003d 0; i \u0026lt; n; i++) {\n\td[a[i]]++;\n}\n\nfor (int i \u003d 0; i \u0026lt; 22; i++) {\n\tfor (int mask \u003d 0; mask \u0026lt; (1 \u0026lt;\u0026lt; 22); mask++) {\n\t\tif ((mask \u0026amp; (1 \u0026lt;\u0026lt; i)) \u003d\u003d 0) {\n\t\t\td[mask | (1 \u0026lt;\u0026lt; i)] +\u003d d[mask];\n\t\t}\n\t}\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eI came up with a similar idea while trying to solve the problem myself, but discarded it immediately because I felt like it ought to double-count some submasks. I seem to have managed to convince myself that it doesn\u0027t, but I still don\u0027t have an intuitive understanding for why this approach works. Is this some kind of a trick that I don\u0027t know? Or perhaps somebody could just explain the reasoning behind this solution to me?\u003c/p\u003e\u003cp\u003eThanks!\u003c/p\u003e\u003c/div\u003e","tags":["bitmasks","question"]}}