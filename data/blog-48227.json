{"status":"OK","result":{"originalLocale":"en","allowViewHistory":false,"creationTimeSeconds":1478314237,"rating":0,"authorHandle":"I_love_Hoang_Yen","modificationTimeSeconds":1479523562,"id":48227,"title":"\u003cp\u003eSP Training 11 — Solutions\u003c/p\u003e","locale":"en","content":"\u003cdiv class\u003d\"ttypography\"\u003e\u003cp\u003e\u003ca href\u003d\"https://www.youtube.com/watch?v\u003dfnbGmyrdZOU\"\u003eVideo\u003c/a\u003e\u003c/p\u003e\u003ch1\u003e[problem:209855A]\u003c/h1\u003e\u003ch2\u003eNhận xét\u003c/h2\u003e\u003cp\u003eKhông có nhiều số \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e thoả mãn cả \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e - 1\u003c/span\u003e và \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e + 1\u003c/span\u003e đều là số đối xứng.\u003c/p\u003e\u003cp\u003eVí dụ: \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e không thể có tận cùng là 8, vì khi đó \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e - 1\u003c/span\u003e bắt đầu + kết thúc bằng 7 và \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e + 1\u003c/span\u003e bắt đầu + kết thúc bằng 9.\u003c/p\u003e\u003cp\u003eMột số trường hợp thoả mãn:\u003c/p\u003e \u003cul\u003e   \u003cli\u003e\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e \u003d 2, 3, 4, 5...\u003c/span\u003e\u003c/li\u003e   \u003cli\u003e\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e \u003d 10\u003csup class\u003d\"upper-index\"\u003e\u003ci\u003ek\u003c/i\u003e\u003c/sup\u003e\u003c/span\u003e\u003c/li\u003e   \u003cli\u003e\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e \u003d 87779, 89799, ...\u003c/span\u003e\u003c/li\u003e   \u003cli\u003e\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e \u003d 20201, 22221, 20001\u003c/span\u003e\u003c/li\u003e \u003c/ul\u003e\u003cp\u003eĐể tìm được đủ các trường hợp, cách đảm bảo chính xác nhất là duyệt:\u003c/p\u003e \u003cpre\u003e\u003ccode\u003eboolean isPalin(x):\n  while x MOD 10 \u003d\u003d 0:\n    x \u003d x / 10\n  return x \u003d\u003d reverse(x)\n\nfor i \u003d 1 --\u0026gt; 1000111:\n  if isPalin(i-1) AND isPalin(i+1):\n    output i\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eSau khi biết được hết các loại số thoả mãn, ta thấy số lượng số không lớn. Cách đơn giản nhất là sinh tất cả các số thoả mãn, lưu vào 1 mảng rồi chặt nhị phân trên mảng đó.\u003c/p\u003e\u003ch1\u003e[problem:209855B]\u003c/h1\u003e\u003ch2\u003e\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eO\u003c/i\u003e(\u003ci\u003eN\u003c/i\u003e)\u003c/span\u003e\u003c/h2\u003e\u003cp\u003eTrước tiên ta bắt đầu với thuật toán \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eO\u003c/i\u003e(\u003ci\u003eN\u003c/i\u003e)\u003c/span\u003e. Do đề bài yêu cầu đếm, nên rõ ràng ta cần Quy hoạch động.\u003c/p\u003e\u003cp\u003eTư tưởng quy hoạch động của bài này như sau:\u003c/p\u003e \u003cul\u003e   \u003cli\u003eTa cắt đường gấp khúc ra ở sau cột i:\u003c/li\u003e \u003c/ul\u003e\u003cp\u003e\u003cimg alt\u003d\" \" src\u003d\"https://lh3.googleusercontent.com/-ek5zDXB3s-Gx7R3IAl5OPm6LyHORjp3qqCzpZCppplRKsSbN-V0s6rf1rIGMfXsJW8qlVL9om0dX-CuoWGFwBGaT2_upJFbQwQy1Fc5cTKlfKsqpNJ_bIpFeJmJIouvoAQy2whKGolEbce-zsJYOHvCi9eaqNVWH5dH0lRlI6yZH2S8xXyc4H4GYLlaBQHdGq9xAX3neVsYTDPch2oEjXNO3_XwEe90swNBwk08ffSzUNaK5NftbrLwAtTJNpF5bezhEsCBqaTjp9xgYBbWop2ibEAE5RGW_r502o17Sl-JF28ioQe_bjTKw-qN1lfWzhUHl6FQtH5iMPCNOsaj7arltAgE_uLKQKVF2OjTrZBWAxX5_t2TzwOmKABWGhVcXb79K2c7CXFukGaMvvzjpIyBrM4GoS30YS5yTw2wnKAGz2aN3_5ViryLp5gGNBo3RAze4q6STHJeQXRyiR0sky4X5wLdS5GPRGMVcDz2DH9EBMpzQA-5xyTiBxX0B7IYF7Mr9pbJGdxLUCcjt4HLPA5oUp2q_xh4GojPomT29UgEQhPZH-_8JdUu63YNpIP_xuq6NRPio_0nFTyFFpzHZK9QZHFJCrGoXhgI8nAEW-CDRs2G\u003dw378-h430-no\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e\u003c/p\u003e\u003cp\u003eTa nhận thấy ở cột i, ta chỉ cần quan tâm đến những vị trí đang có đường đi thò ra. Từ đó có trạng thái quy hoạchd động gồm:\u003c/p\u003e \u003cul\u003e   \u003cli\u003eCột \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/span\u003e\u003c/li\u003e   \u003cli\u003eNhững hàng nào có đường gấp khúc đang thò ra.\u003c/li\u003e \u003c/ul\u003e\u003cp\u003e\u003cimg alt\u003d\" \" src\u003d\"https://lh3.googleusercontent.com/XpIui9XQ1IjZOyZf2Cx63YeWKrgQ0Ua5HnXtMw7cdgWT8Jbu3QaOgykOmnx-JxkFLF5mh1CCERc-8BJxcPrbFuOU8Xd-kK5tHHZENeRNMtJMnvoY2EpgDh68530KqaNi65NlQn4A0SukT6e8BRJ7DGBodRu5tZkaGbPI3CO5XawvalF9pUy0e1WTedcuuIl_Qhhfz3DG0bpWvqLZY6dosEGaqWfhs7KE79aRpZg9im83CRMiE8DpbNK09_PqB1TFHrt2ezeFHskeqOK6nrJuiImp6xd3efE8hRNxMZigIAiaIIPqxSHXpedyv0VaNhAgTlTR5Q0hIadDI0H6UQSEpKOpuxizMfBfaCsgMv01IgVBvqh5P9TswrCivwXeBnvwVfp0zMvJwSHNVY3ulqlJGZC5pXZebCtskiyO0yCKImRObSkY-GwqQ0GhRHF2Qm4ZXPRwI4SnGDvDj1U5e03QwTNgC3oJ4QlVanR8aqlFpT_MznHFgAIGBkPzkWJN_p5xPII23xvp8452PAEFFJIk7mLMxTxwdBvyvkHFZWIuQcFLISd-LOW2hW7iaXi38gzALolx1Tnhn-PltzTb3QiA-kLrehtFFiqe3UUSk_J5SpVVIXxY\u003dw574-h388-no\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e\u003c/p\u003e\u003cp\u003eĐể chuyển trạng thái quy hoạch động, ta cần vẽ hình để xác định từ trạng thái nào có thể chuyển đến trạng thái nào.\u003c/p\u003e\u003cp\u003e1 cách đảm bảo chính xác là thử đặt tất cả các cặp \u003cspan class\u003d\"tex-span\"\u003e6 * 6\u003c/span\u003e cạnh nhau và thử nối.\u003c/p\u003e\u003cp\u003e\u003cimg alt\u003d\" \" src\u003d\"https://lh3.googleusercontent.com/0enOqGuOCY7Fjqy5-Re07xwAX4Z3fN5hEmCB5AvK2n3jNSr4KkQ7bOh4kV6JGv4U_Z7_V6ESRf9fV3KL11HAIRCvcOrLCJo2BCbfnKsw1qA1FVY5-C2_92kGCiAeiicPym4rDPV9UDdB-6Gpea25T1U50YwLs1f2X3w3JoGfvmDp2_xdJGiahlTsSVAHOLIa1YnaC19NNTtrCsDX_NudIFON-slHdhlppSjW8lLsMLQhpzBtWqnBfBVOzBlr3JdxVkFwybx6VEqUWbW70q68ZgHefC4vbk48qnPka6H3LEo5LfDM_Kla8EOipCAsSjMOGzPgqJCBZ_UcZuorGKl5xopxjeRd72YuNB9-EbVtokx_WxZeBk2TxclYGv1bGnpNZrajhPluc66kc2Xt7b9jAqbP3L_FyywvU-gnagMfzk-KbiD6ex3QW-StnG-FqO3wJaqdIwcQko4cqGb2BE60-01s6xviUl-1EXA-OpiQ9HE3k4VKPn5ebo7wAB8Ut-C8pJRWNqbwe_2uLUwMYXfQ8JeBWf850nSYqTnxabFVRL3xZQgdAw01-jxUnEc9U9R_DsxesE0GCXI6P3tKh2lHBhoynzmvikb7KYWFkF1fGN3UJ1G3\u003dw254-h224-no\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e\u003c/p\u003e\u003cp\u003eNếu khéo léo hơn có thể nhận thấy các trạng thái đối xưng nhau (2 và 3), (4 và 5) có thể tính giống nhau, từ đó giảm số trường hợp cần xét.\u003c/p\u003e\u003ch2\u003eO(logN)\u003c/h2\u003e\u003cp\u003eĐể cải tiến độ phức tạp, ta áp dụng \u003ca href\u003d\"http://vnoi.info/wiki/algo/trick/matrix-multiplication\"\u003eNhân ma trận\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eTừ 1 lớp gồm \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ej\u003c/i\u003e)\u003c/span\u003e, ta tính lớp tiếp theo \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e + 1, \u003ci\u003ej\u003c/i\u003e)\u003c/span\u003e bằng nhân ma trận. Bước khó nhất là vẽ hình đầy đủ để tìm ma trận.\u003c/p\u003e\u003ch1\u003e[problem:209855C]\u003c/h1\u003e\u003cp\u003eĐặt trống \u003d 1, có mèo \u003d 0. \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eE\u003c/i\u003e(\u003ci\u003etrống\u003c/i\u003e) \u003d \u003ci\u003eprobability\u003c/i\u003e(\u003ci\u003etrống\u003c/i\u003e)\u003c/span\u003e.\u003c/p\u003e\u003cp\u003eDùng Linearity of Expectation:\u003c/p\u003e\u003cp\u003e\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eE\u003c/i\u003e(\u003ci\u003etrống\u003c/i\u003e) \u003d \u003ci\u003eSum\u003c/i\u003e(\u003ci\u003eprobability\u003c/i\u003e(\u003ci\u003etrống\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ej\u003c/i\u003e)))\u003c/span\u003e.\u003c/p\u003e\u003cp\u003eNhư vậy, bài toán đưa về tính xác suất để ô \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ej\u003c/i\u003e)\u003c/span\u003e là ô trống.\u003c/p\u003e\u003cp\u003eÔ \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ej\u003c/i\u003e)\u003c/span\u003e trống khi tất cả các mèo ở các ô đều không nhảy đến \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ej\u003c/i\u003e)\u003c/span\u003e. Các mèo nhảy độc lập với nhau (independent), do đó:\u003c/p\u003e\u003cp\u003eXác suất ô \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ej\u003c/i\u003e)\u003c/span\u003e trống\u003c/p\u003e\u003cp\u003e\u003d tích ( Xác suất mèo bắt đầu từ ô \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003eu\u003c/i\u003e, \u003ci\u003ev\u003c/i\u003e)\u003c/span\u003e không nhảy đến \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ej\u003c/i\u003e)\u003c/span\u003e ) \u003d tích ( 1 — Xác suất mèo nhảy từ \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003eu\u003c/i\u003e, \u003ci\u003ev\u003c/i\u003e)\u003c/span\u003e đến \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ej\u003c/i\u003e)\u003c/span\u003e ).\u003c/p\u003e\u003cp\u003eTừ đó thu được thuật toán QHD đơn giản:\u003c/p\u003e\u003cp\u003e\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e(\u003ci\u003eu\u003c/i\u003e, \u003ci\u003ev\u003c/i\u003e, \u003ci\u003ei\u003c/i\u003e, \u003ci\u003ej\u003c/i\u003e, \u003ci\u003et\u003c/i\u003e)\u003c/span\u003e là xác suất để mèo nhảy từ ô \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003eu\u003c/i\u003e, \u003ci\u003ev\u003c/i\u003e)\u003c/span\u003e đến ô \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ej\u003c/i\u003e)\u003c/span\u003e sau \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003et\u003c/i\u003e\u003c/span\u003e thời gian.\u003c/p\u003e \u003cpre\u003e\u003ccode\u003ef(u, v, t, i, j) \u003d sum( f(u, v, t-1, i\u0027, j\u0027) * 1 / (number of neighbours of (i\u0027, j\u0027) )\n\nwhere (i\u0027, j\u0027) is neighbour of (i, j).\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eĐể giảm bộ nhớ, thì có thể tính độc lập các \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003eu\u003c/i\u003e, \u003ci\u003ev\u003c/i\u003e)\u003c/span\u003e.\u003c/p\u003e\u003cp\u003eĐể tăng tốc, thì có thể dựa vào tính đối xứng của bảng (chỉ cần tính 1/4 số giá trị).\u003c/p\u003e\u003c/div\u003e","tags":[]}}