{"status":"OK","result":{"originalLocale":"ru","allowViewHistory":false,"creationTimeSeconds":1430470788,"rating":0,"authorHandle":"PERNEKHAN","modificationTimeSeconds":1430470788,"id":17653,"title":"\u003cp\u003eC. Хорошие подстрочки\u003c/p\u003e","locale":"ru","content":"\u003cdiv class\u003d\"ttypography\"\u003e\u003cpre\u003e\u003ccode\u003e#include \u0026lt;iostream\u0026gt;\n#include \u0026lt;cstdio\u0026gt;\n#include \u0026lt;cstdlib\u0026gt;\n#include \u0026lt;algorithm\u0026gt;\n#include \u0026lt;cstring\u0026gt;\n#include \u0026lt;string\u0026gt;\n\n\nusing namespace std;\n\nint k;\nchar s[1555], bad[26];\nint to[26][1555*1555];\nint slen;\nint sz \u003d 1;\nint ans;\n\nvoid add(char *s, int len){\n    int cur \u003d 0;\n    for (int i\u003d0;i\u0026lt;len;i++){\n        int c \u003d s[i] - \u0027a\u0027;\n        if ( to[c][cur] \u003d\u003d -1 )\n            to[c][cur] \u003d sz++;\n        cur \u003d to[c][cur];              \n    }\n}\n\nvoid dfs(int v, int sum){\n    if ( sum \u0026gt; k ) return;\n    ans++;\n    for (int c\u003d0;c\u0026lt;26;c++){\n        if ( to[c][v] \u003d\u003d -1 ) continue;\n        dfs(to[c][v], sum + (bad[c]\u003d\u003d\u00270\u0027) );\n    }\n}\n\nint main(){\n    scanf(\u0026quot;%s\\n\u0026quot;, s);\n    scanf(\u0026quot;%s\\n\u0026quot;, bad);\n    scanf(\u0026quot;%d\u0026quot;, \u0026amp;k);\n    memset(to, -1, sizeof(to));\n    int slen \u003d strlen(s);\n    for (int i\u003d0;i\u0026lt;slen;i++){\n        add(s+i, slen - i);\n    }\n    dfs(0, 0);\n    printf(\u0026quot;%d\u0026quot;, ans - 1);\n    return 0;\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["бор дерево","строки"]}}