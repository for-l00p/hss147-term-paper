{"status":"OK","result":{"originalLocale":"en","allowViewHistory":true,"creationTimeSeconds":1468631745,"rating":-1,"authorHandle":"helenawang","modificationTimeSeconds":1468631786,"id":46058,"title":"\u003cp\u003eTime limit exceeded of segment tree\u003c/p\u003e","locale":"en","content":"\u003cdiv class\u003d\"ttypography\"\u003e\u003cp\u003eWhen I tried to solve this problem \u003ca href\u003d\"/contest/689/problem/D\" title\u003d\"Codeforces Round 361 (Div. 2)\"\u003e689D - Friends and Subsequences\u003c/a\u003e using a segment tree to retrieve the max or min value in a interval, I got time limit exceeded.\u003cbr /\u003e Then I analyze the time cost, it takes n iterations to enumerate each left end of a candidate interval, and in each iteration, as the editorial says, I use binary search to find the boundaries of the right end, rmin and rmax respectively, which takes 2*logn. Then for each probe in binary search, we need to get the max and min value of interval, which takes O(logn) if use a segment tree. In a word, the total time cost is n*2logn*logn \u003d n*(logn*logn*2).\u003cbr /\u003e This is the code I got TLE in test 7. \u003ca href\u003d\"/contest/689/submission/19107380\" title\u003d\"Submission 19107380 by helenawang\"\u003e19107380\u003c/a\u003e\u003cbr /\u003e I tried to test how much time it takes then I found that it has already takes 1700ms when my program only reach the n/2th iteration. So I have to use a more efficient data structure.\u003cbr /\u003e Then I use sparse table, which will take O(nlogn) time to make the table, and only O(1) to a range query. So the total time is n*logn+n \u003d n*(logn+1). When logn \u0026gt;\u0026gt; 1, this is better than segment tree in range query.\u003cbr /\u003e This is the code accepted.\u003ca href\u003d\"/contest/689/submission/19139390\" title\u003d\"Submission 19139390 by helenawang\"\u003e19139390\u003c/a\u003e\u003c/p\u003e\u003c/div\u003e","tags":["data structure"]}}