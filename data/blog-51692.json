{"status":"OK","result":{"originalLocale":"ru","allowViewHistory":true,"creationTimeSeconds":1493027382,"rating":0,"authorHandle":"elena","modificationTimeSeconds":1493027382,"id":51692,"title":"\u003cp\u003eИсключительные ситуации\u003c/p\u003e","locale":"ru","content":"\u003cdiv class\u003d\"ttypography\"\u003e\u003cp\u003eКод примера, который приводился на лекции о создании собственных исключительных ситуаций. На лекции была несколько сокращённая версия, сейчас — полная.\u003c/p\u003e \u003cpre\u003e\u003ccode\u003e\u003cbr /\u003eimport java.util.Scanner;\n\npublic class MyException {\n\n\tpublic static void main(String[] args) {\n\t\tDemoTimeException dte \u003d new DemoTimeException();\n\t\tdte.test();\n\t}\n\n}\n\n\nclass TimeParseException extends Exception {\n\t\n\tprivate static final long serialVersionUID \u003d 1L;\n\n\tpublic TimeParseException(String msg){\n\t\tsuper(msg);\n\t}\n\t\n\tpublic TimeParseException(String msg, int pos){\n\t\tsuper(msg + \u0026quot; at \u0026quot; + pos + \u0026quot; position\u0026quot;);\n\t}\n\t\n\tpublic TimeParseException(String msg, int pos, int val){\n\t\tsuper(msg + \u0026quot; \u0026quot; + val + \u0026quot; started at \u0026quot; + pos + \u0026quot; position\u0026quot;);\n\t}\n\t\n}\n\nclass TimeReader {\n\t\n\tTimeReader(String stime){\n\t\ttimestring \u003d stime;\n\t\thh \u003d mm \u003d ss \u003d -1;\n\t}\n\t\n\tvoid parse() throws TimeParseException {\n\t\tif (timestring.length() \u0026gt; TSIZE) \n\t\t\tthrow new TimeParseException(\u0026quot;time format is: HH:MM:SS, this string is too long\u0026quot;);\n\t\t\n\t\tif (timestring.length() \u0026lt; TSIZE) \n\t\t\tthrow new TimeParseException(\u0026quot;time format is: HH:MM:SS, this string is too short\u0026quot;);\n\t\t\n\t\tint first \u003d (int) timestring.charAt(0) - ZERO;\n\t\tif (!((0 \u0026lt;\u003d first) \u0026amp;\u0026amp; (first \u0026lt;\u003d 2)))\n\t\t\tthrow new TimeParseException(\u0026quot;hour must be in 0..24 interval, but wrong symbol\u0026quot;, 1);\n\t\t\n\t\tint second \u003d (int)timestring.charAt(1) - ZERO;\n\t\tif (!(0 \u0026lt;\u003d second) \u0026amp;\u0026amp; (second \u0026lt;\u003d 9))\n\t\t\tthrow new TimeParseException(\u0026quot;hour must be in 0..24 interval, but wrong symbol\u0026quot;, 2);\n\t\t\n\t\thh \u003d first * 10 + second;\n\t\tif (!((0 \u0026lt;\u003d hh) \u0026amp;\u0026amp; (hh \u0026lt;\u003d 23)))\n\t\t\tthrow new TimeParseException(\u0026quot;hour must be in 0..24 interval, but value wrong: \u0026quot;, 1, hh);\n\t\t\n\t\thm \u003d timestring.charAt(2);\n\t\tif (hm !\u003d COLON)\n\t\t\tthrow new TimeParseException(\u0026quot;hours and minutes must be divided with colon, but wrong symbol \u0026quot;, 3);\n\t\t\n\t\tfirst \u003d (int) timestring.charAt(3) - ZERO;\n\t\tif (!((0 \u0026lt;\u003d first) \u0026amp;\u0026amp; (first \u0026lt;\u003d 5)))\n\t\t\tthrow new TimeParseException(\u0026quot;minutes must be in 0..59 interval, but wrong symbol\u0026quot;, 4);\n\t\t\n\t\tsecond \u003d (int)timestring.charAt(4) - ZERO;\n\t\tif (!((0 \u0026lt;\u003d second) \u0026amp;\u0026amp; (second \u0026lt;\u003d 9)))\n\t\t\tthrow new TimeParseException(\u0026quot;minutes must be in 0..59 interval, but wrong symbol\u0026quot;, 5);\n\t\t\n\t\tmm \u003d first * 10 + second;\n\t\tif (!((0 \u0026lt;\u003d mm) \u0026amp;\u0026amp; (mm \u0026lt;\u003d 59)))\n\t\t\tthrow new TimeParseException(\u0026quot;minutes must be in 0..59 interval, but value wrong: \u0026quot;, 4, mm);\n\t\t\n\t\tms \u003d timestring.charAt(5);\n\t\tif (ms !\u003d COLON)\n\t\t\tthrow new TimeParseException(\u0026quot;colon must be between minutes and seconds, but wrong symbol\u0026quot;, 6);\n\n\t\tfirst \u003d (int) timestring.charAt(6) - ZERO;\n\t\tif (!((0 \u0026lt;\u003d first) \u0026amp;\u0026amp; (first \u0026lt;\u003d 5)))\n\t\t\tthrow new TimeParseException(\u0026quot;seconds must be in 0..59 interval, but wrong symbol\u0026quot;, 7);\n\t\t\n\t\tsecond \u003d (int)timestring.charAt(7) - ZERO;\n\t\tif (!((0 \u0026lt;\u003d second) \u0026amp;\u0026amp; (second \u0026lt;\u003d 9)))\n\t\t\tthrow new TimeParseException(\u0026quot;seconds must be in 0..59 interval, but wrong symbol\u0026quot;, 8);\n\t\t\n\t\tss \u003d first * 10 + second;\n\t\tif (!(0 \u0026lt;\u003d mm) \u0026amp;\u0026amp; (mm \u0026lt;\u003d 59))\n\t\t\tthrow new TimeParseException(\u0026quot;seconds must be in 0..59 interval, but value wrong: \u0026quot;, 7, ss);\n\t\t\n\t}\n\t\n\tpublic String toString(){\n\t\tString res \u003d ((hh \u0026lt; 10)? \u0026quot;0\u0026quot;: \u0026quot;\u0026quot;) + hh  + \u0026quot; hrs \u0026quot; \n\t\t\t\t\t+ ((mm \u0026lt; 10)? \u0026quot;0\u0026quot;: \u0026quot;\u0026quot;) + mm + \u0026quot; min \u0026quot; + ((ss \u0026lt; 10)? \u0026quot;0\u0026quot;: \u0026quot;\u0026quot;) + ss + \u0026quot; sec \u0026quot;;\n\t\tif (ss \u003d\u003d -1){\n\t\t\tres \u003d \u0026quot;Input data \u0026quot; + timestring + \u0026quot; does not parse as correct time\u0026quot;;\n\t\t}\n\t\treturn res;\n\t}\n\t\n\tString timestring;\n\tint hh;\n\tint mm;\n\tint ss;\n\tchar hm;\n\tchar ms;\n\t\n\tstatic final int ZERO \u003d (int)\u00270\u0027;\n\tstatic final int TSIZE \u003d 8;\n\tstatic final char COLON \u003d \u0027:\u0027;\n}\n\nclass DemoTimeException {\n\t\n\tvoid test() {\n\t\tTimeReader tr;\n\t\t\n\t\tfor (String s: ts){\n\t\t\ttr \u003d new TimeReader(s);\n\t\t\ttry {\n\t\t\t\ttr.parse();\n\t\t\t}\n\t\t\tcatch (TimeParseException ex){\n\t\t\t\tSystem.out.println(ex.getMessage());\n\t\t\t}\n\t\t\tfinally {\n\t\t\t\tSystem.out.println(tr);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t\n\tString [] ts \u003d {\u0026quot;23:04:59\u0026quot;, \u0026quot;32:56:21\u0026quot;, \u0026quot;00:00:00\u0026quot;, \u0026quot;01:23:5\u0026quot;, \u0026quot;02 24 56\u0026quot;, \u0026quot;*3:51:22\u0026quot;, \u0026quot;14:5f:dc\u0026quot;, \n\t\t\t\u0026quot;14:65:32\u0026quot;, \u0026quot;14:42:74\u0026quot;};\n\t\n}\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["java","exceptions"]}}