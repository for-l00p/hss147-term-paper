{"status":"OK","result":{"originalLocale":"ru","allowViewHistory":false,"creationTimeSeconds":1398524912,"rating":8,"authorHandle":"KonanMentor","modificationTimeSeconds":1398526527,"id":11967,"title":"\u003cp\u003eВставка ключевых значений\u003c/p\u003e","locale":"ru","content":"\u003cdiv class\u003d\"ttypography\"\u003e\u003cp\u003eНаписал \u003ca href\u003d\"http://pastebin.com/h0DsCbgS\"\u003eрешение\u003c/a\u003e(\u003ca href\u003d\"/gym/100100/submission/6479167\" title\u003d\"Submission 6479167 by KonanMentor\"\u003e6479167\u003c/a\u003e) на задачу \u0026quot;Вставка ключевых значений\u0026quot;(Тренировка СПбГУ B #10 Декартово дерево Light), у которого асимптотика \u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/d7/22/d7220111028e75a7b62ce13361279966ae1b9828.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e, но, видимо, с громадной константной, ибо TL 37.\u003c/p\u003e\u003cp\u003eРешение заключается в следующем: будем честно хранить несуществующие элементы в виде нулей, а также запомним их позиции. Т.е. сначала у нас будет декартово дерево по неявному ключу с M нулями и set с их позициями(1, 2 ... M).\u003c/p\u003e\u003cp\u003eТеперь, чтобы обработать Insert(i, k), мы найдем в сете позицию самого первого нуля, начиная с i-той позиции, и, если такая позиция существует, удалим его из сета и декартова дерева. Осталось только вставить k на позицию i.\u003c/p\u003e\u003cp\u003eТакое решение валится тестом\u003c/p\u003e \u003cpre\u003e\u003ccode\u003e131072 131072\n1 1 1 ... 1 1 1\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eНа нем у меня работает 5,5 секунды\u003c/p\u003e\u003cp\u003eЭто у меня руки кривые, или существует более адекватное решение?\u003c/p\u003e\u003c/div\u003e","tags":["декартово дерево"]}}