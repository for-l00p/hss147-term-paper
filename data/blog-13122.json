{"status":"OK","result":{"originalLocale":"en","allowViewHistory":false,"creationTimeSeconds":1405883326,"rating":7,"authorHandle":"mbrc","modificationTimeSeconds":1405883326,"id":13122,"title":"\u003cp\u003e2D Segment Tree implementation\u003c/p\u003e","locale":"en","content":"\u003cdiv class\u003d\"ttypography\"\u003e\u003cp\u003eI am trying to learn 2D Segment trees, and I\u0027m having problems implementing it. Especially when there are 2 points with same y-coordinate. Actually, the approach is to make a segment tree on the x-coordinates, and for the node with x-range [x1,x2] keep a segment tree with all y such that there exists a point (X,y) with x1\u0026lt;\u003dX\u0026lt;\u003dx2. Now suppose we have to update points and find maximums in a rectangle. So if I have to update point (X,Y), I go to the leaf with range [X,X], update the Y in its segment tree. But if I then come up to the parent, and try to update Y in its seg tree too, then I won\u0027t make any difference between two different points in that range with same y-coordinate Y. Please tell me if I\u0027m incorrect, and correct me. And please provide me with a clean implementation of 2D segment trees, if you can.\u003c/p\u003e\u003cp\u003eIf you want a clean formulation, here it is:\u003c/p\u003e\u003cp\u003eGiven N (N\u0026lt;10^5) points each with an associated value, and Q queries (Q\u0026lt;10^5), each either a query or an update. The update operation gives you x,y,k and asks you to update the value at point (x,y) to k. The query operation gives you x1,y1,x2,y2 and asks you for the maximum in the rectangle (x1,y1)-(x2,y2). The update points are among the initially given points.\u003c/p\u003e\u003c/div\u003e","tags":["data structures","segment tree","implementation"]}}