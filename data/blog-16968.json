{"status":"OK","result":{"originalLocale":"ru","allowViewHistory":false,"creationTimeSeconds":1426441228,"rating":25,"authorHandle":"MikeMirzayanov","modificationTimeSeconds":1426447706,"id":16968,"title":"\u003cp\u003eРазбор задач VK Cup 2015 — Квалификация 2\u003c/p\u003e","locale":"ru","content":"\u003cdiv class\u003d\"ttypography\"\u003e\u003ch2\u003e\u003ca href\u003d\"/contest/523/problem/A\" title\u003d\"VK Cup 2015 - Qualification Round 2\"\u003e523A - Rotate, Flip and Zoom\u003c/a\u003e\u003c/h2\u003e\u003cp\u003eЭто была несложная задача на технику работы с двумерными массивами. Для решения задачи можно было честно последовательно проделать все три операции или заметить, что первые две (поворот + отражение) совместно дают простую транспозицию (отражение относительно главной диагонали, когда клетка с координатами (\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ej\u003c/i\u003e\u003c/span\u003e) отображается на клетку с координатами (\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ej\u003c/i\u003e, \u003ci\u003ei\u003c/i\u003e\u003c/span\u003e)). Поэтому для вывода ответа было достаточно сделать два цикла (используется 0-индексация и псевдоязык):\u003c/p\u003e \u003cpre\u003e\u003ccode\u003efor i \u003d [0...2*a-1] begin\n  for j \u003d [0...2*b-1] begin\n    print(a[i / 2][j / 2])\n  end\n  вывести перевод строки\nend\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eПример решения: \u003ca href\u003d\"/contest/523/submission/10286345\" title\u003d\"Submission 10286345 by MSTU Stankin: Secret Password\"\u003e10286345\u003c/a\u003e.\u003c/p\u003e\u003ch2\u003e\u003ca href\u003d\"/contest/523/problem/B\" title\u003d\"VK Cup 2015 - Qualification Round 2\"\u003e523B - Mean Requests\u003c/a\u003e\u003c/h2\u003e\u003cp\u003eПодсчет приближенного среднего подробно описан в условии задачи (даже приведен псевдокод). В самом деле при его подсчете надо было просто следовать описанным правилам подсчета.\u003c/p\u003e\u003cp\u003eДля подсчета среднего на отрезках длины \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eT\u003c/i\u003e\u003c/span\u003e достаточно знать значение суммы элементов на отрезках длины \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eT\u003c/i\u003e\u003c/span\u003e (для получения среднего надо просто значение суммы делить на \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eT\u003c/i\u003e\u003c/span\u003e). Если это делать наивным способом, подсчитывая сумму каждый раз в цикле заново, то получается неэффективный медленный алгоритм. В самом деле, при \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eT\u003c/i\u003e \u003d \u003ci\u003en\u003c/i\u003e / 2\u003c/span\u003e и наборе из \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003em\u003c/i\u003e \u003d \u003ci\u003en\u003c/i\u003e\u003c/span\u003e запросов \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003en\u003c/i\u003e / 2 + 1, \u003ci\u003en\u003c/i\u003e / 2 + 2, ..., \u003ci\u003en\u003c/i\u003e\u003c/span\u003e такой алгоритм суммарно выполнит около \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003en\u003c/i\u003e\u003csup class\u003d\"upper-index\"\u003e2\u003c/sup\u003e / 4\u003c/span\u003e действий. Для заданного максимального значения \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003en\u003c/i\u003e\u003c/span\u003e эта величина будет слишком большой для вычисления в 4 секунды.\u003c/p\u003e\u003cp\u003eДля ускорения подсчета суммы на отрезках длины \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eT\u003c/i\u003e\u003c/span\u003e можно либо поддерживать эту сумму, тогда при перемещении старта такого отрезка с индекса \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/span\u003e на индекс \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ei\u003c/i\u003e + 1\u003c/span\u003e сумма изменяется следующим образом: \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003esum\u003c/i\u003e:  \u003d \u003ci\u003esum\u003c/i\u003e - \u003ci\u003ea\u003c/i\u003e[\u003ci\u003ei\u003c/i\u003e] + \u003ci\u003ea\u003c/i\u003e[\u003ci\u003ei\u003c/i\u003e + \u003ci\u003eT\u003c/i\u003e]\u003c/span\u003e. Таким образом, пересчет суммы от предыдущего положения старта отрезка до нового будет работать за одну формулу (ограниченное сверху некоторой константой количество действий).\u003c/p\u003e\u003cp\u003eВторой вариант как быстро находить суммы на отрезках состоит в подсчете вспомогательного массива частичных сумм. Пусть \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eb\u003c/i\u003e[\u003ci\u003ei\u003c/i\u003e]\u003c/span\u003e — сумма первых \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/span\u003e элементов массива \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ea\u003c/i\u003e\u003c/span\u003e. Тогда сумма элементов массива \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ea\u003c/i\u003e\u003c/span\u003e на отрезке от \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003el\u003c/i\u003e\u003c/span\u003e до \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003er\u003c/i\u003e\u003c/span\u003e равна \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eb\u003c/i\u003e[\u003ci\u003er\u003c/i\u003e + 1] - \u003ci\u003eb\u003c/i\u003e[\u003ci\u003el\u003c/i\u003e]\u003c/span\u003e (если массив \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ea\u003c/i\u003e\u003c/span\u003e 0-индексирован). Подсчет массива \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eb\u003c/i\u003e\u003c/span\u003e можно осуществить за один проход слева направо по формуле \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eb\u003c/i\u003e[\u003ci\u003ei\u003c/i\u003e] \u003d \u003ci\u003eb\u003c/i\u003e[\u003ci\u003ei\u003c/i\u003e - 1] + \u003ci\u003ea\u003c/i\u003e[\u003ci\u003ei\u003c/i\u003e - 1]\u003c/span\u003e.\u003c/p\u003e\u003cp\u003eПример решения: \u003ca href\u003d\"/contest/523/submission/10291184\" title\u003d\"Submission 10291184 by CtrlAlt\"\u003e10291184\u003c/a\u003e.\u003c/p\u003e\u003ch2\u003e\u003ca href\u003d\"/contest/523/problem/C\" title\u003d\"VK Cup 2015 - Qualification Round 2\"\u003e523C - Name Quest\u003c/a\u003e\u003c/h2\u003e\u003cp\u003eНаивный способ решения задачи (перебрать разрез и проверить \u0026quot;хорошесть\u0026quot; каждого из них) работает за квадратичное время и недостаточно эффективен, чтобы решение прошло.\u003c/p\u003e\u003cp\u003eПосчитаем две позиции:\u003c/p\u003e \u003cul\u003e   \u003cli\u003eтакую минимальную позицию \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003el\u003c/i\u003e\u003c/span\u003e, что подстрока \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003et\u003c/i\u003e[1..\u003ci\u003el\u003c/i\u003e]\u003c/span\u003e хорошая, тогда очевидно, что любой разрез за позицией \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003el\u003c/i\u003e\u003c/span\u003e будет таким, что левая часть \u0026quot;хорошая\u0026quot;,\u003c/li\u003e   \u003cli\u003eтакую максимальную позицию \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003er\u003c/i\u003e\u003c/span\u003e, что подстрока \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003et\u003c/i\u003e[\u003ci\u003er\u003c/i\u003e..|\u003ci\u003et\u003c/i\u003e|]\u003c/span\u003e хорошая, тогда очевидно, что любой разрез перед позицией \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003er\u003c/i\u003e\u003c/span\u003e будет таким, что правая часть \u0026quot;хорошая\u0026quot;.\u003c/li\u003e \u003c/ul\u003e\u003cp\u003eКаждую из величин \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003el\u003c/i\u003e\u003c/span\u003e и \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003er\u003c/i\u003e\u003c/span\u003e можно найти жадным образом просто итерируясь до вхождения очередной буквы и продолжая поиск следующей. Вот пример возможного кода для поиска \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003el\u003c/i\u003e\u003c/span\u003e:\u003c/p\u003e \u003cpre\u003e\u003ccode\u003ej :\u003d 1\nfor i :\u003d 1 to |t|\n    if j \u0026lt;\u003d |s| \u0026amp;\u0026amp; s[j] \u003d\u003d t[i]\n        j \u003d j + 1\n        if j \u003d |s| + 1\n            l :\u003d i\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eДля того, чтобы после разреза обе части содержали \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003es\u003c/i\u003e\u003c/span\u003e необходимо и достаточно, чтобы разрез проходил между \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003el\u003c/i\u003e\u003c/span\u003e и \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003er\u003c/i\u003e\u003c/span\u003e. Таким образом, ответ равен \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003er\u003c/i\u003e - \u003ci\u003el\u003c/i\u003e\u003c/span\u003e или 0, если \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003el\u003c/i\u003e\u003c/span\u003e или \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003er\u003c/i\u003e\u003c/span\u003e не нашлось или \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003er\u003c/i\u003e \u0026lt; \u003ci\u003el\u003c/i\u003e\u003c/span\u003e.\u003c/p\u003e\u003ch2\u003e\u003ca href\u003d\"/contest/523/problem/D\" title\u003d\"VK Cup 2015 - Qualification Round 2\"\u003e523D - Statistics of Recompressing Videos\u003c/a\u003e\u003c/h2\u003e\u003cp\u003eДля эффективной реализации алгоритма моделирования процесса необходимо хранить в какой-то структуре \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eh\u003c/i\u003e\u003c/span\u003e отсортированные моменты освобождения каждого из серверов. Сначала \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eh\u003c/i\u003e\u003c/span\u003e состоит \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ek\u003c/i\u003e\u003c/span\u003e единиц.\u003c/p\u003e\u003cp\u003eБудем обрабатывать ролики последовательно в хронологическом порядке. Для того, чтобы начать обрабатывать очередной \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/span\u003e-й надо дождаться освобождения какого-либо сервера. Пусть ролик приходит в момент \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003es\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e и имеет длительность \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003et\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e. \u003c/p\u003e\u003cp\u003eОчевидно, что можно ждать освобождения до первого из моментов из \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eh\u003c/i\u003e\u003c/span\u003e (так как первый — минимальный). Возможно, что дожидаться в явном виде и не надо, так как сервер уже освобождается к моменту \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003es\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e, в любом случае можно считать, что ролик надо отправить на первый из серверов, который освободиться. Пусть минимальный элемент из \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eh\u003c/i\u003e\u003c/span\u003e равен \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eh\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e0\u003c/sub\u003e\u003c/span\u003e, тогда ролик начнется обрабатываться в момент \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003emax\u003c/i\u003e(\u003ci\u003eh\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e0\u003c/sub\u003e, \u003ci\u003es\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e)\u003c/span\u003e, а закончит к моменту \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003emax\u003c/i\u003e(\u003ci\u003eh\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e0\u003c/sub\u003e, \u003ci\u003es\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e) + \u003ci\u003et\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e. Для поддержания структуры \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eh\u003c/i\u003e\u003c/span\u003e надо исключить из нее \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eh\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e0\u003c/sub\u003e\u003c/span\u003e и добавить \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003emax\u003c/i\u003e(\u003ci\u003eh\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e0\u003c/sub\u003e, \u003ci\u003es\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e) + \u003ci\u003et\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e. Таким образом, в \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eh\u003c/i\u003e\u003c/span\u003e по прежнему будут все моменты освобождения серверов.\u003c/p\u003e\u003cp\u003eДля того, чтобы решения быстро работали, \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eh\u003c/i\u003e\u003c/span\u003e надо хранить в подходящей структуре данных. Это может быть очередь с приоритетами (тогда минимум будет в голове), либо в упорядоченном множестве. Так как в \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eh\u003c/i\u003e\u003c/span\u003e могут быть равные элементы, то эта структура либо должна работать с одинаковыми элементами (как очередь с приоритетами или мультимножество по типу \u003ccode\u003estd::multiset\u003c/code\u003e в C++) или надо в структуре хранить пары (\u003ccode\u003eмомент освобождения\u003c/code\u003e, \u003ccode\u003eномер сервера\u003c/code\u003e).\u003c/p\u003e\u003cp\u003eКроме того в качестве \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eh\u003c/i\u003e\u003c/span\u003e можно использовать классическую бинарную кучу или упорядоченный ассоциативный массив (\u003ccode\u003eTreeMap\u003c/code\u003e в Java).\u003c/p\u003e\u003cp\u003eТакое решение будет работать за \u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/b0/99/b099391e52760eabb65464247da86ba19e27640a.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e.\u003c/p\u003e\u003cp\u003eПример решения: \u003ca href\u003d\"/contest/523/submission/10290987\" title\u003d\"Submission 10290987 by iSlava\"\u003e10290987\u003c/a\u003e. В этом решении в очереди с приоритетами \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eq\u003c/i\u003e\u003c/span\u003e моменты хранятся со знаком минус, чтобы сортировка по-умолчанию ставящая максимум вперед, ставила вперед минимум.\u003c/p\u003e\u003c/div\u003e","tags":["vkcup","квалификация 2","разбор задач"]}}