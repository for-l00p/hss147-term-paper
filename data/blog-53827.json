{"status":"OK","result":{"originalLocale":"ru","allowViewHistory":true,"creationTimeSeconds":1502625432,"rating":10,"authorHandle":"nikich340","modificationTimeSeconds":1502751972,"id":53827,"title":"\u003cp\u003eРазбор \u003ca href\u003d\"//codeforces.com/group/mEZDf6b5KH/contest/215086\"\u003eДВГУПС — тренировка 28\u003c/a\u003e\u003c/p\u003e","locale":"ru","content":"\u003cdiv class\u003d\"ttypography\"\u003e\u003ch3\u003e\u003ca href\u003d\"//codeforces.com/group/mEZDf6b5KH/contest/215086/problem/A\"\u003eА. Ярмарка оружия\u003c/a\u003e [реализация, математика]\u003c/h3\u003e\u003cp\u003eНеобходимо последовательно сравнить силы наборов, если текущая сила строго больше максимальной предыдущей, то обновляем максимальную и индекс лучшего набора. Вычислить силу набора можно было в нецелых числах как (сумма \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003es\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ej\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e / \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ew\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e), или сохранить числитель и знаменатель дроби (\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003esum\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003es\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003emax\u003c/i\u003e\u003c/sub\u003e\u003c/sub\u003e\u003c/span\u003e и \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ew\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003emax\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e) и сравнивая с текущим набором домножить обе части на (\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ew\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003emax\u003c/i\u003e\u003c/sub\u003e·\u003ci\u003ew\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e). Не стоит забывать, что суммирование \u003cspan class\u003d\"tex-span\"\u003e10\u003csup class\u003d\"upper-index\"\u003e5\u003c/sup\u003e\u003c/span\u003e чисел до \u003cspan class\u003d\"tex-span\"\u003e10\u003csup class\u003d\"upper-index\"\u003e9\u003c/sup\u003e\u003c/span\u003e приведёт к переполнению типа integer.\u003c/p\u003e\u003cp\u003eАсимптотика: \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eO\u003c/i\u003e(\u003ci\u003en\u003c/i\u003e·\u003ci\u003emax\u003c/i\u003e(\u003ci\u003ew\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e))\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003ca href\u003d\"//codeforces.com/group/mEZDf6b5KH/contest/215086/submission/29433143\"\u003eКод в нецелых числах\u003c/a\u003e\u003c/p\u003e\u003cp\u003e\u003ca href\u003d\"//codeforces.com/group/mEZDf6b5KH/contest/215086/submission/29429166\"\u003eКод в целых числах\u003c/a\u003e\u003c/p\u003e\u003ch3\u003e\u003ca href\u003d\"//codeforces.com/group/mEZDf6b5KH/contest/215086/problem/B\"\u003eB. Имённо-фамильный никнейм\u003c/a\u003e [перебор, строки]\u003c/h3\u003e\u003cp\u003eЛюбое решение сводится к тому, чтобы максимизировать подстроку в \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003en\u003c/i\u003e\u003c/span\u003e (ведь чем больше символов мы возьмём из \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003en\u003c/i\u003e\u003c/span\u003e, тем меньше потребуется из \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e\u003c/span\u003e). \u003c/p\u003e\u003cp\u003eОбозначим длину такой подстроки за \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ek\u003c/i\u003e\u003c/span\u003e.\u003c/p\u003e\u003cp\u003e1) Наивное решение может проверять все подстроки строки \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003en\u003c/i\u003e\u003c/span\u003e для поиска максимального \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ek\u003c/i\u003e\u003c/span\u003e, после чего искать недостающий конец строки в \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e\u003c/span\u003e. Это будет работать за \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eO\u003c/i\u003e(\u003ci\u003eq\u003c/i\u003e·|\u003ci\u003en\u003c/i\u003e|\u003csup class\u003d\"upper-index\"\u003e2\u003c/sup\u003e + \u003ci\u003eq\u003c/i\u003e·|\u003ci\u003ef\u003c/i\u003e|)\u003c/span\u003e в теории, однако лишь в худшем частном случае, когда множество раз наблюдается значительное совпадение подстроки с первой часть строки \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003es\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e (пример: \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003en\u003c/i\u003e\u003c/span\u003e \u003d \u0026quot; \u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/e8/f3/e8f3931e59dc82739be8b2a90d9c0cd2f38a733c.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e \u0026quot;, \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e\u003c/span\u003e \u003d \u0026quot; \u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/96/3d/963d580300d70c8fed435bc87345421f016d699d.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e \u0026quot;, и все \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003es\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e \u003d \u0026quot; \u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/df/d6/dfd600c79166c2bcb3bbf3b58c408013c2f67188.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e \u0026quot;).\u003c/p\u003e\u003cp\u003e\u003ca href\u003d\"//codeforces.com/group/mEZDf6b5KH/contest/215086/submission/29433452\"\u003eКод\u003c/a\u003e\u003c/p\u003e\u003cp\u003e2) Подсчитать все возможные подстроки для \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003en\u003c/i\u003e\u003c/span\u003e за \u003cspan class\u003d\"tex-span\"\u003e|\u003ci\u003en\u003c/i\u003e|\u003csup class\u003d\"upper-index\"\u003e2\u003c/sup\u003e\u003c/span\u003e, сложить в set[string] или бор, или подсчитать хеши (это будет работать аналогично set[string]). Теперь для каждого \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003es\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e можно последовательно искать \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ek\u003c/i\u003e\u003c/span\u003e, после чего можно пройтись последовательно по \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e\u003c/span\u003e, узнав, есть ли там оставшиеся \u003cspan class\u003d\"tex-span\"\u003e|\u003ci\u003es\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e| - \u003ci\u003ek\u003c/i\u003e\u003c/span\u003e символов. При использовании set[string] или хешей можно также искать \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ek\u003c/i\u003e\u003c/span\u003e бинарным поиском, укорачивая или удлиняя текущую строку до длины \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eM\u003c/i\u003e\u003c/span\u003e на каждой итерации и ища ей соответствие в подстроках \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003en\u003c/i\u003e\u003c/span\u003e.\u003c/p\u003e\u003cp\u003eАсимптотики такого решения:\u003c/p\u003e \u003cul\u003e   \u003cli\u003eДля хешей или set:   \u003cul\u003e     \u003cli\u003eесли искать \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ek\u003c/i\u003e\u003c/span\u003e последовательно: \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eO\u003c/i\u003e(\u003ci\u003eq\u003c/i\u003e·\u003ci\u003ek\u003c/i\u003e·\u003ci\u003elog\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e2\u003c/sub\u003e(|\u003ci\u003en\u003c/i\u003e|\u003csup class\u003d\"upper-index\"\u003e2\u003c/sup\u003e) + \u003ci\u003eq\u003c/i\u003e·|\u003ci\u003ef\u003c/i\u003e|)\u003c/span\u003e\u003c/li\u003e     \u003cli\u003eбинарным поиском: \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eO\u003c/i\u003e(\u003ci\u003eq\u003c/i\u003e·\u003ci\u003elog\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e2\u003c/sub\u003e(\u003ci\u003ek\u003c/i\u003e)·\u003ci\u003elog\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e2\u003c/sub\u003e(|\u003ci\u003en\u003c/i\u003e|\u003csup class\u003d\"upper-index\"\u003e2\u003c/sup\u003e) + \u003ci\u003eq\u003c/i\u003e·|\u003ci\u003ef\u003c/i\u003e|)\u003c/span\u003e\u003c/li\u003e   \u003c/ul\u003e\u003c/li\u003e   \u003cli\u003eДля бора: \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eO\u003c/i\u003e(\u003ci\u003eq\u003c/i\u003e·\u003ci\u003ek\u003c/i\u003e + \u003ci\u003eq\u003c/i\u003e·|\u003ci\u003ef\u003c/i\u003e|)\u003c/span\u003e\u003c/li\u003e \u003c/ul\u003e\u003cp\u003e\u003ca href\u003d\"//codeforces.com/group/mEZDf6b5KH/contest/215086/submission/29433604\"\u003eКод с set[string], последовательная проверка k\u003c/a\u003e\u003c/p\u003e\u003cp\u003e\u003ca href\u003d\"//codeforces.com/group/mEZDf6b5KH/contest/215086/submission/29433637\"\u003eКод с set[string], бинарный поиск по k\u003c/a\u003e\u003c/p\u003e\u003cp\u003e\u003ca href\u003d\"//codeforces.com/group/mEZDf6b5KH/contest/215086/submission/29433684\"\u003eКод с бором\u003c/a\u003e\u003c/p\u003e\u003cp\u003e3) Развернём \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003en\u003c/i\u003e\u003c/span\u003e, \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e\u003c/span\u003e, и \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003es\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e задом наперёд. Тогда нам нужно максимизировать не подстроку, а подпоследовательность в \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e\u003c/span\u003e, в этом единственное отличие от предыдущего варианта. Искать \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ek\u003c/i\u003e\u003c/span\u003e для подпоследовательности можно только последовательно, после чего нам нужно найти в \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003en\u003c/i\u003e\u003c/span\u003e подстроку длины \u003cspan class\u003d\"tex-span\"\u003e|\u003ci\u003en\u003c/i\u003e| - \u003ci\u003ek\u003c/i\u003e\u003c/span\u003e, для чего опять же следует предподсчитать все возможные подстроки для \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003en\u003c/i\u003e\u003c/span\u003e за \u003cspan class\u003d\"tex-span\"\u003e|\u003ci\u003en\u003c/i\u003e|\u003csup class\u003d\"upper-index\"\u003e2\u003c/sup\u003e\u003c/span\u003e и сложить их в какую-нибудь структуру.\u003c/p\u003e\u003cp\u003eАсимптотика решения:\u003c/p\u003e \u003cul\u003e   \u003cli\u003eДля хешей или set[string]: \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eO\u003c/i\u003e(\u003ci\u003eq\u003c/i\u003e·\u003ci\u003ek\u003c/i\u003e + \u003ci\u003eq\u003c/i\u003e·\u003ci\u003elog\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e2\u003c/sub\u003e(|\u003ci\u003en\u003c/i\u003e|\u003csup class\u003d\"upper-index\"\u003e2\u003c/sup\u003e))\u003c/span\u003e\u003c/li\u003e   \u003cli\u003eДля бора: \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eO\u003c/i\u003e(\u003ci\u003eq\u003c/i\u003e·\u003ci\u003ek\u003c/i\u003e + \u003ci\u003eq\u003c/i\u003e·|\u003ci\u003en\u003c/i\u003e|)\u003c/span\u003e\u003c/li\u003e \u003c/ul\u003e\u003ch3\u003e\u003ca href\u003d\"//codeforces.com/group/mEZDf6b5KH/contest/215086/problem/C\"\u003eC. Два великана\u003c/a\u003e [игры, математика]\u003c/h3\u003e\u003cp\u003eОчевидно, что размер кучи от \u003cspan class\u003d\"tex-span\"\u003e1\u003c/span\u003e до \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e является выигрышным для Тора, т.к. он может сломать её одним ударом. \u003c/p\u003e\u003cp\u003eА теперь давайте подумаем насчет \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003en\u003c/i\u003e \u003d \u003ci\u003ex\u003c/i\u003e + 1\u003c/span\u003e. Если Тор сломает \u003cspan class\u003d\"tex-span\"\u003e1\u003c/span\u003e кирпич, останется \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e кирпичей, и Арен победит, если Тор сломает \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e кирпичей, Арену останется \u003cspan class\u003d\"tex-span\"\u003e1\u003c/span\u003e кирпич и он тоже выиграет.\u003c/p\u003e\u003cp\u003eЗначит, куча размера \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e + 1\u003c/span\u003e всегда является \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eпроигрышной\u003c/i\u003e\u003c/span\u003e для Тора. А это в свою очередь значит, что все кучи от \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e + 2\u003c/span\u003e до \u003cspan class\u003d\"tex-span\"\u003e2\u003ci\u003ex\u003c/i\u003e + 1\u003c/span\u003e являются выигрышными — Тор может всегда сломать столько кирпичей, что Арену достанется куча размера \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e + 1\u003c/span\u003e и тот проиграет.\u003c/p\u003e\u003cp\u003eПодобным образом рассуждаем дальше, применяя важное правило теории игр — если из состояния текущего игрока нет способа привести состояние в проигрышное (чтобы в нём оказался другой игрок, а текущий выиграл), значит для текущего игрока состояние проигрышное, и при оптимальной игре обеих сторон он всегда будет в проигрышном состоянии, а другой игрок наоборот, в выигрышном.\u003c/p\u003e\u003cp\u003eИ получаем, что проигрышными для Тора являются только кучи кратные \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e + 1\u003c/span\u003e (\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e + 1\u003c/span\u003e, \u003cspan class\u003d\"tex-span\"\u003e2\u003ci\u003ex\u003c/i\u003e + 2\u003c/span\u003e, \u003cspan class\u003d\"tex-span\"\u003e3\u003ci\u003ex\u003c/i\u003e + 3\u003c/span\u003e, ..). Тогда ответ на отрезке \u003cspan class\u003d\"tex-span\"\u003e[1;\u003ci\u003en\u003c/i\u003e]\u003c/span\u003e можно найти как \u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/7b/80/7b804814ba148ceffe908850b2daeceb059b9157.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e, обозначим это функцией \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e(\u003ci\u003en\u003c/i\u003e)\u003c/span\u003e, тогда ответ на отрезке \u003cspan class\u003d\"tex-span\"\u003e[\u003ci\u003eL\u003c/i\u003e;\u003ci\u003eR\u003c/i\u003e]\u003c/span\u003e равняется \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e(\u003ci\u003eR\u003c/i\u003e) - \u003ci\u003ef\u003c/i\u003e(\u003ci\u003eL\u003c/i\u003e - 1)\u003c/span\u003e.\u003c/p\u003e\u003cp\u003eАсимптотика: \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eO\u003c/i\u003e(\u003ci\u003eq\u003c/i\u003e)\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003ca href\u003d\"//codeforces.com/group/mEZDf6b5KH/contest/215086/submission/29433974\"\u003eКод\u003c/a\u003e\u003c/p\u003e\u003ch3\u003e\u003ca href\u003d\"//codeforces.com/group/mEZDf6b5KH/contest/215086/problem/D\"\u003eD. Кровожадная функция\u003c/a\u003e [математика]\u003c/h3\u003e\u003cp\u003eИтак, \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e(\u003ci\u003ex\u003c/i\u003e) \u003d \u003ci\u003ea\u003c/i\u003e\u003csup class\u003d\"upper-index\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/sup\u003e·(\u003ci\u003eb\u003c/i\u003e + \u003ci\u003ex\u003c/i\u003e)\u003csup class\u003d\"upper-index\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/sup\u003e·\u003ci\u003ec\u003c/i\u003e\u003c/span\u003e. Нам даны три значения этой функции, давайте распишем их в полном виде:\u003c/p\u003e\u003cp\u003e\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e(0) \u003d \u003ci\u003ea\u003c/i\u003e\u003csup class\u003d\"upper-index\"\u003e0\u003c/sup\u003e·(\u003ci\u003eb\u003c/i\u003e + 0)\u003csup class\u003d\"upper-index\"\u003e0\u003c/sup\u003e·\u003ci\u003ec\u003c/i\u003e \u003d 1·1·\u003ci\u003ec\u003c/i\u003e \u003d \u003ci\u003ec\u003c/i\u003e\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e(1) \u003d \u003ci\u003ea\u003c/i\u003e\u003csup class\u003d\"upper-index\"\u003e1\u003c/sup\u003e·(\u003ci\u003eb\u003c/i\u003e + 1)\u003csup class\u003d\"upper-index\"\u003e1\u003c/sup\u003e·\u003ci\u003ec\u003c/i\u003e \u003d \u003ci\u003ea\u003c/i\u003e·(\u003ci\u003eb\u003c/i\u003e + 1)·\u003ci\u003ec\u003c/i\u003e\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e(2) \u003d \u003ci\u003ea\u003c/i\u003e\u003csup class\u003d\"upper-index\"\u003e2\u003c/sup\u003e·(\u003ci\u003eb\u003c/i\u003e + 2)\u003csup class\u003d\"upper-index\"\u003e2\u003c/sup\u003e·\u003ci\u003ec\u003c/i\u003e\u003c/span\u003e\u003c/p\u003e\u003cp\u003eКак видим, \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ec\u003c/i\u003e \u003d \u003ci\u003ef\u003c/i\u003e(0)\u003c/span\u003e. Значит можно упростить два других выражения:\u003c/p\u003e\u003cp\u003e\u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/64/65/64650a3065b148cb4569b052bc368fe16cbb2a8f.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e\u003c/p\u003e\u003cp\u003e\u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/5a/17/5a172cadb1d98abda0f848051168eaf398b7ad2a.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e\u003c/p\u003e\u003cp\u003eЧто мешает избавиться от квадрата во втором выражении?\u003c/p\u003e\u003cp\u003e\u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/a7/17/a7176a14f12d62db6ea3d0525525eb2801642f17.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e\u003c/p\u003e\u003cp\u003eТеперь можно найти \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ea\u003c/i\u003e\u003c/span\u003e:\u003c/p\u003e\u003cp\u003e\u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/09/ae/09aecbdd7ba1f0ffdc58258714c9a6f2a7545d24.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e\u003c/p\u003e\u003cp\u003eИ \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eb\u003c/i\u003e\u003c/span\u003e:\u003c/p\u003e\u003cp\u003e\u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/db/cc/dbcc7def259ca8b16afc6580b61de9d60f6a3e6b.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e\u003c/p\u003e\u003cp\u003e\u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/e2/18/e218f2e9b28e73f36a31e4c6b18527c7354c8bb6.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e\u003c/p\u003e\u003cp\u003eАсимптотика: \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eO\u003c/i\u003e(1)\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003ca href\u003d\"//codeforces.com/group/mEZDf6b5KH/contest/215086/submission/29433986\"\u003eКод\u003c/a\u003e\u003c/p\u003e\u003ch3\u003e\u003ca href\u003d\"//codeforces.com/group/mEZDf6b5KH/contest/215086/problem/E\"\u003eE. Интересная структура\u003c/a\u003e [математика, реализация]\u003c/h3\u003e\u003cp\u003eТак как \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e не превосходит \u003cspan class\u003d\"tex-span\"\u003e100\u003c/span\u003e, можно было хранить массив \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ecnt\u003c/i\u003e[100]\u003c/span\u003e и прибавлять или отнимать количество чисел в явном виде. При запросе третьего типа необходимо пройтись по всем числам от \u003cspan class\u003d\"tex-span\"\u003e1\u003c/span\u003e до \u003cspan class\u003d\"tex-span\"\u003e100\u003c/span\u003e и умножить текущий остаток на \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003csup class\u003d\"upper-index\"\u003e\u003ci\u003ecnt\u003c/i\u003e[\u003ci\u003ex\u003c/i\u003e]\u003c/sup\u003e\u003c/span\u003e по модулю \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003em\u003c/i\u003e\u003c/span\u003e.\u003c/p\u003e\u003cp\u003eОднако \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ecnt\u003c/i\u003e[\u003ci\u003ex\u003c/i\u003e]\u003c/span\u003e может быть весьма большим, и каждый раз умножать в явном виде слишком долго. Здесь есть два пути оптимизации:\u003c/p\u003e\u003cp\u003e1) будем хранить стек значений \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eval\u003c/i\u003e[\u003ci\u003ex\u003c/i\u003e]\u003c/span\u003e, где \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eval\u003c/i\u003e[\u003ci\u003ex\u003c/i\u003e][\u003ci\u003ecnt\u003c/i\u003e[\u003ci\u003ex\u003c/i\u003e]]\u003c/span\u003e равняется \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003csup class\u003d\"upper-index\"\u003e\u003ci\u003ecnt\u003c/i\u003e[\u003ci\u003ex\u003c/i\u003e]\u003c/sup\u003e\u003c/span\u003e % \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003em\u003c/i\u003e\u003c/span\u003e. Сделаем \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eval\u003c/i\u003e[\u003ci\u003ex\u003c/i\u003e][0] \u003d 1\u003c/span\u003e изначально для всех \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e от \u003cspan class\u003d\"tex-span\"\u003e1\u003c/span\u003e о \u003cspan class\u003d\"tex-span\"\u003e100\u003c/span\u003e, тогда при добавлении нового числа \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e в структуру будем помешать в конец стека новое значение на основе предыдущего: \u003ccode\u003eval[x].push_back( (val[x][ cnt[x] ] * x) % m );\u003c/code\u003e А при запросе второго типа нам просто нужно убрать последнее значение из стека: \u003ccode\u003eval[x].pop_back()\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eТакже вместо стека можно было использовать массив \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eval\u003c/i\u003e[100][100000]\u003c/span\u003e (т.к. очевидно что любое число будет повторяться не более \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eq\u003c/i\u003e\u003c/span\u003e раз, т.е. не более \u003cspan class\u003d\"tex-span\"\u003e10\u003csup class\u003d\"upper-index\"\u003e5\u003c/sup\u003e\u003c/span\u003e раз), но это более затратно по памяти.\u003c/p\u003e\u003cp\u003eАсимптотика: \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eO\u003c/i\u003e(\u003ci\u003eq\u003c/i\u003e + 100·\u003ci\u003ecnt\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003et\u003c/i\u003e3\u003c/sub\u003e)\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003ca href\u003d\"//codeforces.com/group/mEZDf6b5KH/contest/215086/submission/29430943\"\u003eКод со стеком\u003c/a\u003e\u003c/p\u003e\u003cp\u003e\u003ca href\u003d\"//codeforces.com/group/mEZDf6b5KH/contest/215086/submission/29431275\"\u003eКод с массивом\u003c/a\u003e\u003c/p\u003e\u003cp\u003e2) воспользуемся быстрым возведением в степень (более подробно \u003ca href\u003d\"http://e-maxx.ru/algo/binary_pow\"\u003eздесь\u003c/a\u003e, основная идея в том, что \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003csup class\u003d\"upper-index\"\u003e\u003ci\u003en\u003c/i\u003e\u003c/sup\u003e \u003d \u003ci\u003ex\u003c/i\u003e\u003csup class\u003d\"upper-index\"\u003e\u003ci\u003en\u003c/i\u003e / 2\u003c/sup\u003e·\u003ci\u003ex\u003c/i\u003e\u003csup class\u003d\"upper-index\"\u003e\u003ci\u003en\u003c/i\u003e / 2\u003c/sup\u003e\u003c/span\u003e)\u003c/p\u003e\u003cp\u003eАсимптотика: \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eO\u003c/i\u003e(\u003ci\u003eq\u003c/i\u003e + 100·\u003ci\u003ecnt\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003et\u003c/i\u003e3\u003c/sub\u003e·\u003ci\u003elog\u003c/i\u003e2(\u003ci\u003ecnt\u003c/i\u003e[\u003ci\u003ex\u003c/i\u003e])\u003c/span\u003e.\u003c/p\u003e\u003cp\u003e\u003ca href\u003d\"//codeforces.com/group/mEZDf6b5KH/contest/215086/submission/29430303\"\u003eКод\u003c/a\u003e\u003c/p\u003e\u003cp\u003e+) можно не пересчитывать ответ каждый раз на запрос третьего типа, а лишь в тех случаях когда мы вносили изменение (т.е. это оптимизация на случай множественный запросов третьего типа).\u003c/p\u003e\u003cp\u003e+) можно хранить числа не в явном виде, а факторизовать их (раскладывать на простые) и считать ответ по степеням простых чисел от \u003cspan class\u003d\"tex-span\"\u003e1\u003c/span\u003e до \u003cspan class\u003d\"tex-span\"\u003e100\u003c/span\u003e (их 25 штук). Авторское решение использовало именно факторизацию + быстрое возведение в степень: \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eO\u003c/i\u003e(\u003ci\u003eq\u003c/i\u003e·\u003ci\u003elog\u003c/i\u003e2(\u003ci\u003ex\u003c/i\u003e) + 25·\u003ci\u003ecnt\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003et\u003c/i\u003e3\u003c/sub\u003e·\u003ci\u003elog\u003c/i\u003e2(\u003ci\u003ecnt\u003c/i\u003e[\u003ci\u003ex\u003c/i\u003e]))\u003c/span\u003e.\u003c/p\u003e\u003cp\u003e\u003ca href\u003d\"//codeforces.com/group/mEZDf6b5KH/contest/215086/submission/29434003\"\u003eКод авторского решения\u003c/a\u003e\u003c/p\u003e\u003ch3\u003e\u003ca href\u003d\"//codeforces.com/group/mEZDf6b5KH/contest/215086/problem/F\"\u003eF. Статически полный граф\u003c/a\u003e [тролль]\u003c/h3\u003e\u003cp\u003eЕсли Вы хоть немного знаете о том, что такое графы, Вы сможете решить эту задачу. \u003c/p\u003e\u003cp\u003eГлавное — внимательно прочитать все условия и подумать что они означают.\u003c/p\u003e\u003c/div\u003e","tags":["разбор","двгупс","тренировка"]}}