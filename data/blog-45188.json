{"status":"OK","result":{"originalLocale":"en","allowViewHistory":true,"creationTimeSeconds":1464851831,"rating":-1,"authorHandle":"gsmcoder97","modificationTimeSeconds":1464851831,"id":45188,"title":"\u003cp\u003eB.Little Elephant And Array\u003c/p\u003e","locale":"en","content":"\u003cdiv class\u003d\"ttypography\"\u003e\u003cp\u003eI started coding square root decomposition myself and submitted my code for Little Elephant And Array(\u003ca\u003ehttp://codeforces.com/contest/220/problem/B)\u003c/a\u003e; however, I am getting compilation error. Is there some error in my code? How can I make it more optimal?\u003c/p\u003e \u003cpre\u003e\u003ccode\u003estruct x{\n    int ct[size1]; int mini, maxi;\n};\nx block[size1];\nvoid cons(int n, int a[]){\n    int p\u003dfloor(sqrt(n));\n    for(int i\u003d0;i\u0026lt;n;i++){block[i/p+1].ct[a[i]]++; block[i/p+1].mini\u003dmin(block[i/p+1].mini,a[i]); block[i/p+1].maxi\u003dmax(block[i/p+1].maxi,a[i]);}\n}\nvoid query(int l,int r,int n, int a[], int \u0026amp;ans){\n    int p\u003dfloor(sqrt(n));\n    int b1\u003d(l-1)/p+1;\n    int b2\u003d(r-1)/p+1;\n    //int ans\u003d0;\n    if(b1\u003d\u003db2){\n        map\u0026lt;int,int\u0026gt; v;\n        for(int i\u003d(l-1);i\u0026lt;\u003d(r-1);i++)v[a[i]]++;\n        map\u0026lt;int,int\u0026gt;::iterator it\u003dv.begin();\n        for(;it!\u003dv.end();it++)if(it-\u0026gt;second\u003d\u003dit-\u0026gt;first)ans++;\n    }\n    else if(b1!\u003db2){\n        map\u0026lt;int,int\u0026gt; v;\n        for(int i\u003dl;i\u0026lt;b1*p;i++)v[a[i]]++;\n        for(int i\u003db1;i\u0026lt;b2;i++)for(int j\u003dblock[i].mini;j\u0026lt;\u003dblock[j].maxi;j++)v[j]+\u003dblock[i].ct[j];\n        for(int i\u003db2*p;i\u0026lt;\u003dr;i++)v[a[i]]++;\n        map\u0026lt;int,int\u0026gt;::iterator it\u003dv.begin();\n        for(;it!\u003dv.end();it++)if(it-\u0026gt;second\u003d\u003dit-\u0026gt;first)ans++;\n    }\n}\nint main(){\n    int n,m; cin\u0026gt;\u0026gt;n\u0026gt;\u0026gt;m;\n    int a[n]; for(int i\u003d0;i\u0026lt;n;i++)cin\u0026gt;\u0026gt;a[i];\n    cons(n,a);\n    while(m--){\n        int x,b; cin\u0026gt;\u0026gt;x\u0026gt;\u0026gt;b;\n        int ans\u003d0;\n        query(x,b,n,a,ans); cout\u0026lt;\u0026lt;ans\u0026lt;\u0026lt;endl;\n    }\n    return 0;\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAny help is appreciated. Thank you\u003c/p\u003e\u003c/div\u003e","tags":["sqrt_decomposition","sqrt-decomposition"]}}