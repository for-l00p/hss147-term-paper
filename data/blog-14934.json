{"status":"OK","result":{"originalLocale":"en","allowViewHistory":false,"creationTimeSeconds":1417273020,"rating":21,"authorHandle":"indy256","modificationTimeSeconds":1417316079,"id":14934,"title":"\u003cp\u003eAccuracy of Math.sqrt(long)\u003c/p\u003e","locale":"en","content":"\u003cdiv class\u003d\"ttypography\"\u003e\u003cp\u003eLast SRM\u0027s \u003ca href\u003d\"http://community.topcoder.com/stat?c\u003dproblem_statement\u0026amp;pm\u003d13490\"\u003ediv1-250-task\u003c/a\u003e raised two questions:\u003c/p\u003e \u003cul\u003e   \u003cli\u003ehow to calculate square root of a \u003cstrong\u003eperfect square\u003c/strong\u003e?\u003c/li\u003e   \u003cli\u003ehow to do a \u003cstrong\u003eperfect square\u003c/strong\u003e test?\u003c/li\u003e \u003c/ul\u003e\u003cp\u003eThe following two methods solve these problems correctly in \u003cstrong\u003eJava\u003c/strong\u003e:\u003c/p\u003e \u003cul\u003e   \u003cli\u003e\u003cp\u003e\u003ccode\u003elong rootOfPerfectSquare(long xx) { return (long) Math.sqrt(xx); }\u003c/code\u003e\u003c/p\u003e\u003c/li\u003e   \u003cli\u003e\u003cp\u003e\u003ccode\u003eboolean isPerfectSquare(long xx) { long x \u003d (long) Math.sqrt(xx); return x * x \u003d\u003d xx; }\u003c/code\u003e\u003c/p\u003e\u003c/li\u003e \u003c/ul\u003e\u003cp\u003eWhat makes correctness non-obvious is implicit conversion of Math.sqrt() argument from long to double, where precision can be lost.\u003c/p\u003e\u003cp\u003eCorrectness can be verified using the following code:\u003c/p\u003e \u003cpre\u003e\u003ccode\u003efor (long x \u003d 0; x \u0026lt;\u003d Math.sqrt(Long.MAX_VALUE); x++)\n    if (x !\u003d (long) Math.sqrt(x * x)) System.out.println(x);\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eIs there any explanation of why it works? \u003cbr /\u003eDoes this method work in other languages, e.g. C++? \u003c/p\u003e\u003cp\u003eCan you prove or disprove the following statement: \u003cem\u003efor any long x \u0026gt;\u003d 0: \u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/0b/54/0b54370b2d05dfe0bb82108bbc863bf910ad49c0.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e (long) Math.sqrt(x) \u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/4c/73/4c737e8fc3eea1d7874b6c361f34653250e45a4e.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e\u003c/em\u003e ?\u003c/p\u003e\u003c/div\u003e","tags":["sqrt","perfect square","precision"]}}