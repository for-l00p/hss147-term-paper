{"status":"OK","result":{"originalLocale":"ru","allowViewHistory":true,"creationTimeSeconds":1465930801,"rating":36,"authorHandle":"ayoyia","modificationTimeSeconds":1465936197,"id":45425,"title":"\u003cp\u003eCodeforces Round #357 (Div. 2) Editorial\u003c/p\u003e","locale":"en","content":"\u003cdiv class\u003d\"ttypography\"\u003e\u003cp\u003e\u003ca href\u003d\"/contest/681/problem/A\" title\u003d\"Codeforces Round 357 (Div. 2)\"\u003e681A - A Good Contest\u003c/a\u003e\u003c/p\u003e\u003cp\u003eIf for any participant \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ebefore\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e ≥ 2400\u003c/span\u003e and \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eafter\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e \u0026gt; \u003ci\u003ebefore\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e, then the answer is \u0026quot;YES\u0026quot;, otherwise \u0026quot;NO\u0026quot;\u003c/p\u003e\u003cp\u003e\u003ca href\u003d\"https://ideone.com/kzMYfl\"\u003eCode\u003c/a\u003e\u003c/p\u003e\u003cp\u003e\u003ca href\u003d\"/contest/681/problem/B\" title\u003d\"Codeforces Round 357 (Div. 2)\"\u003e681B - Economy Game\u003c/a\u003e\u003c/p\u003e\u003cp\u003eWe can simply try every \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ea\u003c/i\u003e\u003c/span\u003e from \u003cspan class\u003d\"tex-span\"\u003e0\u003c/span\u003e to \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003en\u003c/i\u003e / 1234567\u003c/span\u003e and \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eb\u003c/i\u003e\u003c/span\u003e from \u003cspan class\u003d\"tex-span\"\u003e0\u003c/span\u003e до \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003en\u003c/i\u003e / 123456\u003c/span\u003e, and if \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003en\u003c/i\u003e - \u003ci\u003ea\u003c/i\u003e * 1234567 - \u003ci\u003eb\u003c/i\u003e * 123456\u003c/span\u003e is non-negative and divided by \u003cspan class\u003d\"tex-span\"\u003e1234\u003c/span\u003e, then the answer is \u0026quot;YES\u0026quot;.\u003c/p\u003e\u003cp\u003eIf there is no such \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ea\u003c/i\u003e\u003c/span\u003e and \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eb\u003c/i\u003e\u003c/span\u003e, then the answer is \u0026quot;NO\u0026quot;.\u003c/p\u003e\u003cp\u003e\u003ca href\u003d\"https://ideone.com/zbPSkF\"\u003eCode\u003c/a\u003e\u003c/p\u003e\u003cp\u003e\u003ca href\u003d\"/contest/681/problem/C\" title\u003d\"Codeforces Round 357 (Div. 2)\"\u003e681C - Heap Operations\u003c/a\u003e\u003c/p\u003e\u003cp\u003eLet\u0027s solve this problem with greedy approach. Let\u0027s apply operations from log in given order.\u003c/p\u003e\u003cp\u003eIf current operation is \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003einsert\u003c/i\u003e\u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e, then add element \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e to heap.\u003c/p\u003e\u003cp\u003eIf current operation is \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eremoveMin\u003c/i\u003e\u003c/span\u003e, then if heap is not empty, then simply remove minimal element, otherwise if heap is empty, add operation \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003einsert\u003c/i\u003e\u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e, where \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e can be any number, and then apply \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eremoveMin\u003c/i\u003e\u003c/span\u003e\u003c/p\u003e\u003cp\u003eIf current operation is \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003egetMin\u003c/i\u003e\u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e then do follows:\u003c/p\u003e \u003col\u003e   \u003cli\u003eWhile heap is not empty and its minimal element is less than \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e, apply operation \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eremoveMin\u003c/i\u003e\u003c/span\u003e.\u003c/li\u003e   \u003cli\u003eNow if heap is empty or its minimal element is not equal to \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e, apply operation \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003einsert\u003c/i\u003e\u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e.\u003c/li\u003e   \u003cli\u003eApply operation \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003egetMin\u003c/i\u003e\u003c/span\u003e \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e.\u003c/li\u003e \u003c/ol\u003e\u003cp\u003eIn order to fit time limit, you need to use data structure, which allows you to apply given operations in \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eO\u003c/i\u003e(\u003ci\u003elogN\u003c/i\u003e)\u003c/span\u003e time, where \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eN\u003c/i\u003e\u003c/span\u003e is a number of elements in it. For example, \u003ccode\u003estd::priority_queue\u003c/code\u003e or \u003ccode\u003estd::multiset\u003c/code\u003e.\u003c/p\u003e\u003cp\u003e\u003ca href\u003d\"https://ideone.com/1iyHy8\"\u003eCode\u003c/a\u003e\u003c/p\u003e\u003cp\u003e\u003ca href\u003d\"/contest/681/problem/D\" title\u003d\"Codeforces Round 357 (Div. 2)\"\u003e681D - Gifts by the List\u003c/a\u003e\u003c/p\u003e\u003cp\u003eFormal statement of the problem:\u003c/p\u003e\u003cp\u003eYou have a directed acyclic graph, every vertex has at most one ingoing edge. Vertex \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eA\u003c/i\u003e\u003c/span\u003e is an ancestor of vertex \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eB\u003c/i\u003e\u003c/span\u003e if there is a path from \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eA\u003c/i\u003e\u003c/span\u003e to \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eB\u003c/i\u003e\u003c/span\u003e in graph. Also every vertex is an ancestor of itself.\u003c/p\u003e\u003cp\u003eEvery vertex \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/span\u003e has a pair – vertex \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ea\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e, \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ea\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e – ancestor of \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/span\u003e.\u003c/p\u003e\u003cp\u003eYou need to build such sequence of vertex, that for every vertex \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/span\u003e the leftmost vertex in the sequence which is ancestor of \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/span\u003e must be equal to \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ea\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e.\u003c/p\u003e\u003cp\u003eOr you need to tell, that such sequence does not exists.\u003c/p\u003e\u003cp\u003eSolution:\u003c/p\u003e\u003cp\u003eAssume sequence \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eans\u003c/i\u003e\u003c/span\u003e, which contains every vertex from sequence \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ea\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003en\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e by once and only them. Let\u0027s order elements of this sequence in such way, that for every \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/span\u003e and \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ej\u003c/i\u003e\u003c/span\u003e if \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eans\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e – ancestor of \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eans\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ej\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e, then \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ei\u003c/i\u003e ≥ \u003ci\u003ej\u003c/i\u003e\u003c/span\u003e.\u003c/p\u003e\u003cp\u003eIf this sequecne is the answer, then print it. Otherwise, there is no answer.\u003c/p\u003e\u003cp\u003eWhy?\u003c/p\u003e \u003col\u003e   \u003cli\u003e\u003cp\u003eIf some vertex \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ea\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e from sequence \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ea\u003c/i\u003e\u003c/span\u003e in not present in \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eans\u003c/i\u003e\u003c/span\u003e, then a man, who needs to give a gift to a man number \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ea\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e, will not be able to do it. So every vertex \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ea\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e must have place in the resulting sequence.\u003c/p\u003e\u003c/li\u003e   \u003cli\u003e\u003cp\u003eIf \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ea\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e – ancestor of \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ea\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ej\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e and \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ei\u003c/i\u003e \u0026lt; \u003ci\u003ej\u003c/i\u003e\u003c/span\u003e, then a man, who needs to give a gift to a man number \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ea\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ej\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e will not be able to do it.\u003c/p\u003e\u003c/li\u003e \u003c/ol\u003e\u003cp\u003eHow can we build this sequence?\u003c/p\u003e\u003cp\u003eLet\u0027s sort vertices topologically, than reverse it and remove redundant vertices.\u003c/p\u003e\u003cp\u003eNow we need to check if that this sequence can be the answer.\u003c/p\u003e\u003cp\u003eLet\u0027s calculate to whom every man will give his gift. At start for any man we don\u0027t know that. Let\u0027s iterate through vertices of the resulting sequence.\u003c/p\u003e\u003cp\u003eFor every vertex (man) from current vertex subtree (i.e. for vertices whose ancestor is current vertex) such that we still don\u0027t know whom will this vertex (man) give a gift to, stays that these vertices would give a gift to current vertex, because it is their first ancestor in the list.\u003c/p\u003e\u003cp\u003eIterate through that vertices (men) in dfs order and remember for them, to whom they will give their gift.\u003c/p\u003e\u003cp\u003eAfter we apply this operation to all vertices from resulting sequence, compare for each man to whom he will give his gift and to whom he needs to give his gift. If there is at least one mismatch, then the answer doesn\u0027t exist.\u003c/p\u003e\u003cp\u003e\u003ca href\u003d\"https://ideone.com/Nwydx2\"\u003eCode\u003c/a\u003e\u003c/p\u003e\u003cp\u003e\u003ca href\u003d\"/contest/681/problem/E\" title\u003d\"Codeforces Round 357 (Div. 2)\"\u003e681E - Runaway to a Shadow\u003c/a\u003e\u003c/p\u003e\u003cp\u003eAt first assume the case when cockroach at the moment \u003cspan class\u003d\"tex-span\"\u003e0\u003c/span\u003e is already inside or on the border of some circle. In that case the cockroach will always survive, i. e. the probability is \u003cspan class\u003d\"tex-span\"\u003e1\u003c/span\u003e.\u003c/p\u003e\u003cp\u003eOtherwise the cockroach will have time to run to every point inside the circle with center of \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e0\u003c/sub\u003e\u003c/span\u003e, \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ey\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e0\u003c/sub\u003e\u003c/span\u003e and radius \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ev\u003c/i\u003e × \u003ci\u003et\u003c/i\u003e\u003c/span\u003e.\u003c/p\u003e\u003cp\u003eLet\u0027s iterate through all the shadow circles and figure out how each circle relates to \u0026quot;cockroach circle\u0026quot;. We want to find the maximum angle, such that choosing the direction from this angle the cockroach will have enough time to reach current circle and survive.\u003c/p\u003e\u003cp\u003eIn general, maximal \u0026quot;surviving\u0026quot; angle, such that choosing the direction from it the cockroach will reach the circle in infinite time – is an angle between two tangents from a start point to the circle. If length of this tangents is not greater than \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ev\u003c/i\u003e × \u003ci\u003et\u003c/i\u003e\u003c/span\u003e, then this angle is the needed one.\u003c/p\u003e\u003cp\u003eOtherwise we need to find intersections of cockroach circle and current circle. If there is no intersection points or there is only one, then current circle is too far away from cockroach. Otherwise intersection points and start point form the needed angle for this circle.\u003c/p\u003e\u003cp\u003eAfter we\u0027ve found all the angles, we can figure out that those angles are segments that cover a segment from \u003cspan class\u003d\"tex-span\"\u003e0\u003c/span\u003e to \u003cspan class\u003d\"tex-span\"\u003e2π\u003c/span\u003e. Sort their ends and find a length of their union. This length divided by \u003cspan class\u003d\"tex-span\"\u003e2π\u003c/span\u003e will give us the answer.\u003c/p\u003e\u003cp\u003e\u003ca href\u003d\"https://ideone.com/knTyd5\"\u003eCode\u003c/a\u003e\u003c/p\u003e\u003c/div\u003e","tags":[]}}