{"status":"OK","result":{"originalLocale":"en","allowViewHistory":false,"creationTimeSeconds":1470459829,"rating":0,"authorHandle":"I_love_Hoang_Yen","modificationTimeSeconds":1470500977,"id":46441,"title":"\u003cp\u003eSP Training 5 — Solutions\u003c/p\u003e","locale":"en","content":"\u003cdiv class\u003d\"ttypography\"\u003e\u003cp\u003eResources:\u003c/p\u003e \u003cul\u003e   \u003cli\u003e\u003ca href\u003d\"https://github.com/ngthanhtrung23/SP2016/tree/master/T5\"\u003eCode\u003c/a\u003e\u003c/li\u003e   \u003cli\u003e\u003ca href\u003d\"https://www.youtube.com/watch?v\u003dGxMd0qE-xso\"\u003eVideo\u003c/a\u003e\u003c/li\u003e \u003c/ul\u003e\u003ch1\u003e[problem:208180A]\u003c/h1\u003e\u003ch2\u003eTư tưởng\u003c/h2\u003e\u003cp\u003eInterval Tree với 2 thao tác:\u003c/p\u003e \u003cul\u003e   \u003cli\u003eUpdate(l, r, val): Gán tất cả đoạn [l, r] bằng val\u003c/li\u003e   \u003cli\u003eGet(i): Tìm giá trị tại điểm i\u003c/li\u003e \u003c/ul\u003e\u003cp\u003eBài này là Interval Tree khá cơ bản (cần lazy update). Giới hạn tương đối to để dụ các bạn làm rời rạc hóa. Tuy nhiên rời rạc hóa sẽ bị sai trong trường hợp sau:\u003c/p\u003e \u003cpre\u003e\u003ccode\u003e3\n1 20\n20 30\n1 10\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eỞ đây nếu rời rạc hóa về chỉ cần quan tâm các điểm 1, 10, 20, 30 thì sẽ sai. Hiện tại mình cũng không nghĩ ra cách nào đúng để giải quyết vấn đề này :)). (Lúc ở nhà nghĩ là với [l, r] thêm điểm l, r, l+1, r+1 là được nên đặt ML \u003d 256MB, về sau mới nghĩ ra là nó vẫn sai)\u003c/p\u003e\u003ch1\u003e[problem:208180B]\u003c/h1\u003e\u003cp\u003eHướng đi thông thường là quy hoạch động theo kiểu \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ej\u003c/i\u003e, \u003ci\u003ex\u003c/i\u003e)\u003c/span\u003e, là nếu chỉ xét người từ \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/span\u003e đến \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ej\u003c/i\u003e\u003c/span\u003e, thì thằng \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e có vô địch được không. Tuy nhiên làm kiểu này độ phức tạp rất lớn và bộ nhớ cũng lớn.\u003c/p\u003e\u003cp\u003eTa nhận thấy chiều \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e không quan trọng, nói cách khác, ta sửa lại hàm \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ej\u003c/i\u003e)\u003c/span\u003e là có tồn tại cách chơi, để khi chơi hết đoạn \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/span\u003e đến \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ej\u003c/i\u003e\u003c/span\u003e, thì còn lại cả \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/span\u003e và \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ej\u003c/i\u003e\u003c/span\u003e.\u003c/p\u003e\u003cp\u003eTừ đó thu được công thức quy hoạch động \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eN\u003c/i\u003e\u003csup class\u003d\"upper-index\"\u003e3\u003c/sup\u003e\u003c/span\u003e rất đơn giản:\u003c/p\u003e\u003cp\u003e\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ej\u003c/i\u003e) \u003d \u003ci\u003etrue\u003c/i\u003e\u003c/span\u003e nếu tồn tại \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ek\u003c/i\u003e\u003c/span\u003e mà \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ek\u003c/i\u003e) \u003d \u003ci\u003ef\u003c/i\u003e(\u003ci\u003ek\u003c/i\u003e, \u003ci\u003ej\u003c/i\u003e) \u003d 1\u003c/span\u003e và \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eA\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ek\u003c/i\u003e) \u003d 1||\u003ci\u003eA\u003c/i\u003e(\u003ci\u003ej\u003c/i\u003e, \u003ci\u003ek\u003c/i\u003e) \u003d 1\u003c/span\u003e.\u003c/p\u003e\u003cp\u003eChú ý mối liên hệ giữa công thức mới \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ej\u003c/i\u003e)\u003c/span\u003e với công thức cũ \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ej\u003c/i\u003e, \u003ci\u003ek\u003c/i\u003e)\u003c/span\u003e. Ở đây \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ej\u003c/i\u003e)\u003c/span\u003e thể hiện là trong đoạn i — j còn cả 2 đầu i và j còn sống. Còn trong công thức \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ej\u003c/i\u003e, \u003ci\u003ek\u003c/i\u003e)\u003c/span\u003e thể hiện trong đoạn i — j chỉ còn k còn sống.\u003c/p\u003e\u003cp\u003eSau khi tính được \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ej\u003c/i\u003e)\u003c/span\u003e, để xem i có thể còn sống sót đến cuối không, ta chỉ cần xem \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ef\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ei\u003c/i\u003e)\u003c/span\u003e. Chú ý đây là cách xử lý trên hình tròn thông thường: cắt vòng tròn ở điểm i.\u003c/p\u003e\u003ch1\u003e[problem:208180C]\u003c/h1\u003e\u003ch2\u003e1D\u003c/h2\u003e\u003cp\u003eTrước tiên, ta tìm cách giải bài toán trên 1D.\u003c/p\u003e\u003cp\u003eTrên 1D, mỗi mèo có tọa độ \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003exi\u003c/i\u003e\u003c/span\u003e và các mèo có thể di chuyển sang trái hoặc phải.\u003c/p\u003e\u003cp\u003eTọa độ khá nhỏ nên ta có thể duyệt tất cả các điểm gặp gỡ, mỗi điểm gặp gỡ thì ta xét lần lượt từng mèo, tính số cách để mèo đấy đến điểm gặp nhau.\u003c/p\u003e\u003cp\u003eCó khoảng \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eO\u003c/i\u003e(\u003ci\u003emaxtọađộ\u003c/i\u003e + \u003ci\u003eM\u003c/i\u003e)\u003c/span\u003e vị trí gặp nhau. Với mỗi vị trí gặp nhau, với mỗi mèo, ta tính số cách để mèo di chuyển từ vị trí X đến vị trí gặp nhau Y.\u003c/p\u003e\u003cp\u003eĐặt \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003el\u003c/i\u003e\u003c/span\u003e là số lần mèo di chuyển sang trái Đặt \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003er\u003c/i\u003e\u003c/span\u003e là số lần mèo di chuyển sang phải\u003c/p\u003e\u003cp\u003e--\u0026gt; \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003el\u003c/i\u003e + \u003ci\u003er\u003c/i\u003e \u003d \u003ci\u003eM\u003c/i\u003e\u003c/span\u003e và \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eX\u003c/i\u003e - \u003ci\u003el\u003c/i\u003e + \u003ci\u003er\u003c/i\u003e \u003d \u003ci\u003eY\u003c/i\u003e\u003c/span\u003e\u003c/p\u003e\u003cp\u003eTừ đó tính được \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003el\u003c/i\u003e\u003c/span\u003e và \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003er\u003c/i\u003e\u003c/span\u003e. Dùng tổ hợp tính đc số cách di chuyển là \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eC\u003c/i\u003e(\u003ci\u003eM\u003c/i\u003e, \u003ci\u003el\u003c/i\u003e)\u003c/span\u003e\u003c/p\u003e\u003ch2\u003e2D\u003c/h2\u003e\u003cp\u003eĐiểm khó nhất của bài này là 2 tọa độ ảnh hưởng nhau: mỗi lần di chuyển 1 tọa độ, mà tổng số lần di chuyển có hạn. Ví dụ ta di chuyển \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/span\u003e lần theo trục trái phải, thì chỉ còn \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eM\u003c/i\u003e - \u003ci\u003ex\u003c/i\u003e\u003c/span\u003e lần theo trục lên xuống.\u003c/p\u003e\u003cp\u003eTa thực hiện phép xoay hệ tọa độ góc 45 độ:\u003c/p\u003e\u003cp\u003e\u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003ex\u003c/i\u003e, \u003ci\u003ey\u003c/i\u003e) -  \u0026gt; (\u003ci\u003ex\u003c/i\u003e + \u003ci\u003ey\u003c/i\u003e, \u003ci\u003ex\u003c/i\u003e - \u003ci\u003ey\u003c/i\u003e)\u003c/span\u003e.\u003c/p\u003e\u003cp\u003eSau khi xoay hệ tọa độ, từ 1 điểm \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003eu\u003c/i\u003e, \u003ci\u003ev\u003c/i\u003e)\u003c/span\u003e, ta đi sang 4 ô: \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003eu\u003c/i\u003e - 1, \u003ci\u003ev\u003c/i\u003e - 1)\u003c/span\u003e, \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003eu\u003c/i\u003e - 1, \u003ci\u003ev\u003c/i\u003e + 1)\u003c/span\u003e, \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003eu\u003c/i\u003e + 1, \u003ci\u003ev\u003c/i\u003e - 1)\u003c/span\u003e, \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003eu\u003c/i\u003e + 1, \u003ci\u003ev\u003c/i\u003e + 1)\u003c/span\u003e.\u003c/p\u003e\u003cp\u003eKhi xoay trục như vậy, 1 cách kỳ diệu, ta thấy rằng 2 hướng di chuyển không còn phụ thuộc nhau \u003ccode\u003e:-O\u003c/code\u003e. (mỗi bước di chuyển di chuyển theo cả 2 trục --\u0026gt; ta di chuyển theo mỗi trục đúng \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eM\u003c/i\u003e\u003c/span\u003e bước).\u003c/p\u003e\u003cp\u003eDo đó, ta có thể xét riêng 2 trục tọa độ rồi nhân kết quả lại.\u003c/p\u003e\u003cp\u003e\u003ca href\u003d\"http://ideone.com/KmBJ2E\"\u003eCode\u003c/a\u003e\u003c/p\u003e\u003c/div\u003e","tags":[]}}