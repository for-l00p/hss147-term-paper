{"status":"OK","result":{"originalLocale":"en","allowViewHistory":false,"creationTimeSeconds":1432293961,"rating":0,"authorHandle":"asvikr","modificationTimeSeconds":1432294045,"id":18030,"title":"\u003cp\u003ewrong answer on problem Z-Query of spoj.\u003c/p\u003e","locale":"en","content":"\u003cdiv class\u003d\"ttypography\"\u003e\u003cp\u003eWhy my code give wrong answer for problem \u003ca href\u003d\"http://www.spoj.com/problems/ZQUERY/\"\u003ez-query\u003c/a\u003e ? \u003c/p\u003e\u003cp\u003emy approach is \u003ca href\u003d\"http://ideone.com/OJHsBL\"\u003ehere\u003c/a\u003e\u003c/p\u003e\u003ch1\u003edefine N 50005\u003c/h1\u003e\u003ch1\u003edefine B 225\u003c/h1\u003e\u003cp\u003eint F1[B+5][N],F2[B+5][N]; int n,m; int a[N],sum[N],temp[N]; void precalc() {  for(int i\u003d0;i\u0026lt;B;i++){  int l\u003di*B;  if(l\u0026gt;n)  break;  for(int r\u003dl;r\u0026lt;\u003dn;r++)  temp[sum[r]]\u003d-1;\u003c/p\u003e \u003cpre\u003eint tmp\u003d0;\n\n    for(int r\u003dl;r\u0026lt;\u003dn;r++){\n        if(temp[sum[r]]\u003d\u003d-1){\n            temp[sum[r]]\u003dr;\n        }\n        else\n            tmp\u003dmax(tmp,r-temp[sum[r]]);\n        F1[i][r]\u003dtmp;\n       // printf(\u0026quot;%d %d \u003d %d\\n\u0026quot;,i,r,tmp);\n    }\n}\nfor(int i\u003d0;i\u0026lt;B;i++){\n    int r\u003di*B;\n    if(r\u0026gt;n)\n        break;\n    int tmp\u003d0;\n    for(int l\u003d0;l\u0026lt;r;l++){\n        temp[sum[l]]\u003d-1;\n    }\n    for(int l\u003dr-1;l\u0026gt;\u003d0;l--){\n        if(temp[sum[l]]\u003d\u003d-1)\n            temp[sum[l]]\u003dl;\n        else\n            tmp\u003dmax(tmp,temp[sum[l]]-l);\n        F2[i][l]\u003dtmp;\n       // printf(\u0026quot;%d %d \u003d %d\\n\u0026quot;,i,l,tmp);\n    }\n}\u003c/pre\u003e\u003cp\u003e}\u003c/p\u003e\u003cp\u003eint solve(int l,int r) {  int ll\u003d(l+B-1)/B;  int rr\u003dr/B;  int ans\u003d0;  if(ll\u0026lt;rr){  ans\u003dmax(ans,max(F1[ll][r],F2[rr][l-1]));  for(int i\u003dl-1;i\u0026lt;\u003dll*B;i++)  temp[sum[i]]\u003d-1;  for(int i\u003dl-1;i\u0026lt;\u003dll*B;i++){  if(temp[sum[i]]\u003d\u003d-1){  temp[sum[i]]\u003di;  }  }\u003c/p\u003e \u003cpre\u003efor(int i\u003dr;i\u0026gt;\u003drr*B;i--){\n    if(temp[sum[i]]!\u003d-1)\n    ans\u003dmax(ans,i-temp[sum[i]]);\n}\n}\nelse\n{\n    for(int i\u003dl-1;i\u0026lt;\u003dr;i++)\n        temp[sum[i]]\u003d-1;\n    int tmp\u003d0;\n    for(int i\u003dl-1;i\u0026lt;\u003dr;i++){\n        if(temp[sum[i]]\u003d\u003d-1)\n            temp[sum[i]]\u003di;\n        else\n            tmp\u003dmax(tmp,i-temp[sum[i]]);\n    }\n    ans\u003dtmp;\n}\nreturn ans;\u003c/pre\u003e\u003cp\u003e}\u003c/p\u003e\u003cp\u003eint main() {  scanf(\u0026quot;%d %d\u0026quot;,\u0026amp;n,\u0026amp;m);  for(int i\u003d1;i\u0026lt;\u003dn;i++){  scanf(\u0026quot;%d\u0026quot;,\u0026amp;a[i]);  sum[i]\u003dsum[i-1]+a[i];  }  precalc();  while(m--){  int l,r;  scanf(\u0026quot;%d %d\u0026quot;,\u0026amp;l,\u0026amp;r);  if(l\u0026gt;r)  swap(l,r);  int ans\u003dsolve(l,r);  printf(\u0026quot;%d\\n\u0026quot;,ans);  } return 0; }\u003c/p\u003e\u003c/div\u003e","tags":["spoj","z-query"]}}