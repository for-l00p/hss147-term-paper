{"status":"OK","result":{"originalLocale":"en","allowViewHistory":true,"creationTimeSeconds":1462296842,"rating":28,"authorHandle":"sam721","modificationTimeSeconds":1462297618,"id":44680,"title":"\u003cp\u003eHelp with some fractions operations\u003c/p\u003e","locale":"en","content":"\u003cdiv class\u003d\"ttypography\"\u003e\u003cp\u003eHi everybody!\u003c/p\u003e\u003cp\u003eI recently was in a programming contest. There were 20 tasks, and one of them was as follows:\u003c/p\u003e\u003cp\u003eIn resume, you have C chairs and P pairs of chairs are given. The pairs \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eP\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ej\u003c/i\u003e)\u003c/span\u003e denote the probability of changing from chair \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/span\u003e to chair \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ej\u003c/i\u003e\u003c/span\u003e. You are sitting in one of these chairs, and every second you have to move to another one.\u003c/p\u003e\u003cp\u003eThen you have Q queries, each with two integers \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eC\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e, \u003ci\u003es\u003c/i\u003e\u003c/span\u003e , where \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eC\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e is the initial chair you are seated and you have to tell the chair that has the highest probability of being seated in after \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003es\u003c/i\u003e\u003c/span\u003e seconds (after \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003es\u003c/i\u003e\u003c/span\u003e changes).\u003c/p\u003e\u003cp\u003e\u003cspan class\u003d\"tex-span\"\u003e1 ≤ \u003ci\u003eC\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e ≤ 50\u003c/span\u003e\u003c/p\u003e\u003cp\u003e\u003cspan class\u003d\"tex-span\"\u003e1 ≤ \u003ci\u003es\u003c/i\u003e ≤ 100000000\u003c/span\u003e\u003c/p\u003e\u003cp\u003eAt first, I thought this was a simple problem, solvable using matrix exponentiation. First creating a matrix \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eM\u003c/i\u003e\u003c/span\u003e, where \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eM\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003eij\u003c/i\u003e\u003c/sub\u003e \u003d \u003ci\u003eP\u003c/i\u003e(\u003ci\u003ei\u003c/i\u003e, \u003ci\u003ej\u003c/i\u003e)\u003c/span\u003e. The answer should be in the \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eC\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e row of the resulting matrix \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eM\u003c/i\u003e\u003csup class\u003d\"upper-index\"\u003e\u003ci\u003eS\u003c/i\u003e\u003c/sup\u003e\u003c/span\u003e, but the problem has the next important requirement:\u003c/p\u003e\u003cp\u003eYou have to output the probability as an irreducible fraction. Worst of all, you have to output ONLY the very last digits of numerator and denominator...\u003c/p\u003e\u003cp\u003eFor example: 15/23 -\u0026gt; 5/3, 19/33 -\u0026gt; 9/3\u003c/p\u003e\u003cp\u003eI tried using Java BigInteger, doing reductions with gcd, but it was way too slow.\u003c/p\u003e\u003cp\u003eThis is a very interesting requirement (yet a very tough one too, at least for me). Any help will be very appreciated :) \u003c/p\u003e\u003cp\u003e(The contest has already ended, I\u0027m not cheating, and I struggled a lot of hours with this task :( )\u003c/p\u003e\u003c/div\u003e","tags":["math","probability theory","modular arithmetic"]}}