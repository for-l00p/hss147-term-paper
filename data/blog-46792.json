{"status":"OK","result":{"originalLocale":"en","allowViewHistory":false,"creationTimeSeconds":1472266548,"rating":3,"authorHandle":"I_love_Hoang_Yen","modificationTimeSeconds":1472455744,"id":46792,"title":"\u003cp\u003eSP Training 7 — Solutions\u003c/p\u003e","locale":"en","content":"\u003cdiv class\u003d\"ttypography\"\u003e\u003cul\u003e   \u003cli\u003e\u003ca href\u003d\"https://github.com/ngthanhtrung23/SP2016/tree/master/T7\"\u003eCode\u003c/a\u003e\u003c/li\u003e   \u003cli\u003e\u003ca href\u003d\"https://www.youtube.com/watch?v\u003dygynGc_zt7E\"\u003eVideo\u003c/a\u003e\u003c/li\u003e \u003c/ul\u003e\u003ch1\u003e[problem:208445A]\u003c/h1\u003e\u003cp\u003eBài này gồm một vài kĩ thuật cơ bản:\u003c/p\u003e \u003cul\u003e   \u003cli\u003eVòng tròn: Để xử lý vòng tròn, ta cứ coi nó là đường thẳng.   \u003cul\u003e     \u003cli\u003eNếu \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eL\u003c/i\u003e ≤ \u003ci\u003eR\u003c/i\u003e\u003c/span\u003e: xử lý như bình thường từ \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eL\u003c/i\u003e\u003c/span\u003e đến \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eR\u003c/i\u003e\u003c/span\u003e.\u003c/li\u003e     \u003cli\u003eNếu \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eL\u003c/i\u003e \u0026gt; \u003ci\u003eR\u003c/i\u003e\u003c/span\u003e: Xử lý 2 đoạn \u003cspan class\u003d\"tex-span\"\u003e[\u003ci\u003eL\u003c/i\u003e, \u003ci\u003eN\u003c/i\u003e]\u003c/span\u003e và đoạn \u003cspan class\u003d\"tex-span\"\u003e[1, \u003ci\u003eR\u003c/i\u003e]\u003c/span\u003e.\u003c/li\u003e   \u003c/ul\u003e\u003c/li\u003e   \u003cli\u003eTích:   \u003cul\u003e     \u003cli\u003eBài này vì mod không phải là số nguyên tố, nên ta không thể thực hiện phép chia. Vì vậy cần lưu các số một cách chính xác.\u003c/li\u003e     \u003cli\u003eTuy nhiên nếu lưu số lớn thì bộ nhớ và thời gian chạy đều quá lâu.\u003c/li\u003e     \u003cli\u003eCách giải quyết là sử dụng biến tổng thành tích. Ở bài này nhận thấy các số mà ta nhân vào không quá 150, nên ta phân tích được thành không quá 40 thừa số nguyên tố: \u003cspan class\u003d\"tex-span\"\u003e2\u003csup class\u003d\"upper-index\"\u003e\u003ci\u003ex\u003c/i\u003e\u003c/sup\u003e * 3\u003csup class\u003d\"upper-index\"\u003e\u003ci\u003ey\u003c/i\u003e\u003c/sup\u003e * 5\u003csup class\u003d\"upper-index\"\u003e\u003ci\u003ez\u003c/i\u003e\u003c/sup\u003e * ...\u003c/span\u003e, thì ta chỉ cần lưu các số thành 1 mảng gồm không quá 40 phần tử: \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ex\u003c/i\u003e, \u003ci\u003ey\u003c/i\u003e, \u003ci\u003ez\u003c/i\u003e, ...\u003c/span\u003e\u003c/li\u003e   \u003c/ul\u003e\u003c/li\u003e \u003c/ul\u003e\u003ch1\u003e[problem:208445B]\u003c/h1\u003e\u003ch1\u003e1 vài nhận xét:\u003c/h1\u003e \u003cul\u003e   \u003cli\u003eMỗi lần xin bài coi như là mở ngoặc, mỗi lần nộp bài coi như là đóng ngoặc.\u003c/li\u003e   \u003cli\u003eMỗi cặp ngoặc, nếu nó ở 2 vị trí mà tâm trạng của cô giáo giống nhau --\u0026gt; 10 điểm. Ngược lại --\u0026gt; 5 điểm.\u003c/li\u003e   \u003cli\u003eNhư vậy, chúng ta cần tìm dãy ngoặc mà có nhiều vị trí đóng mở cùng loại nhất.\u003c/li\u003e   \u003cli\u003eLuôn có 1 kết quả tối ưu mà là dãy ngoặc đúng.\u003c/li\u003e \u003c/ul\u003e\u003ch2\u003eChứng minh:\u003c/h2\u003e\u003cp\u003eChừng nào vẫn ko phải là dãy ngoặc đúng, thì có 2 trường hợp: - có chẵn dấu mở ngoặc thừa ra. - có 1 số dấu đóng ngoặc không có dấu mở ngoặc nào trước đó.\u003c/p\u003e\u003cp\u003eTrong cả 2 trường hợp, đặt số dấu ngoặc không có cái nào khớp nó là X, thì ta luôn có thể phá 1 cặp ngoặc đúng để giảm X đi 2 (số cặp ngoặc đúng tăng thêm 1 — nghĩa là sau khi phá thì nó giảm đi 1, rồi ta khớp ngoặc lại để nó tăng lên 2). --\u0026gt; mỗi bước như vậy thì tổng điểm giảm đi tối đa 10, rồi tăng ít nhất 5. --\u0026gt; tổng điểm không giảm.\u003c/p\u003e\u003ch1\u003eLời giải:\u003c/h1\u003e \u003cul\u003e   \u003cli\u003eVới 1 dãy ngoặc đúng, thì các mở ngoặc luôn ở vị trí chẵn (0-index) và các đóng ngoặc luôn ở vị trí lẻ.\u003c/li\u003e \u003c/ul\u003e\u003cp\u003eĐặt: - \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ea\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003eat\u003c/i\u003e\u003c/sub\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003eeven\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e là số chữ A ở vị trí chẵn - \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ea\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003eat\u003c/i\u003e\u003c/sub\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003eodd\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e là số chữ A ở vị trí lẻ - \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eb\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003eat\u003c/i\u003e\u003c/sub\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003eeven\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e là số chữ B ở vị trí chẵn - \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eb\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003eat\u003c/i\u003e\u003c/sub\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003eodd\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e là số chữ B ở vị trí lẻ\u003c/p\u003e \u003cul\u003e   \u003cli\u003eRõ ràng, trong cách tối ưu, ta chỉ có thể khớp tối đa: \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003emin\u003c/i\u003e(\u003ci\u003ea\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003eat\u003c/i\u003e\u003c/sub\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003eodd\u003c/i\u003e\u003c/sub\u003e, \u003ci\u003ea\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003eat\u003c/i\u003e\u003c/sub\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003eeven\u003c/i\u003e\u003c/sub\u003e) + \u003ci\u003emin\u003c/i\u003e(\u003ci\u003eb\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003eat\u003c/i\u003e\u003c/sub\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003eodd\u003c/i\u003e\u003c/sub\u003e, \u003ci\u003eb\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003eat\u003c/i\u003e\u003c/sub\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003eeven\u003c/i\u003e\u003c/sub\u003e)\u003c/span\u003e cặp đóng mở ngoặc mà đóng và mở ở 2 vịtrí khớp nhau.\u003c/li\u003e   \u003cli\u003eĐể khớp, đầu tiên ta dùng thuật toán kiểu stack (xem \u003ccode\u003err.cpp\u003c/code\u003e). Sau khi chạy như vậy, rõ ràng ta khớp đc hết các cặp có thể khớp, đống còn lại có thể khớp bằng tham.\u003c/li\u003e \u003c/ul\u003e\u003ch1\u003e[problem:208445C]\u003c/h1\u003e\u003cp\u003eBài này là 1 bài tìm 1 nghiệm với \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eN\u003c/i\u003e\u003c/span\u003e cho trước. Với bài kiểu này ta có 1 vài hướng thông thường:\u003c/p\u003e \u003cul\u003e   \u003cli\u003eDuyệt để tìm pattern.\u003c/li\u003e   \u003cli\u003eXây dựng nghiệm với \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eN\u003c/i\u003e\u003c/span\u003e từ các nghiệm với các \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eN\u003c/i\u003e\u003c/span\u003e nhỏ hơn.\u003c/li\u003e \u003c/ul\u003e\u003cp\u003eỞ bài này ta xây dựng nghiệm \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eN\u003c/i\u003e\u003c/span\u003e từ nghiệm của \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eN\u003c/i\u003e - 2\u003c/span\u003e.\u003c/p\u003e \u003cul\u003e   \u003cli\u003eVới \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eN\u003c/i\u003e ≤ 3\u003c/span\u003e, nghiệm đã được cho trong đề bài.\u003c/li\u003e   \u003cli\u003eVới \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eN\u003c/i\u003e ≥ 4\u003c/span\u003e, đầu tiên ta sinh kết quả cho \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eN\u003c/i\u003e - 2\u003c/span\u003e, sau đó ta ghép 4 bộ nghiệm lại, đồng thời thêm các cặp 2 ký tự cuối vào sao cho phù hợp. Chú ý rằng ta có thể làm như vậy được do tính chất vòng tròn của bài toán.\u003c/li\u003e \u003c/ul\u003e\u003cp\u003eKhi ghép, ta cần đảm bảo:\u003c/p\u003e \u003cul\u003e   \u003cli\u003eKhông có 2 xâu nào trùng nhau. Vì ta lặp lại kết quả của \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eN\u003c/i\u003e - 2\u003c/span\u003e 4 lần, nên với xâu, trong 4 lần lặp, ta phải thêm các cặp 2 bit khác nhau.\u003c/li\u003e   \u003cli\u003eĐảm bảo 2 xâu liên tiếp khác nhau \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eN\u003c/i\u003e / 2\u003c/span\u003e bit: với 2 xâu liên tiếp, nó đã khác nhau \u003cspan class\u003d\"tex-span\"\u003e(\u003ci\u003eN\u003c/i\u003e - 2) / 2\u003c/span\u003e bit rồi, nên khi thêm 2 bit mới, 1 trong 2 bit của 2 xâu liên tiếp phải khác nhau.\u003c/li\u003e \u003c/ul\u003e\u003c/div\u003e","tags":[]}}