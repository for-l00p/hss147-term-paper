{"status":"OK","result":{"originalLocale":"ru","allowViewHistory":false,"creationTimeSeconds":1510778000,"rating":1,"authorHandle":"niyaznigmatul","modificationTimeSeconds":1510778000,"id":55801,"title":"\u003cp\u003eРешение задачи про удаление скобок\u003c/p\u003e","locale":"ru","content":"\u003cdiv class\u003d\"ttypography\"\u003e\u003cpre\u003e\u003ccode\u003e#include \u0026lt;fstream\u0026gt;\n#include \u0026lt;string\u0026gt;\n#include \u0026lt;algorithm\u0026gt;\n#include \u0026lt;cassert\u0026gt;\n\nint f[123][123], p[123][123];\n\nbool is_pair(char c, char d) {\n  return (c \u003d\u003d \u0027(\u0027 \u0026amp;\u0026amp; d \u003d\u003d \u0027)\u0027) || (c \u003d\u003d \u0027{\u0027 \u0026amp;\u0026amp; d \u003d\u003d \u0027}\u0027) || (c \u003d\u003d \u0027[\u0027 \u0026amp;\u0026amp; d \u003d\u003d \u0027]\u0027);\n}\n\nusing namespace std;\n\nstring restore(string const \u0026amp;s, int left, int right) {\n  if (left \u0026gt;\u003d right) {\n    return \u0026quot;\u0026quot;;\n  }\n  if (p[left][right] \u003d\u003d 0) {\n    return restore(s, left + 1, right);\n  } else {\n    int pair \u003d p[left][right];\n    return s[left] + restore(s, left + 1, pair - 1) + s[pair] + restore(s, pair + 1, right);\n  }\n}\n\nint main() {\n  using namespace std;\n  ifstream fin(\u0026quot;erase.in\u0026quot;);\n  ofstream fout(\u0026quot;erase.out\u0026quot;);\n  string s;\n  fin \u0026gt;\u0026gt; s;\n  int n \u003d (int) s.size();\n  for (int left \u003d n - 1; left \u0026gt;\u003d 0; left--) {\n    for (int right \u003d left; right \u0026lt; n; right++) {\n      if (left \u003d\u003d right) { // длина 1\n        f[left][right] \u003d 1;\n      } else {\n        f[left][right] \u003d f[left + 1][right] + 1; // пробуем удалить\n        p[left][right] \u003d 0;\n        for (int pair \u003d left + 1; pair \u0026lt;\u003d right; pair++) {\n          if (!is_pair(s[left], s[pair])) {\n            continue;\n          }\n          int sum \u003d 0; // пробуем найти пару s[left]\n          if (left + 1 \u0026lt;\u003d pair - 1) {\n            sum +\u003d f[left + 1][pair - 1]; // между s[left+1] и s[pair-1] должна быть ПСП\n          }\n          if (pair + 1 \u0026lt;\u003d right) {\n            sum +\u003d f[pair + 1][right]; // между s[pair+1] и s[right] должна быть ПСП\n          }\n          if (f[left][right] \u0026gt; sum) {\n            f[left][right] \u003d sum;\n            p[left][right] \u003d pair;\n          }\n        }\n      }\n    }\n  }\n  fout \u0026lt;\u0026lt; restore(s, 0, n - 1) \u0026lt;\u0026lt; \u0027\\n\u0027;\n}\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":[]}}