{"status":"OK","result":{"originalLocale":"ru","allowViewHistory":true,"creationTimeSeconds":1486193942,"rating":0,"authorHandle":"I_Love_Dilya","modificationTimeSeconds":1486193942,"id":50233,"title":"\u003cp\u003eДерево отрезков (снизу)\u003c/p\u003e","locale":"ru","content":"\u003cdiv class\u003d\"ttypography\"\u003e\u003cdiv class\u003d\"spoiler\"\u003e\u003cb class\u003d\"spoiler-title\"\u003ecode\u003c/b\u003e\u003cdiv class\u003d\"spoiler-content\" style\u003d\"display: none;\"\u003e\u003cp\u003e#include \u0026lt;bits/stdc++.h\u0026gt; \u003c/p\u003e\u003cp\u003eusing namespace std; \u003c/p\u003e\u003cp\u003eint n, Q, num \u003d 1;\u003cbr /\u003e int a[1111111], t[4444444]; \u003c/p\u003e\u003cp\u003evoid build (int n) {\u003cbr /\u003e while (num \u0026lt; n) {\u003cbr /\u003e num *\u003d 2;\u003cbr /\u003e } for (int i \u003d 1; i \u0026lt;\u003d n; i ++) {\u003cbr /\u003e t[i + num — 1] \u003d a[i];\u003cbr /\u003e } for (int i \u003d num + n; i \u0026lt;\u003d num * 2 — 1; i ++) {\u003cbr /\u003e t[i] \u003d 0;\u003cbr /\u003e } for (int i \u003d num — 1; i \u0026gt;\u003d 1; i --) {\u003cbr /\u003e t[i] \u003d t[i * 2] + t[i * 2 + 1];\u003cbr /\u003e }\u003cbr /\u003e } \u003c/p\u003e\u003cp\u003eint getsum (int l, int r) {\u003cbr /\u003e l +\u003d num — 1;\u003cbr /\u003e r +\u003d num — 1;\u003cbr /\u003e int sum \u003d 0;\u003cbr /\u003e while (l \u0026lt;\u003d r) {\u003cbr /\u003e if (l % 2) {\u003cbr /\u003e sum +\u003d t[l];\u003cbr /\u003e l ++;\u003cbr /\u003e } if (r % 2 \u003d\u003d 0) {\u003cbr /\u003e sum +\u003d t[r];\u003cbr /\u003e r --;\u003cbr /\u003e } l /\u003d 2;\u003cbr /\u003e r /\u003d 2;\u003cbr /\u003e } return sum;\u003cbr /\u003e } \u003c/p\u003e\u003cp\u003evoid update (int pos, int val) {\u003cbr /\u003e pos +\u003d num — 1;\u003cbr /\u003e t[pos] \u003d val;\u003cbr /\u003e pos /\u003d 2;\u003cbr /\u003e while (pos) {\u003cbr /\u003e t[pos] \u003d t[pos * 2] + t[pos * 2 + 1];\u003cbr /\u003e pos /\u003d 2;\u003cbr /\u003e }\u003cbr /\u003e } \u003c/p\u003e\u003cp\u003eint main () {\u003cbr /\u003e cin \u0026gt;\u0026gt; n;\u003cbr /\u003e for (int i \u003d 1; i \u0026lt;\u003d n; i ++) {\u003cbr /\u003e cin \u0026gt;\u0026gt; a[i];\u003cbr /\u003e } cin \u0026gt;\u0026gt; Q;\u003cbr /\u003e build (n);\u003cbr /\u003e while (Q --) {\u003cbr /\u003e int type;\u003cbr /\u003e cin \u0026gt;\u0026gt; type;\u003cbr /\u003e if (type \u003d\u003d 1) {\u003cbr /\u003e int l, r;\u003cbr /\u003e cin \u0026gt;\u0026gt; l \u0026gt;\u0026gt; r;\u003cbr /\u003e cout \u0026lt;\u0026lt; getsum (l, r) \u0026lt;\u0026lt; \u0027\\n\u0027;\u003cbr /\u003e } else {\u003cbr /\u003e int pos, val;\u003cbr /\u003e cin \u0026gt;\u0026gt; pos \u0026gt;\u0026gt; val;\u003cbr /\u003e update (pos, val);\u003cbr /\u003e }\u003cbr /\u003e } return 0;\u003cbr /\u003e } \u003c/p\u003e\u003c/div\u003e\u003c/div\u003e\u003c/div\u003e","tags":[]}}