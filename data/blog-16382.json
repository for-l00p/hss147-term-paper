{"status":"OK","result":{"originalLocale":"ru","allowViewHistory":false,"creationTimeSeconds":1423913682,"rating":13,"authorHandle":"Lord_F","modificationTimeSeconds":1423929778,"id":16382,"title":"\u003cp\u003eЧетвертая личная интернет-олимпиада + Краткий разбор всех задач\u003c/p\u003e","locale":"ru","content":"\u003cdiv class\u003d\"ttypography\"\u003e\u003cp\u003eЗакончилась четвертая личная интернет-олимпиада.\u003cbr /\u003eЗдесь предлагается поделиться впечатлениями. \u003c/p\u003e\u003cp\u003e\u003ca href\u003d\"http://neerc.ifmo.ru/school/io/archive/20150214/problems-20150214-individual.pdf\"\u003eЗадачи\u003c/a\u003e\u003cbr /\u003e\u003ca href\u003d\"http://neerc.ifmo.ru/school/io/archive/20150214/standings-20150214-individual.html\"\u003eРезультаты\u003c/a\u003e\u003cbr /\u003e\u003ca href\u003d\"http://neerc.ifmo.ru/school/io/archive/20150214/archive-20150214-individual-large.rar\"\u003eТесты и решения жюри (41 мб)\u003c/a\u003e\u003cbr /\u003e\u003ca href\u003d\"http://neerc.ifmo.ru/school/io/archive/20150214/archive-20150214-individual-small.rar\"\u003eГенераторы тестов и решения жюри\u003c/a\u003e \u003c/p\u003e\u003cp\u003e\u003cstrong\u003eКраткий разбор\u003c/strong\u003e \u003c/p\u003e\u003cp\u003e\u003cstrong\u003eА. Муравьи-мутанты\u003c/strong\u003e\u003cbr /\u003eБудем для каждой ловушки слева направо искать муравья, который в нее попадёт. Для первой это будет самый правый муравей, начинающий слева от нее, для второй — самый правый из всех начинающих слева от нее, кроме того одного, который уже словушился, для третьей... Идея понятна, для эффективной реализации достаточно было пройти ловушки постепенно кидая муравьев в стек. \u003c/p\u003e\u003cp\u003e\u003cstrong\u003eВ. Разбиение на камеры\u003c/strong\u003e\u003cbr /\u003eНельзя, когда \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003en\u003c/i\u003e \u0026lt; \u003ci\u003ek\u003c/i\u003e\u003c/span\u003e, \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ek\u003c/i\u003e \u003d 1\u003c/span\u003e или \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003en\u003c/i\u003e\u003c/span\u003e нечётное, а также если \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ek\u003c/i\u003e\u003c/span\u003e нечётное и \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003en\u003c/i\u003e \u003d \u003ci\u003ek\u003c/i\u003e\u003c/span\u003e или \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003en\u003c/i\u003e \u003d \u003ci\u003ek\u003c/i\u003e + 1\u003c/span\u003e.\u003cbr /\u003eВозможное решение: можно на первые две позиции поставить \u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/9f/96/9f963859962dc1f4eb9598321f48509041cfeca1.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e и \u003cimg align\u003d\"middle\" class\u003d\"tex-formula\" src\u003d\"/predownloaded/f6/37/f637d99f0d54118e22f5360ab72b371ddc2db00b.png\" style\u003d\"max-width: 100.0%;max-height: 100.0%;\" /\u003e а на все остальные — \u003cspan class\u003d\"tex-span\"\u003e1\u003c/span\u003e.\u003cbr /\u003eПоправьте меня, если я неправ. \u003c/p\u003e\u003cp\u003e\u003cstrong\u003eС. Производство паутины\u003c/strong\u003e\u003cbr /\u003eНесложная динамика. Пусть \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003edp\u003c/i\u003e[\u003ci\u003ei\u003c/i\u003e]\u003c/span\u003e — минимальная стоимость произвести на свет префикс длины \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/span\u003e.\u003cbr /\u003eПонятно, что перед удалением нет смысла делать добавление символа. Тогда можно ограничиться двумя операциями: добавить символ (стоимость \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ea\u003c/i\u003e\u003c/span\u003e) и добавить в конец какой-то префикс текущей строки (стоимость \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eb\u003c/i\u003e + \u003ci\u003ec\u003c/i\u003e·\u003ci\u003edellen\u003c/i\u003e\u003c/span\u003e, где \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003edellen\u003c/i\u003e\u003c/span\u003e — это длина текущей строки минус длина добавляемого префикса).\u003cbr /\u003eТогда \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003edp\u003c/i\u003e[1] \u003d \u003ci\u003ea\u003c/i\u003e\u003c/span\u003e; \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003edp\u003c/i\u003e[\u003ci\u003ei\u003c/i\u003e] \u003d \u003ci\u003emin\u003c/i\u003e(\u003ci\u003edp\u003c/i\u003e[\u003ci\u003ei\u003c/i\u003e - 1] + \u003ci\u003ea\u003c/i\u003e, \u003ci\u003emin\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003ej\u003c/i\u003e\u003c/sub\u003e(\u003ci\u003edp\u003c/i\u003e[\u003ci\u003ej\u003c/i\u003e] + \u003ci\u003eb\u003c/i\u003e + \u003ci\u003ec\u003c/i\u003e·(\u003ci\u003ej\u003c/i\u003e - (\u003ci\u003ei\u003c/i\u003e - \u003ci\u003ej\u003c/i\u003e))))\u003c/span\u003e, где \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ej\u003c/i\u003e\u003c/span\u003e — все возможные длины префиксов, из которых мы можем получить текущий префикс нашей второй операцией.\u003cbr /\u003eКак же теперь определить все нужные \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ej\u003c/i\u003e\u003c/span\u003e? Для этого стоит заметить что каждый \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ej\u003c/i\u003e\u003c/span\u003e будет учитываться при пересчете какого-то количества подряд идущих \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003edp\u003c/i\u003e[\u003ci\u003ei\u003c/i\u003e]\u003c/span\u003e, причём этот отрезок явно определяется \u003ca href\u003d\"https://ru.wikipedia.org/wiki/Z-%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F\"\u003eZ-функцией\u003c/a\u003e от \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ej\u003c/i\u003e\u003c/span\u003e. Также нелишним будет учесть, что в формуле пересчета \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003edp\u003c/i\u003e[\u003ci\u003ej\u003c/i\u003e] + \u003ci\u003eb\u003c/i\u003e + \u003ci\u003ec\u003c/i\u003e·2·\u003ci\u003ej\u003c/i\u003e\u003c/span\u003e зависит только от \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ej\u003c/i\u003e\u003c/span\u003e. а -\u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ec\u003c/i\u003e·\u003ci\u003ei\u003c/i\u003e\u003c/span\u003e -- только от \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ei\u003c/i\u003e\u003c/span\u003e.\u003cbr /\u003eИсходя из вышеупомянутого, используем алгоритм заметающей прямой: пусть мы храним множество всех отрезков для всех \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ej\u003c/i\u003e\u003c/span\u003e, в которых мы сейчас находимся, и для каждого храним первое слагаемое, тогда пересчет очевиден. Поддерживать множество тоже несложно. \u003c/p\u003e\u003cp\u003e\u003cstrong\u003eD. Эвакуация\u003c/strong\u003e\u003cbr /\u003eТоже несложная динамика. В этот раз на дереве.\u003cbr /\u003eПодвесим дерево. Пусть \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003edp\u003c/i\u003e[\u003ci\u003ev\u003c/i\u003e]\u003c/span\u003e — максимальный момент времени, в который мы можем начать бежать из вершины \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ev\u003c/i\u003e\u003c/span\u003e вниз по дереву, чтобы спастись, если мы можем это сделать, и -\u003cspan class\u003d\"tex-span\"\u003e1\u003c/span\u003e иначе. Пересчет: \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003edp\u003c/i\u003e[\u003ci\u003ev\u003c/i\u003e] \u003d \u003ci\u003emax\u003c/i\u003e( - 1, \u003ci\u003emax\u003c/i\u003e(\u003ci\u003emin\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003eu\u003c/i\u003e\u003c/sub\u003e(\u003ci\u003edp\u003c/i\u003e[\u003ci\u003eu\u003c/i\u003e], \u003ci\u003et\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003eu\u003c/i\u003e\u003c/sub\u003e) - \u003ci\u003el\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003eu\u003c/i\u003e\u003c/sub\u003e))\u003c/span\u003e, где \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eu\u003c/i\u003e\u003c/span\u003e — дочерняя вершина, \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003et\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003eu\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e и \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003el\u003c/i\u003e\u003csub class\u003d\"lower-index\"\u003e\u003ci\u003eu\u003c/i\u003e\u003c/sub\u003e\u003c/span\u003e — параметры ребра .\u003cbr /\u003eРешение на 40: ну подвесим дерево за все вершины по очереди и запустим такую штуку.\u003cbr /\u003eРешение на 100: применим стандартный приём для подсчета динамики на неподвешенном дереве. Подвесим за произвольную вершину и посчитаем динамику. Затем запустим DFS из корня и для каждой вершины, кроме него, представим, что ребро из нее в предка является как будто является ребром в новую дочернюю вершину, и пересчитаем \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003edp\u003c/i\u003e[\u003ci\u003ev\u003c/i\u003e]\u003c/span\u003e с учетом неё.\u003cbr /\u003eНо просто брать для этого пересчета \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003edp\u003c/i\u003e[\u003ci\u003eparent\u003c/i\u003e]\u003c/span\u003e нельзя, так как оно само уже посчитано с учетом (бывшего) \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003edp\u003c/i\u003e[\u003ci\u003ev\u003c/i\u003e]\u003c/span\u003e. Поэтому каждый раз при переходе от \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eparent\u003c/i\u003e\u003c/span\u003e к \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ev\u003c/i\u003e\u003c/span\u003e мы передаем параметр \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eup\u003c/i\u003e\u003c/span\u003e, который показывает, каким бы было \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003edp\u003c/i\u003e[\u003ci\u003eparent\u003c/i\u003e]\u003c/span\u003e, если не существовало \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ev\u003c/i\u003e\u003c/span\u003e. Как найти \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eup\u003c/i\u003e\u003c/span\u003e? Оно очевидным образом получается из максимального из значении динамики всех дочерних вершин \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eparent\u003c/i\u003e\u003c/span\u003e, кроме \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ev\u003c/i\u003e\u003c/span\u003e (а еще и \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eup\u003c/i\u003e\u003c/span\u003e, который для \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003eparent\u003c/i\u003e\u003c/span\u003e), а чтобы считать его для всех \u003cspan class\u003d\"tex-span\"\u003e\u003ci\u003ev\u003c/i\u003e\u003c/span\u003e, надо еще поддерживать два максимальных таких значения.\u003cbr /\u003eДля лучшего \u003cem\u003eпони\u003c/em\u003eмания можно посмотреть мой \u003ca href\u003d\"http://paste.ubuntu.com/10223502/\"\u003eкод\u003c/a\u003e.\u003cbr /\u003eСудя по всему, решения жюри в архиве основаны на другой идее (сливаемых-переливаемых множеств).\u003c/p\u003e\u003c/div\u003e","tags":["интернет-олимпиады","личная олимпиада","cataclysmdda3d"]}}