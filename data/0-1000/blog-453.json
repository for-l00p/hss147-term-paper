{"status":"OK","result":{"originalLocale":"en","allowViewHistory":false,"creationTimeSeconds":1276233862,"rating":0,"authorHandle":"simp1eton","modificationTimeSeconds":1276233901,"id":453,"title":"Extremely Weird Bug with Sets","locale":"en","content":"\u003cdiv class\u003d\"ttypography\"\u003eHi all, \u003cbr /\u003e\u003cbr /\u003eI have this really weird bug with STL set that I cannot understand. \u003cbr /\u003e\u003cbr /\u003eMy set function is given below. \u003cbr /\u003e\u003cbr /\u003estruct pt{int a,b,node;}tmp,ins;\u003cbr /\u003estruct cmp{\u003cbr /\u003e    bool operator()(pt a, pt b){\u003cbr /\u003e        if(ans[a.node] !\u003d ans[b.node]) return ans[a.node] \u0026lt; ans[b.node];\u003cbr /\u003e        if(a.node !\u003d b.node) return a.node\u0026lt;b.node;\u003cbr /\u003e        if(a.a !\u003d b.a) return a.a\u0026lt;b.a;\u003cbr /\u003e        return a.b\u0026lt;b.b;\u003cbr /\u003e    }\u003cbr /\u003e};\u003cbr /\u003eset \u0026lt;pt,cmp\u0026gt; pq;\u003cbr /\u003e\u003cbr /\u003eI am using this modified set for running dijkstra algorithm. However, I got some infinite loop somewhere. When I ran some debugging output, I noticed something extremely weird.\u003cbr /\u003e\u003cbr /\u003e//Code portion with bug\u003cbr /\u003e\u003cbr /\u003ewhile(!pq.empty()){\u003cbr /\u003e       tmp \u003d *pq.begin();\u003cbr /\u003e       pq.erase(tmp);\u003cbr /\u003e      printf(\u0026quot;removed %d %d %d\\n\u0026quot;, tmp.node, tmp.a, tmp.b);  //This node is removed.\u003cbr /\u003e       if(pq.find(tmp) \u003d\u003d pq.end()) printf(\u0026quot;erased\\n\u0026quot;);    //This line is printed, which means the element is removed\u003cbr /\u003e       printf(\u0026quot;first element is now %d %d %d\\n\u0026quot;, pq.begin()-\u0026gt;node, pq.begin()-\u0026gt;a, pq.begin()-\u0026gt;b); \u003cbr /\u003e               //Amazingly, the first element is exactly the same as tmp! And I thought I already deleted it and cannot find it in the set...\u003cbr /\u003e}\u003cbr /\u003e\u003cbr /\u003eCan someone tell me what is wrong? Is there something wrong with my comparison function or something that leads to the bug? \u003cbr /\u003e\u003cbr /\u003eThanks in advance.\u003c/div\u003e","tags":["gcj"]}}